<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>vue3é‡‡å‘è®°å½•</title>
      <link href="/2024/02/23/vue3%E9%87%87%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/02/23/vue3%E9%87%87%E5%9D%91%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="vue3-ä½¿ç”¨pinia-æŒä¹…åŒ–å¤±æ•ˆ"><a href="#vue3-ä½¿ç”¨pinia-æŒä¹…åŒ–å¤±æ•ˆ" class="headerlink" title="vue3 ä½¿ç”¨pinia æŒä¹…åŒ–å¤±æ•ˆ"></a>vue3 ä½¿ç”¨pinia æŒä¹…åŒ–å¤±æ•ˆ</h1><h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h2><ul><li>vue3</li><li>pinia<ul><li>pinia-plugin-persistedstate</li></ul></li><li>router</li></ul><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>è®¾ç½®åŠ¨æ€è·¯ç”±<br>åœ¨é¡µé¢åˆ·æ–°çš„æ—¶å€™ä¼šåˆå§‹åŒ–router,æ‰€æœ‰åœ¨routerçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œåœ¨è¿™ä¹‹ä¸­ä½¿ç”¨äº†store,å¯¼è‡´äº†store æŒä¹…åŒ–å¤±æ•ˆ</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>åœ¨<code>app.use(router)</code> ä¹‹å‰è¿›è¡Œäº†è®¾ç½®åŠ¨æ€è·¯ç”±ï¼Œåœ¨è¿™ä¹‹ä¸­ä½¿ç”¨äº†store,å¯¼è‡´å¤±æ•ˆ</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>åœ¨router åˆå§‹åŒ–ä¹‹åå†ä½¿ç”¨store.</p><blockquote><p>æç¤ºï¼šè¿™å…¶ä¸­å¹¶ä¸ä¼šæŠ¥é”™æç¤º</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> vue3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3 </tag>
            
            <tag> vue-router </tag>
            
            <tag> pinia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä½¿ç”¨husky hook</title>
      <link href="/2024/02/09/git%E4%BD%BF%E7%94%A8husky-hook/"/>
      <url>/2024/02/09/git%E4%BD%BF%E7%94%A8husky-hook/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡ä»‹ç» vue3-element-admin å¦‚ä½•é€šè¿‡ Husky + Lint-staged + Commitlint + Commitizen + cz-git æ¥é…ç½® Git æäº¤ä»£ç è§„èŒƒã€‚</p><p>æ ¸å¿ƒå†…å®¹æ˜¯é…ç½® Husky çš„ pre-commit å’Œ commit-msg ä¸¤ä¸ªé’©å­:</p><p>pre-commitï¼šHusky + Lint-staged æ•´åˆå®ç° Git æäº¤å‰ä»£ç è§„èŒƒæ£€æµ‹/æ ¼å¼åŒ– (å‰æï¼šESlint + Prettier + Stylelint ä»£ç ç»Ÿä¸€è§„èŒƒ)ï¼›</p><p>commit-msg: Husky + Commitlint + Commitizen + cz-git æ•´åˆå®ç°ç”Ÿæˆè§„èŒƒåŒ–ä¸”é«˜åº¦è‡ªå®šä¹‰çš„ Git commit messageã€‚</p><h1 id="husky"><a href="#husky" class="headerlink" title="husky"></a>husky</h1><h2 id="è‡ªåŠ¨å®‰è£…"><a href="#è‡ªåŠ¨å®‰è£…" class="headerlink" title="è‡ªåŠ¨å®‰è£…"></a>è‡ªåŠ¨å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky-init &amp;&amp; npm install</span><br></pre></td></tr></table></figure><h1 id="pre-commit-husky-Lint-staged"><a href="#pre-commit-husky-Lint-staged" class="headerlink" title="pre-commit:husky + Lint-staged"></a>pre-commit:husky + Lint-staged</h1><h2 id="Lint-staged-å®‰è£…"><a href="#Lint-staged-å®‰è£…" class="headerlink" title="Lint-staged å®‰è£…"></a>Lint-staged å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D lint-staged</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åœ¨ package.json ä¸­é…ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;*.&#123;js,ts&#125;&quot;</span>: [</span><br><span class="line">     <span class="string">&quot;eslint --fix&quot;</span>,</span><br><span class="line">     <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">   ],</span><br><span class="line">   <span class="attr">&quot;*.&#123;cjs,json&#125;&quot;</span>: [</span><br><span class="line">     <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">   ],</span><br><span class="line">   <span class="attr">&quot;*.&#123;vue,html&#125;&quot;</span>: [</span><br><span class="line">     <span class="string">&quot;eslint --fix&quot;</span>,</span><br><span class="line">     <span class="string">&quot;prettier --write&quot;</span>,</span><br><span class="line">     <span class="string">&quot;stylelint --fix&quot;</span></span><br><span class="line">   ],</span><br><span class="line">   <span class="attr">&quot;*.&#123;scss,css&#125;&quot;</span>: [</span><br><span class="line">     <span class="string">&quot;stylelint --fix&quot;</span>,</span><br><span class="line">     <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">   ],</span><br><span class="line">   <span class="attr">&quot;*.md&quot;</span>: [</span><br><span class="line">     <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">   ]</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒæŒ‡ä»¤"><a href="#è¿è¡ŒæŒ‡ä»¤" class="headerlink" title="è¿è¡ŒæŒ‡ä»¤"></a>è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;lint:lint-staged&quot;</span>: <span class="string">&quot;lint-staged&quot;</span>,</span><br></pre></td></tr></table></figure><h2 id="pre-commit-husky-é…ç½®"><a href="#pre-commit-husky-é…ç½®" class="headerlink" title="pre-commit:husky é…ç½®"></a>pre-commit:husky é…ç½®</h2><p>åœ¨ .husky\pre-commit æ–‡ä»¶ä¸­é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env sh</span><br><span class="line">. &quot;$(dirname -- &quot;$0&quot;)/_/husky.sh&quot;</span><br><span class="line"></span><br><span class="line">npm run lint:lint-staged</span><br></pre></td></tr></table></figure><h1 id="commit-msg-Husky-Commitlint-Commitizen-cz-git"><a href="#commit-msg-Husky-Commitlint-Commitizen-cz-git" class="headerlink" title="commit-msg: Husky + Commitlint + Commitizen + cz-git"></a>commit-msg: Husky + Commitlint + Commitizen + cz-git</h1><p>Commitlint æ£€æŸ¥æ‚¨çš„æäº¤æ¶ˆæ¯æ˜¯å¦ç¬¦åˆ Conventional commit format</p><h2 id="Commitlint-å®‰è£…"><a href="#Commitlint-å®‰è£…" class="headerlink" title="Commitlint å®‰è£…"></a>Commitlint å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D @commitlint/cli @commitlint/config-conventional</span><br></pre></td></tr></table></figure><h2 id="Commitlint-é…ç½®æ–‡ä»¶"><a href="#Commitlint-é…ç½®æ–‡ä»¶" class="headerlink" title="Commitlint é…ç½®æ–‡ä»¶"></a>Commitlint é…ç½®æ–‡ä»¶</h2><p><a href="commitlint.config.cjs">commitlint.config.cjs æ–‡ä»¶ä¸‹è½½</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // ç»§æ‰¿çš„è§„åˆ™</span><br><span class="line">  extends: [&quot;@commitlint/config-conventional&quot;],</span><br><span class="line">  // @see: https://commitlint.js.org/#/reference-rules</span><br><span class="line">  rules: &#123;</span><br><span class="line">    &quot;subject-case&quot;: [0], // subjectå¤§å°å†™ä¸åšæ ¡éªŒ</span><br><span class="line"></span><br><span class="line">    // ç±»å‹æšä¸¾ï¼Œgitæäº¤typeå¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹</span><br><span class="line">    &quot;type-enum&quot;: [</span><br><span class="line">      2,</span><br><span class="line">      &quot;always&quot;,</span><br><span class="line">      [</span><br><span class="line">        &quot;feat&quot;, // æ–°å¢åŠŸèƒ½</span><br><span class="line">        &quot;fix&quot;, // ä¿®å¤ç¼ºé™·</span><br><span class="line">        &quot;docs&quot;, // æ–‡æ¡£å˜æ›´</span><br><span class="line">        &quot;style&quot;, // ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰æ ¼å¼ä¿®æ­£ï¼‰</span><br><span class="line">        &quot;refactor&quot;, // ä»£ç é‡æ„ï¼ˆä¸åŒ…æ‹¬ bug ä¿®å¤ã€åŠŸèƒ½æ–°å¢ï¼‰</span><br><span class="line">        &quot;perf&quot;, // æ€§èƒ½ä¼˜åŒ–</span><br><span class="line">        &quot;test&quot;, // æ·»åŠ ç–æ¼æµ‹è¯•æˆ–å·²æœ‰æµ‹è¯•æ”¹åŠ¨</span><br><span class="line">        &quot;build&quot;, // æ„å»ºæµç¨‹ã€å¤–éƒ¨ä¾èµ–å˜æ›´ï¼ˆå¦‚å‡çº§ npm åŒ…ã€ä¿®æ”¹ webpack é…ç½®ç­‰ï¼‰</span><br><span class="line">        &quot;ci&quot;, // ä¿®æ”¹ CI é…ç½®ã€è„šæœ¬</span><br><span class="line">        &quot;revert&quot;, // å›æ»š commit</span><br><span class="line">        &quot;chore&quot;, // å¯¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“çš„æ›´æ”¹ï¼ˆä¸å½±å“æºæ–‡ä»¶ã€æµ‹è¯•ç”¨ä¾‹ï¼‰</span><br><span class="line">      ],</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  prompt: &#123;</span><br><span class="line">    messages: &#123;</span><br><span class="line">      type: &quot;é€‰æ‹©ä½ è¦æäº¤çš„ç±»å‹ :&quot;,</span><br><span class="line">      scope: &quot;é€‰æ‹©ä¸€ä¸ªæäº¤èŒƒå›´ï¼ˆå¯é€‰ï¼‰:&quot;,</span><br><span class="line">      customScope: &quot;è¯·è¾“å…¥è‡ªå®šä¹‰çš„æäº¤èŒƒå›´ :&quot;,</span><br><span class="line">      subject: &quot;å¡«å†™ç®€çŸ­ç²¾ç‚¼çš„å˜æ›´æè¿° :\n&quot;,</span><br><span class="line">      body: &#x27;å¡«å†™æ›´åŠ è¯¦ç»†çš„å˜æ›´æè¿°ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ &quot;|&quot; æ¢è¡Œ :\n&#x27;,</span><br><span class="line">      breaking: &#x27;åˆ—ä¸¾éå…¼å®¹æ€§é‡å¤§çš„å˜æ›´ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ &quot;|&quot; æ¢è¡Œ :\n&#x27;,</span><br><span class="line">      footerPrefixesSelect: &quot;é€‰æ‹©å…³è”issueå‰ç¼€ï¼ˆå¯é€‰ï¼‰:&quot;,</span><br><span class="line">      customFooterPrefix: &quot;è¾“å…¥è‡ªå®šä¹‰issueå‰ç¼€ :&quot;,</span><br><span class="line">      footer: &quot;åˆ—ä¸¾å…³è”issue (å¯é€‰) ä¾‹å¦‚: #31, #I3244 :\n&quot;,</span><br><span class="line">      generatingByAI: &quot;æ­£åœ¨é€šè¿‡ AI ç”Ÿæˆä½ çš„æäº¤ç®€çŸ­æè¿°...&quot;,</span><br><span class="line">      generatedSelectByAI: &quot;é€‰æ‹©ä¸€ä¸ª AI ç”Ÿæˆçš„ç®€çŸ­æè¿°:&quot;,</span><br><span class="line">      confirmCommit: &quot;æ˜¯å¦æäº¤æˆ–ä¿®æ”¹commit ?&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    // prettier-ignore</span><br><span class="line">    types: [</span><br><span class="line">&#123; value: &quot;feat&quot;,     name: &quot;ç‰¹æ€§:     âœ¨  æ–°å¢åŠŸèƒ½&quot;, emoji: &quot;:sparkles:&quot; &#125;,</span><br><span class="line">&#123; value: &quot;fix&quot;,      name: &quot;ä¿®å¤:     ğŸ›  ä¿®å¤ç¼ºé™·&quot;, emoji: &quot;:bug:&quot; &#125;,</span><br><span class="line">&#123; value: &quot;docs&quot;,     name: &quot;æ–‡æ¡£:     ğŸ“  æ–‡æ¡£å˜æ›´&quot;, emoji: &quot;:memo:&quot; &#125;,</span><br><span class="line">&#123; value: &quot;style&quot;,    name: &quot;æ ¼å¼:     ğŸ’„  ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰æ ¼å¼ä¿®æ­£ï¼‰&quot;, emoji: &quot;:lipstick:&quot; &#125;,</span><br><span class="line">&#123; value: &quot;refactor&quot;, name: &quot;é‡æ„:     â™»ï¸  ä»£ç é‡æ„ï¼ˆä¸åŒ…æ‹¬ bug ä¿®å¤ã€åŠŸèƒ½æ–°å¢ï¼‰&quot;, emoji: &quot;:recycle:&quot; &#125;,</span><br><span class="line">&#123; value: &quot;perf&quot;,     name: &quot;æ€§èƒ½:     âš¡ï¸  æ€§èƒ½ä¼˜åŒ–&quot;, emoji: &quot;:zap:&quot; &#125;,</span><br><span class="line">&#123; value: &quot;test&quot;,     name: &quot;æµ‹è¯•:     âœ…  æ·»åŠ ç–æ¼æµ‹è¯•æˆ–å·²æœ‰æµ‹è¯•æ”¹åŠ¨&quot;, emoji: &quot;:white_check_mark:&quot;&#125;,</span><br><span class="line">&#123; value: &quot;build&quot;,    name: &quot;æ„å»º:     ğŸ“¦ï¸  æ„å»ºæµç¨‹ã€å¤–éƒ¨ä¾èµ–å˜æ›´ï¼ˆå¦‚å‡çº§ npm åŒ…ã€ä¿®æ”¹ vite é…ç½®ç­‰ï¼‰&quot;, emoji: &quot;:package:&quot;&#125;,</span><br><span class="line">&#123; value: &quot;ci&quot;,       name: &quot;é›†æˆ:     ğŸ¡  ä¿®æ”¹ CI é…ç½®ã€è„šæœ¬&quot;,  emoji: &quot;:ferris_wheel:&quot;&#125;,</span><br><span class="line">&#123; value: &quot;revert&quot;,   name: &quot;å›é€€:     âªï¸  å›æ»š commit&quot;,emoji: &quot;:rewind:&quot;&#125;,</span><br><span class="line">&#123; value: &quot;chore&quot;,    name: &quot;å…¶ä»–:     ğŸ”¨  å¯¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“çš„æ›´æ”¹ï¼ˆä¸å½±å“æºæ–‡ä»¶ã€æµ‹è¯•ç”¨ä¾‹ï¼‰&quot;, emoji: &quot;:hammer:&quot;&#125;,</span><br><span class="line">],</span><br><span class="line">    useEmoji: true,</span><br><span class="line">    emojiAlign: &quot;center&quot;,</span><br><span class="line">    useAI: false,</span><br><span class="line">    aiNumber: 1,</span><br><span class="line">    themeColorCode: &quot;&quot;,</span><br><span class="line">    scopes: [],</span><br><span class="line">    allowCustomScopes: true,</span><br><span class="line">    allowEmptyScopes: true,</span><br><span class="line">    customScopesAlign: &quot;bottom&quot;,</span><br><span class="line">    customScopesAlias: &quot;custom&quot;,</span><br><span class="line">    emptyScopesAlias: &quot;empty&quot;,</span><br><span class="line">    upperCaseSubject: false,</span><br><span class="line">    markBreakingChangeMode: false,</span><br><span class="line">    allowBreakingChanges: [&quot;feat&quot;, &quot;fix&quot;],</span><br><span class="line">    breaklineNumber: 100,</span><br><span class="line">    breaklineChar: &quot;|&quot;,</span><br><span class="line">    skipQuestions: [],</span><br><span class="line">    issuePrefixes: [</span><br><span class="line">      &#123; value: &quot;closed&quot;, name: &quot;closed:   ISSUES has been processed&quot; &#125;,</span><br><span class="line">    ],</span><br><span class="line">    customIssuePrefixAlign: &quot;top&quot;,</span><br><span class="line">    emptyIssuePrefixAlias: &quot;skip&quot;,</span><br><span class="line">    customIssuePrefixAlias: &quot;custom&quot;,</span><br><span class="line">    allowCustomIssuePrefix: true,</span><br><span class="line">    allowEmptyIssuePrefix: true,</span><br><span class="line">    confirmColorize: true,</span><br><span class="line">    maxHeaderLength: Infinity,</span><br><span class="line">    maxSubjectLength: Infinity,</span><br><span class="line">    minSubjectLength: 0,</span><br><span class="line">    scopeOverrides: undefined,</span><br><span class="line">    defaultBody: &quot;&quot;,</span><br><span class="line">    defaultIssues: &quot;&quot;,</span><br><span class="line">    defaultScope: &quot;&quot;,</span><br><span class="line">    defaultSubject: &quot;&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="husky-é…ç½®æäº¤æ¶ˆæ¯é’©å­"><a href="#husky-é…ç½®æäº¤æ¶ˆæ¯é’©å­" class="headerlink" title="husky é…ç½®æäº¤æ¶ˆæ¯é’©å­"></a>husky é…ç½®æäº¤æ¶ˆæ¯é’©å­</h2><h3 id="ç”Ÿæˆå‘½ä»¤"><a href="#ç”Ÿæˆå‘½ä»¤" class="headerlink" title="ç”Ÿæˆå‘½ä»¤"></a>ç”Ÿæˆå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/commit-msg <span class="string">&quot;npx --no -- commitlint --edit <span class="variable">$1</span>&quot;</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå†…å®¹åœ¨<code>.husky\commit-msg</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env sh</span><br><span class="line">. &quot;$(dirname -- &quot;$0&quot;)/_/husky.sh&quot;</span><br><span class="line"></span><br><span class="line">npx --no -- commitlint --edit</span><br></pre></td></tr></table></figure><h2 id="Commitizen-amp-cz-git-é…ç½®"><a href="#Commitizen-amp-cz-git-é…ç½®" class="headerlink" title="Commitizen &amp; cz-git é…ç½®"></a>Commitizen &amp; cz-git é…ç½®</h2><p>Commitizen &amp; cz-git é…ç½®åœ¨å‘½ä»¤è¡Œæäº¤ git ç”Ÿæˆ message</p><h3 id="Commitizen-amp-cz-git-å®‰è£…"><a href="#Commitizen-amp-cz-git-å®‰è£…" class="headerlink" title="Commitizen &amp; cz-git å®‰è£…"></a>Commitizen &amp; cz-git å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D commitizen cz-git</span><br></pre></td></tr></table></figure><h3 id="cz-git-é…ç½®"><a href="#cz-git-é…ç½®" class="headerlink" title="cz-git é…ç½®"></a>cz-git é…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;commitizen&quot;</span>: &#123;</span><br><span class="line">     <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;node_modules/cz-git&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="npm-æŒ‡ä»¤"><a href="#npm-æŒ‡ä»¤" class="headerlink" title="npm æŒ‡ä»¤"></a>npm æŒ‡ä»¤</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;commit&quot;</span>: <span class="string">&quot;git-cz&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
          <category> husky </category>
          
      </categories>
      
      
        <tags>
            
            <tag> husky </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eslint+Prettier+Stylelintä½¿ç”¨</title>
      <link href="/2024/02/09/Eslint-Prettier-Stylelint%E4%BD%BF%E7%94%A8/"/>
      <url>/2024/02/09/Eslint-Prettier-Stylelint%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="eslintrc-cjs"><a href="#eslintrc-cjs" class="headerlink" title=".eslintrc.cjs"></a>.eslintrc.cjs</h3><p><a href=".eslintrc.cjs">.eslintrc.cjs æ–‡ä»¶ä¸‹è½½</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-env node */</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;@rushstack/eslint-patch/modern-module-resolution&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&quot;plugin:vue/vue3-essential&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@vue/eslint-config-typescript&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@vue/eslint-config-prettier/skip-formatting&quot;</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="string">&quot;latest&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;vue/multi-word-component-names&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;vue/comment-directive&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="eslintignore"><a href="#eslintignore" class="headerlink" title=".eslintignore"></a>.eslintignore</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">dist</span><br><span class="line">node_modules</span><br><span class="line">public</span><br><span class="line">.husky</span><br><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">*.sh</span><br><span class="line">*.md</span><br><span class="line"></span><br><span class="line">src/assets</span><br><span class="line"></span><br><span class="line">.eslintrc.cjs</span><br><span class="line">.prettierrc.cjs</span><br><span class="line">.stylelintrc.cjs</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="npm-è„šæœ¬å‘½ä»¤"><a href="#npm-è„šæœ¬å‘½ä»¤" class="headerlink" title="npm è„šæœ¬å‘½ä»¤"></a>npm è„šæœ¬å‘½ä»¤</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;lint:eslint&quot;</span>: <span class="string">&quot;eslint \&quot;src/**/*.&#123;vue,ts,js&#125;\&quot; \&quot;index.html\&quot; --fix&quot;</span>,</span><br></pre></td></tr></table></figure><h1 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h1><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="prettierrc-cjs"><a href="#prettierrc-cjs" class="headerlink" title=".prettierrc.cjs"></a>.prettierrc.cjs</h3><p><a href=".prettierrc.cjs">.prettierrc.cjs æ–‡ä»¶ä¸‹è½½</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // (x)=&gt;&#123;&#125;,å•ä¸ªå‚æ•°ç®­å¤´å‡½æ•°æ˜¯å¦æ˜¾ç¤ºå°æ‹¬å·ã€‚(always:å§‹ç»ˆæ˜¾ç¤º;avoid:çœç•¥æ‹¬å·ã€‚é»˜è®¤:always)</span><br><span class="line">  arrowParens: &quot;always&quot;,</span><br><span class="line">  // å¼€å§‹æ ‡ç­¾çš„å³å°–æ‹¬å·æ˜¯å¦è·Ÿéšåœ¨æœ€åä¸€è¡Œå±æ€§æœ«å°¾ï¼Œé»˜è®¤false</span><br><span class="line">  bracketSameLine: false,</span><br><span class="line">  // å¯¹è±¡å­—é¢é‡çš„æ‹¬å·ä¹‹é—´æ‰“å°ç©ºæ ¼ (true - Example: &#123; foo: bar &#125; ; false - Example: &#123;foo:bar&#125;)</span><br><span class="line">  bracketSpacing: true,</span><br><span class="line">  // æ˜¯å¦æ ¼å¼åŒ–ä¸€äº›æ–‡ä»¶ä¸­è¢«åµŒå…¥çš„ä»£ç ç‰‡æ®µçš„é£æ ¼(auto|off;é»˜è®¤auto)</span><br><span class="line">  embeddedLanguageFormatting: &quot;auto&quot;,</span><br><span class="line">  // æŒ‡å®š HTML æ–‡ä»¶çš„ç©ºæ ¼æ•æ„Ÿåº¦ (css|strict|ignore;é»˜è®¤css)</span><br><span class="line">  htmlWhitespaceSensitivity: &quot;css&quot;,</span><br><span class="line">  // å½“æ–‡ä»¶å·²ç»è¢« Prettier æ ¼å¼åŒ–ä¹‹åï¼Œæ˜¯å¦ä¼šåœ¨æ–‡ä»¶é¡¶éƒ¨æ’å…¥ä¸€ä¸ªç‰¹æ®Šçš„ @format æ ‡è®°ï¼Œé»˜è®¤false</span><br><span class="line">  insertPragma: false,</span><br><span class="line">  // åœ¨ JSX ä¸­ä½¿ç”¨å•å¼•å·æ›¿ä»£åŒå¼•å·ï¼Œé»˜è®¤false</span><br><span class="line">  jsxSingleQuote: false,</span><br><span class="line">  // æ¯è¡Œæœ€å¤šå­—ç¬¦æ•°é‡ï¼Œè¶…å‡ºæ¢è¡Œ(é»˜è®¤80)</span><br><span class="line">  printWidth: 120,</span><br><span class="line">  // è¶…å‡ºæ‰“å°å®½åº¦ (always | never | preserve )</span><br><span class="line">  proseWrap: &quot;preserve&quot;,</span><br><span class="line">  // å¯¹è±¡å±æ€§æ˜¯å¦ä½¿ç”¨å¼•å·(as-needed | consistent | preserve;é»˜è®¤as-needed:å¯¹è±¡çš„å±æ€§éœ€è¦åŠ å¼•å·æ‰æ·»åŠ ;)</span><br><span class="line">  quoteProps: &quot;as-needed&quot;,</span><br><span class="line">  // æ˜¯å¦åªæ ¼å¼åŒ–åœ¨æ–‡ä»¶é¡¶éƒ¨åŒ…å«ç‰¹å®šæ³¨é‡Š(@prettier| @format)çš„æ–‡ä»¶ï¼Œé»˜è®¤false</span><br><span class="line">  requirePragma: false,</span><br><span class="line">  // ç»“å°¾æ·»åŠ åˆ†å·</span><br><span class="line">  semi: true,</span><br><span class="line">  // ä½¿ç”¨å•å¼•å· (true:å•å¼•å·;false:åŒå¼•å·)</span><br><span class="line">  singleQuote: false,</span><br><span class="line">  // ç¼©è¿›ç©ºæ ¼æ•°ï¼Œé»˜è®¤2ä¸ªç©ºæ ¼</span><br><span class="line">  tabWidth: 2,</span><br><span class="line">  // å…ƒç´ æœ«å°¾æ˜¯å¦åŠ é€—å·ï¼Œé»˜è®¤es5: ES5ä¸­çš„ objects, arrays ç­‰ä¼šæ·»åŠ é€—å·ï¼ŒTypeScript ä¸­çš„ type åä¸åŠ é€—å·</span><br><span class="line">  trailingComma: &quot;es5&quot;,</span><br><span class="line">  // æŒ‡å®šç¼©è¿›æ–¹å¼ï¼Œç©ºæ ¼æˆ–tabï¼Œé»˜è®¤falseï¼Œå³ä½¿ç”¨ç©ºæ ¼</span><br><span class="line">  useTabs: false,</span><br><span class="line">  // vue æ–‡ä»¶ä¸­æ˜¯å¦ç¼©è¿› &lt;style&gt; å’Œ &lt;script&gt; æ ‡ç­¾ï¼Œé»˜è®¤ false</span><br><span class="line">  vueIndentScriptAndStyle: false,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="prettierignore"><a href="#prettierignore" class="headerlink" title=".prettierignore"></a>.prettierignore</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dist</span><br><span class="line">node_modules</span><br><span class="line">public</span><br><span class="line">.husky</span><br><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">*.sh</span><br><span class="line">*.md</span><br><span class="line"></span><br><span class="line">src/assets</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="npm-æ ¼å¼åŒ–å‘½ä»¤"><a href="#npm-æ ¼å¼åŒ–å‘½ä»¤" class="headerlink" title="npm æ ¼å¼åŒ–å‘½ä»¤"></a>npm æ ¼å¼åŒ–å‘½ä»¤</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;lint:prettier&quot;</span>: <span class="string">&quot;prettier --write \&quot;**/*.&#123;js,ts,json,css,less,scss,vue,html,md&#125;\&quot;&quot;</span>,</span><br></pre></td></tr></table></figure><h1 id="stylelint"><a href="#stylelint" class="headerlink" title="stylelint"></a>stylelint</h1><h2 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install -D stylelint stylelint-config-standard stylelint-config-recommended-scss stylelint-config-recommended-vue postcss postcss-html postcss-scss stylelint-config-recess-order stylelint-config-html</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶-1"><a href="#é…ç½®æ–‡ä»¶-1" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="stylelintrc-cjs"><a href="#stylelintrc-cjs" class="headerlink" title=".stylelintrc.cjs"></a>.stylelintrc.cjs</h3><p><a href=".stylelintrc.cjs">.stylelintrc.cjs æ–‡ä»¶ä¸‹è½½</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // ç»§æ‰¿æ¨èè§„èŒƒé…ç½®</span><br><span class="line">  extends: [</span><br><span class="line">    &quot;stylelint-config-standard&quot;,</span><br><span class="line">    &quot;stylelint-config-recommended-scss&quot;,</span><br><span class="line">    &quot;stylelint-config-recommended-vue/scss&quot;,</span><br><span class="line">    &quot;stylelint-config-html/vue&quot;,</span><br><span class="line">    &quot;stylelint-config-recess-order&quot;,</span><br><span class="line">  ],</span><br><span class="line">  // æŒ‡å®šä¸åŒæ–‡ä»¶å¯¹åº”çš„è§£æå™¨</span><br><span class="line">  overrides: [</span><br><span class="line">    &#123;</span><br><span class="line">      files: [&quot;**/*.&#123;vue,html&#125;&quot;],</span><br><span class="line">      customSyntax: &quot;postcss-html&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      files: [&quot;**/*.&#123;css,scss&#125;&quot;],</span><br><span class="line">      customSyntax: &quot;postcss-scss&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  // è‡ªå®šä¹‰è§„åˆ™</span><br><span class="line">  rules: &#123;</span><br><span class="line">    // å…è®¸ global ã€export ã€v-deepç­‰ä¼ªç±»</span><br><span class="line">    &quot;selector-pseudo-class-no-unknown&quot;: [</span><br><span class="line">      true,</span><br><span class="line">      &#123;</span><br><span class="line">        ignorePseudoClasses: [&quot;global&quot;, &quot;export&quot;, &quot;v-deep&quot;, &quot;deep&quot;],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    &quot;no-empty-source&quot;: null,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="stylelintignore"><a href="#stylelintignore" class="headerlink" title=".stylelintignore"></a>.stylelintignore</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dist</span><br><span class="line">node_modules</span><br><span class="line">public</span><br><span class="line">.husky</span><br><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">*.sh</span><br><span class="line">*.md</span><br><span class="line"></span><br><span class="line">src/assets</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="npm-æ ¼å¼åŒ–å‘½ä»¤-1"><a href="#npm-æ ¼å¼åŒ–å‘½ä»¤-1" class="headerlink" title="npm æ ¼å¼åŒ–å‘½ä»¤"></a>npm æ ¼å¼åŒ–å‘½ä»¤</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;lint:stylelint&quot;</span>: <span class="string">&quot;stylelint  \&quot;**/*.&#123;css,scss,vue,html&#125;\&quot; --fix&quot;</span>,</span><br></pre></td></tr></table></figure><h1 id="EditorConfig-ç¼–è¾‘å™¨"><a href="#EditorConfig-ç¼–è¾‘å™¨" class="headerlink" title="EditorConfig ç¼–è¾‘å™¨"></a>EditorConfig ç¼–è¾‘å™¨</h1><p>EditorConfig ä¸»è¦ç”¨äºç»Ÿä¸€ä¸åŒ IDE ç¼–è¾‘å™¨çš„ç¼–ç é£æ ¼ã€‚</p><h2 id="é…ç½®æ–‡ä»¶-2"><a href="#é…ç½®æ–‡ä»¶-2" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p><a href=".editorconfig">.editorconfig æ–‡ä»¶ä¸‹è½½</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># http://editorconfig.org</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨</span><br><span class="line">[*]</span><br><span class="line">charset = utf-8 # è®¾ç½®æ–‡ä»¶å­—ç¬¦é›†ä¸º utf-8</span><br><span class="line">end_of_line = lf # æ§åˆ¶æ¢è¡Œç±»å‹(lf | cr | crlf)</span><br><span class="line">indent_style = tab # ç¼©è¿›é£æ ¼ï¼ˆtab | spaceï¼‰</span><br><span class="line">insert_final_newline = true # å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ</span><br><span class="line"></span><br><span class="line"># è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™</span><br><span class="line">[*.md]</span><br><span class="line">max_line_length = off # å…³é—­æœ€å¤§è¡Œé•¿åº¦é™åˆ¶</span><br><span class="line">trim_trailing_whitespace = false # å…³é—­æœ«å°¾ç©ºæ ¼ä¿®å‰ª</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><p><a href="https://blog.csdn.net/u013737132/article/details/130190788">ã€vue3-element-adminã€‘ESLint+Prettier+Stylelint+EditorConfig çº¦æŸå’Œç»Ÿä¸€å‰ç«¯ä»£ç è§„èŒƒ</a></p>]]></content>
      
      
      <categories>
          
          <category> code_lint </category>
          
      </categories>
      
      
        <tags>
            
            <tag> eslint </tag>
            
            <tag> prettier </tag>
            
            <tag> stylelint </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaä¸­excelæ“ä½œ</title>
      <link href="/2024/02/05/java%E4%B8%ADexcel%E6%93%8D%E4%BD%9C/"/>
      <url>/2024/02/05/java%E4%B8%ADexcel%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="EasyExcel"><a href="#EasyExcel" class="headerlink" title="EasyExcel"></a>EasyExcel</h1><blockquote><p>å‚è€ƒæ–‡æ¡£</p></blockquote><ul><li><a href="https://easyexcel.opensource.alibaba.com/docs/current/">å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://zhuanlan.zhihu.com/p/457848706">çŸ¥ä¹ä½¿ç”¨æ–‡æ¡£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> excel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElementPlusè¸©å‘è®°å½•</title>
      <link href="/2024/01/29/ElementPlus%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/01/29/ElementPlus%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="form"><a href="#form" class="headerlink" title="form"></a>form</h2><h3 id="ä½¿ç”¨-resetFields-ä¸èƒ½å°†æ‰€æœ‰å­—æ®µé‡ç½®"><a href="#ä½¿ç”¨-resetFields-ä¸èƒ½å°†æ‰€æœ‰å­—æ®µé‡ç½®" class="headerlink" title="ä½¿ç”¨ resetFields() ä¸èƒ½å°†æ‰€æœ‰å­—æ®µé‡ç½®"></a>ä½¿ç”¨ resetFields() ä¸èƒ½å°†æ‰€æœ‰å­—æ®µé‡ç½®</h3><ol><li>é¦–å…ˆè¿™ä¸ªæ–¹æ³•æ˜¯ä¼šå°†æ‰€æœ‰è¡¨å•ä¸‹å‡ºç°è¿‡çš„ formItem é‡ç½®ï¼ˆå°±ç®—æ˜¯ v-if æ¶ˆå¤±çš„ä¹Ÿä¼šé‡ç½®ï¼‰</li><li>è¿™ä¸ªé‡ç½®çš„åˆå§‹å€¼æ˜¯ä¸ªå‘ç‚¹ï¼Œä»–æ˜¯åœ¨ä½ æ¸²æŸ“ formItem æ—¶å€™ç»‘å®šçš„å€¼ä¸ºåˆå§‹å€¼ï¼Œä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µ<ol><li>å½“ä½  v-if true,ä¿®æ”¹äº†ä»–çš„å€¼ï¼ŒåŒå‘ç»‘å®šï¼Œè¿™ä¸ªè¡¨å•çš„å€¼ä¹Ÿå°±æ”¹å˜äº†</li><li>å½“ä½  true-&gt;false-&gt;true è¿™æ—¶å€™ä¼šé‡æ–°æ¸²æŸ“ formItem åˆå§‹å€¼ä¹Ÿä¼šé‡ç½®æˆæ­¤åˆ»çš„å€¼ï¼ˆè¿™ä¸ªå€¼æ˜¯ä½ æ›´æ–°åçš„å€¼ï¼‰</li></ol></li></ol><h3 id="åœ¨formè¡¨å•ä¸­åªæœ‰ä¸€ä¸ªitem-æ—¶ï¼ŒæŒ‰enter-ä¼šè‡ªåŠ¨submit"><a href="#åœ¨formè¡¨å•ä¸­åªæœ‰ä¸€ä¸ªitem-æ—¶ï¼ŒæŒ‰enter-ä¼šè‡ªåŠ¨submit" class="headerlink" title="åœ¨formè¡¨å•ä¸­åªæœ‰ä¸€ä¸ªitem æ—¶ï¼ŒæŒ‰enter ä¼šè‡ªåŠ¨submit"></a>åœ¨formè¡¨å•ä¸­åªæœ‰ä¸€ä¸ªitem æ—¶ï¼ŒæŒ‰enter ä¼šè‡ªåŠ¨submit</h3><ol><li>åœ¨formé‡Œé¢æ·»åŠ ä¸¤ä¸ªitem,éšè—ä¸€ä¸ª</li><li>åœ¨formä¸Šæ·»åŠ é˜»æ­¢åŸæ¥çš„submit äº‹ä»¶<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@submit.prevent</span><br></pre></td></tr></table></figure></li></ol><h2 id="é…ç½®å…¨å±€è¯­è¨€"><a href="#é…ç½®å…¨å±€è¯­è¨€" class="headerlink" title="é…ç½®å…¨å±€è¯­è¨€"></a>é…ç½®å…¨å±€è¯­è¨€</h2><ol><li>å¯¼å…¥è¯­è¨€çš„æ—¶å€™ï¼Œå®˜ç½‘é‚£ä¸ªä¼šæœ‰ ts æŠ¥é”™ï¼Œæ–°ç‰ˆåœ¨ es/locale åŒ…ä¸‹é¢<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; zhCn, en &#125; <span class="keyword">from</span> <span class="string">&quot;element-plus/es/locale/index&quot;</span>;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> elementPlus </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3 </tag>
            
            <tag> webUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker-compose ä½¿ç”¨</title>
      <link href="/2024/01/28/docker-compose-%E4%BD%BF%E7%94%A8/"/>
      <url>/2024/01/28/docker-compose-%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><ol><li>yum å®‰è£…ï¼ˆç‰ˆæœ¬å¾ˆä½ï¼‰<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-compose</span><br></pre></td></tr></table></figure></li><li>git ä¸‹è½½æ–‡ä»¶<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line">sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/latest/download/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"><span class="comment"># æˆæƒ</span></span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"><span class="comment"># æ·»åŠ  /usr/local/bin çš„å…¨å±€ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="comment"># éªŒè¯</span></span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure></li></ol><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>é…ç½®æ–‡ä»¶åŒ…å«ä¸‰éƒ¨åˆ†</p><ul><li>version</li><li>services</li><li>network</li></ul><h3 id="nginx-ç¤ºä¾‹é…ç½®"><a href="#nginx-ç¤ºä¾‹é…ç½®" class="headerlink" title="nginx ç¤ºä¾‹é…ç½®"></a>nginx ç¤ºä¾‹é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;3&quot;</span></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    image: nginx</span><br><span class="line">    container_name: blog_nginx</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - 8080:80</span><br><span class="line">    volumes:</span><br><span class="line">      - ./nginx/nginx.conf:/etc/nginx/nginx.conf</span><br><span class="line">      - ./wang_zhe343621:/usr/share/nginx/html</span><br><span class="line">      - ./nginx/logs:/var/<span class="built_in">log</span>/nginx</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><ol><li>å¯åŠ¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŒ‡å®šé…ç½®æ–‡ä»¶å¼€å¯ï¼Œ-dåå°å¯åŠ¨</span></span><br><span class="line">docker-compose -f [conf.file] up -d</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> docker-compose </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å†…æ ¸å‡çº§</title>
      <link href="/2024/01/27/Linux-%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/"/>
      <url>/2024/01/27/Linux-%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>è¿™ä¸€çŸ¥è¯†æ¥æºäºå¼€å¯ bbr3 <br><br><a href="http://elrepo.org/tiki/HomePage">å†…æ ¸æ›´æ–°å®˜ç½‘</a></p><p><a href="https://youtu.be/rliQg3Z4i_8?si=c8BPAt7l54KQ6xop">bbr3 å¼€å¯è§†é¢‘åœ°å€</a></p><p><a href="https://drive.google.com/file/d/1kt_AKvCi5X3uNlH3LVOXkGbXitz4KOOM/view">bbr3 åŸæ–‡æ¡£åœ°å€</a></p><h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><ol><li>æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶åŒ…ï¼š<br>yum update</li><li>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼š<br>[root@amber ~]# cat /etc/redhat-release</li><li>å®‰è£… elrepo å¹¶å‡çº§å†…æ ¸ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">   rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br><span class="line">   yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm</span><br><span class="line">   å®‰è£… kernel-ml å†…æ ¸</span><br><span class="line">   yum --enablerepo=elrepo-kernel install kernel-m</span><br><span class="line">   ````</span><br><span class="line"></span><br><span class="line">4. æ›´æ–° grub æ–‡ä»¶å¹¶é‡å¯ç³»ç»Ÿï¼š</span><br><span class="line">   ```bash</span><br><span class="line">   <span class="comment">#æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬</span></span><br><span class="line">   uname -r</span><br><span class="line">   <span class="comment">#æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰å¯å¼•å¯¼çš„å†…æ ¸ç‰ˆæœ¬ï¼š</span></span><br><span class="line">   egrep ^menuentry /etc/grub2.cfg | cut -f 2 -d \<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   #è®¾ç½®æˆ‘ä»¬ linux ç³»ç»Ÿå¯åŠ¨åï¼ŒåŠ è½½å¹¶å¼•å¯¼ç¬¬ä¸€ä¸ªå†…æ ¸</span></span><br><span class="line"><span class="string">   grub2-set-default 0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   reboot</span></span><br></pre></td></tr></table></figure></li></ol><ol start="5"><li>é‡æ–°æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure></li></ol><h1 id="å¼€å¯-bbr"><a href="#å¼€å¯-bbr" class="headerlink" title="å¼€å¯ bbr"></a>å¼€å¯ bbr</h1><ol><li>è®¾ç½®ç³»ç»Ÿé…ç½®æ–‡ä»¶<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysctl.conf</span><br><span class="line"><span class="comment"># åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹å†…å®¹</span></span><br><span class="line">net.core.default_qdisc = fq</span><br><span class="line">net.ipv4.tcp_congestion_control = bb</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li>åŠ è½½ç³»ç»Ÿå‚æ•°<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></li><li>ç¡®å®š bbr å·²ç»æˆåŠŸå¼€å¯ï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br><span class="line">sysctl net.ipv4.tcp_available_congestion_control = reno cubic bbr</span><br><span class="line">[root@amber ~]<span class="comment"># lsmod | grep bbr</span></span><br><span class="line">tcp_bbr                20480  1</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯çŸ¥è¯†åˆ—è¡¨</title>
      <link href="/2023/10/10/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%88%97%E8%A1%A8/"/>
      <url>/2023/10/10/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰ç«¯çŸ¥è¯†åˆ—è¡¨"><a href="#å‰ç«¯çŸ¥è¯†åˆ—è¡¨" class="headerlink" title="å‰ç«¯çŸ¥è¯†åˆ—è¡¨"></a>å‰ç«¯çŸ¥è¯†åˆ—è¡¨</h1><p><a href="https://blog.csdn.net/u014061630/article/details/81359144?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169686741416800197027685%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169686741416800197027685&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-81359144-null-null.142%5Ev95%5Econtrol&amp;utm_term=markdown%E8%AF%AD%E6%B3%95&amp;spm=1018.2226.3001.4187">https://blog.csdn.net/u014061630/article/details/81359144?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169686741416800197027685%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169686741416800197027685&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-81359144-null-null.142^v95^control&amp;utm_term=markdown%E8%AF%AD%E6%B3%95&amp;spm=1018.2226.3001.4187</a></p><h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><table><thead><tr><th align="center">åç§°</th><th align="center">ä»‹ç»</th></tr></thead><tbody><tr><td align="center">nvm</td><td align="center">ç®¡ç†å¤šä¸ªç‰ˆæœ¬çš„node</td></tr><tr><td align="center">animate.css</td><td align="center">cssåŠ¨ç”»åº“</td></tr><tr><td align="center">greensock</td><td align="center">js åŠ¨ç”»åº“</td></tr></tbody></table><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2>]]></content>
      
      
      <categories>
          
          <category> 1 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 1 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeåŠ è½½webè§†å›¾ï¼Œå›¾ç‰‡æŠ¥é”™</title>
      <link href="/2023/04/04/vscode%E5%8A%A0%E8%BD%BDweb%E8%A7%86%E5%9B%BE%EF%BC%8C%E5%9B%BE%E7%89%87%E6%8A%A5%E9%94%99/"/>
      <url>/2023/04/04/vscode%E5%8A%A0%E8%BD%BDweb%E8%A7%86%E5%9B%BE%EF%BC%8C%E5%9B%BE%E7%89%87%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<h1 id="vscodeåŠ è½½web-è§†å›¾ï¼ŒæŠ¥é”™-â€œError-Could-not-register-serviceworkers-InvalidstateError-Failed-to-registâ€œ"><a href="#vscodeåŠ è½½web-è§†å›¾ï¼ŒæŠ¥é”™-â€œError-Could-not-register-serviceworkers-InvalidstateError-Failed-to-registâ€œ" class="headerlink" title="vscodeåŠ è½½web è§†å›¾ï¼ŒæŠ¥é”™:â€œError: Could not register serviceworkers: InvalidstateError: Failed to registâ€œ"></a>vscodeåŠ è½½web è§†å›¾ï¼ŒæŠ¥é”™:â€œError: Could not register serviceworkers: InvalidstateError: Failed to registâ€œ</h1><h2 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h2><ol><li>å…³é—­vscode</li><li><code>win+r</code> æ‰“å¼€cmd<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code --no-sandbox</span><br></pre></td></tr></table></figure>ä¼šé‡å¯vscodeï¼Œå°±å¯ä»¥æŸ¥çœ‹äº†</li></ol><h2 id="å¼•ç”¨æ–‡çŒ®"><a href="#å¼•ç”¨æ–‡çŒ®" class="headerlink" title="å¼•ç”¨æ–‡çŒ®"></a>å¼•ç”¨æ–‡çŒ®</h2><p>[1] <a href="https://blog.csdn.net/m0_58724783/article/details/127879777?spm=1001.2101.3001.6650.5&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-5-127879777-blog-125405459.235%5Ev27%5Epc_relevant_multi_platform_whitelistv3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-5-127879777-blog-125405459.235%5Ev27%5Epc_relevant_multi_platform_whitelistv3&utm_relevant_index=5">vscodeåŠ è½½web è§†å›¾</a></p>]]></content>
      
      
      <categories>
          
          <category> problem </category>
          
          <category> software </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> problem </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7 å®‰è£…runlike(dockeræŸ¥çœ‹å®¹å™¨å¯åŠ¨å‘½ä»¤)</title>
      <link href="/2023/04/02/centos7-%E5%AE%89%E8%A3%85runlike-docker%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2023/04/02/centos7-%E5%AE%89%E8%A3%85runlike-docker%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="centos7-å®‰è£…runlike"><a href="#centos7-å®‰è£…runlike" class="headerlink" title="centos7 å®‰è£…runlike"></a>centos7 å®‰è£…runlike</h1><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>centos7 | python2.7 | Docker version 20.10.17</p><h2 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h2><ol><li>yum -y install epel-release</li><li>yum install -y python-pip</li><li>pip install runlike è¿™ä¸€æ­¥æŠ¥é”™:<br><img src="/.io//pip-install-upgrade%E5%91%BD%E4%BB%A4.png" alt="pip install runlikeæŠ¥é”™"><br>æ ¹æ®æç¤ºè¿è¡Œå‘½ä»¤ pip install â€“upgrade pip  æ— æ•ˆï¼Œè¿˜æ˜¯æŠ¥é”™</li></ol><p><strong><font size="4">è§£å†³æ–¹æ³•</font></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://bootstrap.pypa.io/pip/2.7/get-pip.py</span><br><span class="line">python get-pip.py</span><br><span class="line">pip install runlike</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨æ–‡çŒ®"><a href="#å¼•ç”¨æ–‡çŒ®" class="headerlink" title="å¼•ç”¨æ–‡çŒ®"></a>å¼•ç”¨æ–‡çŒ®</h2><p>[1] <a href="https://www.dianjilingqu.com/177835.html">Centos7-å®‰è£…runlikeç”¨æ¥æŸ¥çœ‹dockerå®¹å™¨å¯åŠ¨æ—¶å€™çš„å‚æ•°</a></p>]]></content>
      
      
      <categories>
          
          <category> install </category>
          
          <category> centos </category>
          
          <category> install </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos7 </tag>
            
            <tag> runlike </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker å¸¸ç”¨å‘½ä»¤ä½¿ç”¨è®°å½•</title>
      <link href="/2023/04/02/docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2023/04/02/docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="docker-å¸¸ç”¨å‘½ä»¤"><a href="#docker-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="docker å¸¸ç”¨å‘½ä»¤"></a>docker å¸¸ç”¨å‘½ä»¤</h1><ol><li><p>ä¿®æ”¹dockerå¯åŠ¨é…ç½®å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹nginxè·Ÿéšç³»ç»Ÿé‡å¯</span></span><br><span class="line">docker update --restart=always nginx</span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line">docker container update --restart=always nginx</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹å®¹å™¨åç§°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rename [old(id or name)] [new name]</span><br></pre></td></tr></table></figure></li><li><p>è¿›å…¥å®¹å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it [docker id or name] /bin/bash</span><br></pre></td></tr></table></figure></li><li><p>é€€å‡ºå®¹å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span> <span class="comment"># exit é€€å‡º å¦‚æœå®¹å™¨æ²¡æœ‰-d åå°è¿è¡Œï¼Œä¼šç›´æ¥å…³é—­å®¹å™¨</span></span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">ctrl + p + q <span class="comment"># é€€å‡ºå®¹å™¨(-d ä¸å½±å“)</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å®¹å™¨è¯¦æƒ…(ä¸èƒ½é‡ç°å¯åŠ¨å‘½ä»¤)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [docker id or name]</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å®¹å™¨çš„å¯åŠ¨å‘½ä»¤(runlike)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… python -&gt; pip -&gt; runlike</span></span><br><span class="line">runlike -p [docker id or name]</span><br><span class="line">...å¾…å†™</span><br></pre></td></tr></table></figure><p><img src="/.io//docker-runlike-example.png" alt="runlike-example-result"></p></li><li><p>ä¿®æ”¹å®¹å™¨æ˜ å°„ç«¯å£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#temp </span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h2 id="å¼•ç”¨æ–‡çŒ®"><a href="#å¼•ç”¨æ–‡çŒ®" class="headerlink" title="å¼•ç”¨æ–‡çŒ®"></a>å¼•ç”¨æ–‡çŒ®</h2><p>[1] <a href="https://liucy.blog.csdn.net/article/details/124511738?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-124511738-blog-122253638.235%5Ev27%5Epc_relevant_default_base1&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-124511738-blog-122253638.235%5Ev27%5Epc_relevant_default_base1&utm_relevant_index=1">dockerä¿®æ”¹å®¹å™¨çš„ç«¯å£ã€å®¹å™¨åã€æ˜ å°„åœ°å€</a></p>]]></content>
      
      
      <categories>
          
          <category> command </category>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker-nginxå®‰è£…</title>
      <link href="/2023/04/02/docker-nginx%E5%AE%89%E8%A3%85/"/>
      <url>/2023/04/02/docker-nginx%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="dockerä¸‹å®‰è£…nginx"><a href="#dockerä¸‹å®‰è£…nginx" class="headerlink" title="dockerä¸‹å®‰è£…nginx"></a>dockerä¸‹å®‰è£…nginx</h1><ol><li>ä¸‹è½½é•œåƒ<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure></li><li>åˆ›å»ºæŒ‚è½½å·<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/nginx/conf</span><br><span class="line">mkdir -p /data/nginx/<span class="built_in">log</span></span><br><span class="line">mkdir -p /data/nginx/html</span><br></pre></td></tr></table></figure></li><li>å¯åŠ¨ä¸´æ—¶nginxå®¹å™¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx-temp -p 80:80 -d nginx</span><br><span class="line"><span class="comment">#åœæ­¢åˆ é™¤</span></span><br><span class="line">docker stop nginx-temp</span><br><span class="line">docker rm nginx-temp</span><br><span class="line"><span class="comment">#æŸ¥çœ‹</span></span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure></li><li>å¤åˆ¶dockerå®¹å™¨ä¸­çš„é…ç½®æ–‡ä»¶åˆ°å®¿ä¸»æœºä¸Š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker cp nginx-temp:/etc/nginx/nginx.conf /data/nginx/conf/nginx.conf</span><br><span class="line">docker cp nginx-temp:/etc/nginx/conf.d /data/nginx/conf/conf.d</span><br><span class="line">docker cp nginx-temp:/usr/share/nginx/html /data/nginx/</span><br></pre></td></tr></table></figure></li><li>å¯åŠ¨nginxå®¹å™¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p 80:80 \</span><br><span class="line">--name nginx \</span><br><span class="line">--restart=always \</span><br><span class="line">-v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">-v /data/nginx/conf/conf.d:/etc/nginx/conf.d \</span><br><span class="line">-v /data/nginx/<span class="built_in">log</span>:/var/<span class="built_in">log</span>/nginx \</span><br><span class="line">-v /data/nginx/html:/usr/share/nginx/html \</span><br><span class="line">-d nginx:latest</span><br></pre></td></tr></table></figure></li><li>ä¿®æ”¹å®¹å™¨å¯åŠ¨é…ç½®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®nginxè‡ªåŠ¨å¯åŠ¨</span></span><br><span class="line">docker update --restart=always nginx </span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹nginx å¯åŠ¨å‘½ä»¤<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runlike -p nginx</span><br></pre></td></tr></table></figure></li></ol><h1 id="å¼•ç”¨æ–‡çŒ®"><a href="#å¼•ç”¨æ–‡çŒ®" class="headerlink" title="å¼•ç”¨æ–‡çŒ®"></a>å¼•ç”¨æ–‡çŒ®</h1><p>[1] <a href="https://www.dianjilingqu.com/177835.html">Centos7-å®‰è£…runlikeç”¨æ¥æŸ¥çœ‹dockerå®¹å™¨å¯åŠ¨æ—¶å€™çš„å‚æ•°</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> nginx </tag>
            
            <tag> install </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åç«¯è¿”å‚Longå‹-JSæ˜¾ç¤ºç²¾åº¦ä¸å‡†ç¡®</title>
      <link href="/2023/01/16/%E5%90%8E%E7%AB%AF%E8%BF%94%E5%8F%82Long%E5%9E%8B-JS%E6%98%BE%E7%A4%BA%E7%B2%BE%E5%BA%A6%E4%B8%8D%E5%87%86%E7%A1%AE/"/>
      <url>/2023/01/16/%E5%90%8E%E7%AB%AF%E8%BF%94%E5%8F%82Long%E5%9E%8B-JS%E6%98%BE%E7%A4%BA%E7%B2%BE%E5%BA%A6%E4%B8%8D%E5%87%86%E7%A1%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="åç«¯è¿”å‚Longå‹-JSæ˜¾ç¤ºç²¾åº¦ä¸å‡†ç¡®"><a href="#åç«¯è¿”å‚Longå‹-JSæ˜¾ç¤ºç²¾åº¦ä¸å‡†ç¡®" class="headerlink" title="åç«¯è¿”å‚Longå‹-JSæ˜¾ç¤ºç²¾åº¦ä¸å‡†ç¡®"></a>åç«¯è¿”å‚Longå‹-JSæ˜¾ç¤ºç²¾åº¦ä¸å‡†ç¡®</h1><blockquote><p>æ–¹æ³•ä¸€</p></blockquote><p>åç«¯è¿”å‚è½¬ä¸ºStringç±»å‹</p><blockquote></blockquote>]]></content>
      
      
      <categories>
          
          <category> question </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> ç²¾åº¦ä¸å‡†ç¡® </tag>
            
            <tag> Long </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>itextpdfç”Ÿæˆpdfä½¿ç”¨è®°å½•</title>
      <link href="/2022/12/16/itextpdf%E7%94%9F%E6%88%90pdf%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/12/16/itextpdf%E7%94%9F%E6%88%90pdf%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>BaseFont</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BaseFont baseChineseFont = BaseFont.createFont(<span class="string">&quot;STSong-Light&quot;</span>, <span class="string">&quot;UniGB-UCS2-H&quot;</span>, BaseFont.EMBEDDED);</span><br><span class="line"><span class="comment">//pdfå­—ä½“åç§°ï¼Œå­—ä½“ç¼–ç ï¼Œpdfæ–‡æœ¬æ˜¯å¦å†…åµŒ</span></span><br></pre></td></tr></table></figure><blockquote><p>Font</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">titlefont = <span class="keyword">new</span> Font(bfChinese, <span class="number">16</span>, Font.BOLD);</span><br><span class="line">headfont = <span class="keyword">new</span> Font(bfChinese, <span class="number">14</span>, Font.BOLD);</span><br><span class="line">keyfont = <span class="keyword">new</span> Font(bfChinese, <span class="number">10</span>, Font.BOLD);</span><br><span class="line">textfont = <span class="keyword">new</span> Font(bfChinese, <span class="number">10</span>, Font.NORMAL);</span><br><span class="line">Font font = <span class="keyword">new</span> Font(baseChineseFont, <span class="number">12</span>, Font.NORMAL,BaseColor.BLACK); <span class="comment">//basefont,font-size,font-style,font-color</span></span><br></pre></td></tr></table></figure><blockquote><p>Paragraph æ®µè½</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ®µè½</span></span><br><span class="line">Paragraph paragraph = <span class="keyword">new</span> Paragraph(â€œâ€, titlefont); <span class="comment">//content,font</span></span><br><span class="line">paragraph.setAlignment(<span class="number">1</span>); <span class="comment">//è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼å±…ä¸­ 0é å·¦ 1ï¼Œå±…ä¸­ 2ï¼Œé å³ï¼›æ­£å¸¸é å·¦</span></span><br><span class="line">paragraph.setIndentationLeft(<span class="number">12</span>); <span class="comment">//è®¾ç½®å·¦ç¼©è¿›</span></span><br><span class="line">paragraph.setIndentationRight(<span class="number">12</span>); <span class="comment">//è®¾ç½®å³ç¼©è¿›</span></span><br><span class="line">paragraph.setFirstLineIndent(<span class="number">24</span>); <span class="comment">//è®¾ç½®é¦–è¡Œç¼©è¿› 24 æ˜¯2ä¸ªä¸­æ–‡å­—ç¬¦</span></span><br><span class="line">paragraph.setLeading(<span class="number">20f</span>); <span class="comment">//è¡Œé—´è·</span></span><br><span class="line">paragraph.setSpacingBefore(<span class="number">5f</span>); <span class="comment">//è®¾ç½®æ®µè½ä¸Šç©ºç™½</span></span><br><span class="line">paragraph.setSpacingAfter(<span class="number">10f</span>); <span class="comment">//è®¾ç½®æ®µè½ä¸‹ç©ºç™½</span></span><br><span class="line"><span class="comment">// ç›´çº¿</span></span><br><span class="line">Paragraph p1 = <span class="keyword">new</span> Paragraph();</span><br><span class="line">p1.add(<span class="keyword">new</span> Chunk(<span class="keyword">new</span> LineSeparator()));</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line"><span class="comment">// ç‚¹çº¿</span></span><br><span class="line">Paragraph p2 = <span class="keyword">new</span> Paragraph();</span><br><span class="line">p2.add(<span class="keyword">new</span> Chunk(<span class="keyword">new</span> DottedLineSeparator()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¶…é“¾æ¥</span></span><br><span class="line">Anchor anchor = <span class="keyword">new</span> Anchor(<span class="string">&quot;baidu&quot;</span>);</span><br><span class="line">anchor.setReference(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä½</span></span><br><span class="line">Anchor gotoP = <span class="keyword">new</span> Anchor(<span class="string">&quot;goto&quot;</span>);</span><br><span class="line">gotoP.setReference(<span class="string">&quot;#top&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> itextpdf </category>
          
      </categories>
      
      
        <tags>
            
            <tag> itextpdf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>viteä½¿ç”¨è®°å½•</title>
      <link href="/2022/12/06/vite%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/12/06/vite%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤šç¯å¢ƒé…ç½®æ–‡ä»¶"><a href="#å¤šç¯å¢ƒé…ç½®æ–‡ä»¶" class="headerlink" title="å¤šç¯å¢ƒé…ç½®æ–‡ä»¶"></a>å¤šç¯å¢ƒé…ç½®æ–‡ä»¶</h1><p><a href="https://www.jianshu.com/p/1e85185796d8">å‚è€ƒé“¾æ¥</a></p>]]></content>
      
      
      <categories>
          
          <category> vite </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vite </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>swagger ä½¿ç”¨è®°å½•</title>
      <link href="/2022/12/05/swagger-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/12/05/swagger-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>@ApiImplicitParam</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤šæ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line"><span class="meta">@ApiImplicitParam(name = &quot;files&quot;, value = &quot;å¤šä¸ªæ–‡ä»¶&quot; , paramType = &quot;formData&quot;,allowMultiple=true,required = true,dataType = &quot;file&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šå‚æ•°</span></span><br><span class="line"><span class="meta">@ApiImplicitParam(name = &quot;bucketName&quot;, value = &quot;å­˜å‚¨æ¡¶&quot;,dataTypeClass = String.class, required = true ,allowMultiple=true)</span></span><br></pre></td></tr></table></figure><ul><li>paramType<ul><li>formData è¡¨å•</li><li>query </li><li>body è¯·æ±‚ä½“</li></ul></li><li>dataType æ•°æ®ç±»å‹ æ–‡ä»¶ æ˜¯file</li><li>allowMultiple å¤šé€‰ï¼Œæ˜¯List,ArrayList</li></ul><p><img src="/.io//image-20221205140144242.png" alt="image-20221205140144242"></p>]]></content>
      
      
      <categories>
          
          <category> swagger </category>
          
      </categories>
      
      
        <tags>
            
            <tag> swagger </tag>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker å‘½ä»¤åŠè½¯ä»¶å®‰è£…</title>
      <link href="/2022/12/02/docker-%E5%91%BD%E4%BB%A4%E5%8F%8A%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
      <url>/2022/12/02/docker-%E5%91%BD%E4%BB%A4%E5%8F%8A%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="docker-å‘½ä»¤"><a href="#docker-å‘½ä»¤" class="headerlink" title="docker å‘½ä»¤"></a>docker å‘½ä»¤</h1><blockquote><p>æŸ¥çœ‹dockerå®¹å™¨æ—¥å¿—</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f å®¹å™¨id</span><br><span class="line">docker logs -f minio</span><br></pre></td></tr></table></figure><h1 id="docker-å®‰è£…è½¯ä»¶"><a href="#docker-å®‰è£…è½¯ä»¶" class="headerlink" title="docker å®‰è£…è½¯ä»¶"></a>docker å®‰è£…è½¯ä»¶</h1><h2 id="minio"><a href="#minio" class="headerlink" title="minio"></a>minio</h2><blockquote><p>å‘½ä»¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart always -p 9000:9000 -p 9001:9001 --name minio -v /data/minio/data:/data -v /data/minio/config:/root/.minio -e <span class="string">&quot;MINIO_ROOT_USER=admin&quot;</span> -e <span class="string">&quot;MINIO_ROOT_PASSWORD=minioadmin&quot;</span> minio/minio server /data --console-address <span class="string">&quot;:9000&quot;</span> --address <span class="string">&quot;:9001&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>ak&amp;sk</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admin</span><br><span class="line">minioadmin</span><br></pre></td></tr></table></figure><blockquote><p>æˆåŠŸæ—¥å¿—</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@racknerd-9c2e31 minio]<span class="comment"># docker logs -f minio</span></span><br><span class="line">WARNING: MINIO_ACCESS_KEY and MINIO_SECRET_KEY are deprecated.</span><br><span class="line">         Please use MINIO_ROOT_USER and MINIO_ROOT_PASSWORD</span><br><span class="line">Formatting 1st pool, 1 <span class="built_in">set</span>(s), 1 drives per <span class="built_in">set</span>.</span><br><span class="line">WARNING: Host <span class="built_in">local</span> has more than 0 drives of <span class="built_in">set</span>. A host failure will result <span class="keyword">in</span> data becoming unavailable.</span><br><span class="line">Warning: Default parity <span class="built_in">set</span> to 0. This can lead to data loss.</span><br><span class="line">MinIO Object Storage Server</span><br><span class="line">Copyright: 2015-2022 MinIO, Inc.</span><br><span class="line">License: GNU AGPLv3 &lt;https://www.gnu.org/licenses/agpl-3.0.html&gt;</span><br><span class="line">Version: RELEASE.2022-11-29T23-40-49Z (go1.19.3 linux/amd64)</span><br><span class="line"></span><br><span class="line">Status:         1 Online, 0 Offline. </span><br><span class="line">API: http://172.17.0.6:9001  http://127.0.0.1:9001 </span><br><span class="line">Console: http://172.17.0.6:9000 http://127.0.0.1:9000 </span><br><span class="line"></span><br><span class="line">Documentation: https://min.io/docs/minio/linux/index.html</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle å‘½ä»¤è®°å½•</title>
      <link href="/2022/11/24/Oracle-%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/11/24/Oracle-%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dba_users;</span><br></pre></td></tr></table></figure><blockquote><p>åˆ›å»ºç”¨æˆ·</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER blog IDENTIFIED BY blog;</span><br></pre></td></tr></table></figure><blockquote><p>ç”¨æˆ·èµ‹æƒ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRANT CREATE SESSION TO blog;</span><br><span class="line">GRANT connect,resource TO blog;</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹ç”¨æˆ·æƒé™</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM user_sys_privs;//æŸ¥çœ‹å½“å‰ç”¨æˆ·æ‰€æœ‰æƒé™</span><br><span class="line"></span><br><span class="line">SELECT * FROM user_tab_privs;//æŸ¥çœ‹æ‰€ç”¨ç”¨æˆ·å¯¹è¡¨çš„æƒé™</span><br></pre></td></tr></table></figure><blockquote><p>ä¿®æ”¹ç”¨æˆ·å¯†ç </p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER system IDENTIFIED BY system;</span><br><span class="line"></span><br><span class="line">ALTER USER sys IDENTIFIED BY sys;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PL/SQL 15æ³¨å†Œç </title>
      <link href="/2022/08/17/PL-SQL-15%E6%B3%A8%E5%86%8C%E7%A0%81/"/>
      <url>/2022/08/17/PL-SQL-15%E6%B3%A8%E5%86%8C%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="2022-8-17-éªŒè¯å¯ç”¨"><a href="#2022-8-17-éªŒè¯å¯ç”¨" class="headerlink" title="2022/8/17 éªŒè¯å¯ç”¨"></a>2022/8/17 éªŒè¯å¯ç”¨</h1><p>è¿›å…¥å¸®åŠ© -&gt; æ³¨å†Œï¼Œ<br>è¾“å…¥ï¼š<br>äº§å“ç¼–å·ï¼škfsvzt6zh2exaxzxgjk44rv5kp2yp68vgk<br>åºåˆ—å·ï¼š186220<br>å£ä»¤ï¼šxs374ca</p><p>ç›´æ¥è·å¾—9999-12-31ï¼Œç¾æ»‹æ»‹</p><p><a href="https://blog.csdn.net/weixin_42966484/article/details/112767709?spm=1001.2014.3001.5506">åŸæ–‡é“¾æ¥</a></p>]]></content>
      
      
      <categories>
          
          <category> PLSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PLSQL </tag>
            
            <tag> æ³¨å†Œç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PLSQLå®‰è£…å¹¶ä¸”è¿æ¥è¿œç¨‹åº“</title>
      <link href="/2022/08/16/PLSQL%E5%AE%89%E8%A3%85%E5%B9%B6%E4%B8%94%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E5%BA%93/"/>
      <url>/2022/08/16/PLSQL%E5%AE%89%E8%A3%85%E5%B9%B6%E4%B8%94%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="PLSQL-DEVELOPER15-ä¸‹è½½å®‰è£…"><a href="#PLSQL-DEVELOPER15-ä¸‹è½½å®‰è£…" class="headerlink" title="PLSQL_DEVELOPER15 ä¸‹è½½å®‰è£…"></a>PLSQL_DEVELOPER15 ä¸‹è½½å®‰è£…</h1><p><a href="https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html">ä¸‹è½½é“¾æ¥</a></p><p><img src="/.io//image-20220816124115252.png" alt="image-20220816124115252"></p><p>éœ€è¦å®‰è£…å›¾ä¸­çš„ç¯å¢ƒ</p><h1 id="è½¯ä»¶é…ç½®"><a href="#è½¯ä»¶é…ç½®" class="headerlink" title="è½¯ä»¶é…ç½®"></a>è½¯ä»¶é…ç½®</h1><p><img src="/.io//image-20220816124920979.png" alt="image-20220816124920979"></p>]]></content>
      
      
      <categories>
          
          <category> PLSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PLSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>StreamApi</title>
      <link href="/2022/05/27/StreamApi/"/>
      <url>/2022/05/27/StreamApi/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="map-flatMap"><a href="#map-flatMap" class="headerlink" title="map/flatMap"></a>map/flatMap</h2><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>mapï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠinputStreamçš„æ¯ä¸ªå…ƒç´ æ˜ å°„æˆoutputStreamçš„å¦å¤–ä¸€ä¸ªå…ƒç´ </p><p>mapç”Ÿæˆçš„æ˜¯ä¸ª1:1æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; nums = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">List&lt;Integer&gt; squareNums = nums.stream().map(n -&gt; n * n).collect(Collectors.toList());</span><br></pre></td></tr></table></figure><h3 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h3><p>flatMapæŠŠinputStreamä¸­çš„å±‚çº§ç»“æ„ æ‰å¹³åŒ–ï¼Œå°±æ˜¯å°†æœ€åº•å±‚å…ƒç´ æŠ½å‡ºæ¥æ”¾åˆ°ä¸€èµ·ï¼Œæœ€ç»ˆoutputçš„æ–°Streamé‡Œé¢å·²ç»æ²¡æœ‰Listäº†ï¼Œéƒ½æ˜¯ç›´æ¥çš„æ•°å­—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;List&lt;Integer&gt;&gt; inputStream = Stream.of(</span><br><span class="line"> Arrays.asList(<span class="number">1</span>),</span><br><span class="line"> Arrays.asList(<span class="number">2</span>, <span class="number">3</span>),</span><br><span class="line"> Arrays.asList(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"> );</span><br><span class="line">Stream&lt;Integer&gt; outputStream = inputStream.</span><br><span class="line">flatMap((childList) -&gt; childList.stream());</span><br></pre></td></tr></table></figure><h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><p>filterå¯¹åŸå§‹Streamè¿›è¡ŒæŸé¡¹æµ‹è¯•ï¼Œé€šè¿‡æµ‹è¯•çš„å…ƒç´ è¢«ç•™ä¸‹æ¥ç”Ÿæˆä¸€ä¸ªæ–°Streamã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç•™ä¸‹å¶æ•°</span></span><br><span class="line">Integer[] sixNums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;;</span><br><span class="line">Integer[] evens =</span><br><span class="line">Stream.of(sixNums).filter(n -&gt; n%<span class="number">2</span> == <span class="number">0</span>).toArray(Integer[]::<span class="keyword">new</span>);</span><br></pre></td></tr></table></figure><h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h2><p>å¾ªç¯ï¼Œterminalæ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">umsAdmins.stream().filter(n -&gt; n.getStatus() == <span class="number">1</span>).forEach(n -&gt; System.out.println(n.getUsername()));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>forEachæ˜¯terminalæ“ä½œã€‚å› æ­¤ï¼Œå®ƒæ‰§è¡Œåï¼ŒStream çš„å…ƒç´ å°±è¢«â€œæ¶ˆè´¹â€æ‰äº†ï¼Œä½ æ— æ³•å¯¹ä¸€ä¸ªStreamè¿›è¡Œä¸¤æ¬¡terminalè¿ç®—ã€‚ä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stream.forEach(element -&gt; doOneThing(element));</span><br><span class="line">stream.forEach(element -&gt; doAnotherThing(element));</span><br></pre></td></tr></table></figure><h2 id="findFirst"><a href="#findFirst" class="headerlink" title="findFirst"></a>findFirst</h2><p>è¿™æ˜¯ä¸€ä¸ªtermimalå…¼short-circuitingæ“ä½œï¼Œå®ƒæ€»æ˜¯è¿”å›Streamçš„ç¬¬ä¸€ä¸ªå…ƒç´ æˆ–è€…ç©ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;UmsAdmin&gt; stream = umsAdmins.stream();</span><br><span class="line">Optional&lt;UmsAdmin&gt; first = stream.findFirst();</span><br><span class="line">UmsAdmin umsAdmin3 = first.get();</span><br><span class="line">System.out.println(umsAdmin3);</span><br><span class="line">String integer = Optional.ofNullable(umsAdmin3.getPassword()).map(n -&gt; n).orElse(String.valueOf(-<span class="number">1</span>));</span><br><span class="line">System.out.println(integer);</span><br></pre></td></tr></table></figure><p>findFirst è¿”å›çš„æ˜¯Optional</p><h1 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h1><p><a href="https://blog.csdn.net/justloveyou_/article/details/79562574">StreamApi çš„èƒŒæ™¯åŠä½¿ç”¨</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 8 </category>
          
          <category> StreamApi </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java8æ–°ç‰¹æ€§ </tag>
            
            <tag> StreamApi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSwagger</title>
      <link href="/2022/05/18/SpringBoot%E6%95%B4%E5%90%88Swagger/"/>
      <url>/2022/05/18/SpringBoot%E6%95%B4%E5%90%88Swagger/</url>
      
        <content type="html"><![CDATA[<h1 id="swagger-ç®€ä»‹"><a href="#swagger-ç®€ä»‹" class="headerlink" title="swagger ç®€ä»‹"></a>swagger ç®€ä»‹</h1><h1 id="æ•´åˆswagger"><a href="#æ•´åˆswagger" class="headerlink" title="æ•´åˆswagger"></a>æ•´åˆswagger</h1><h2 id="mavenä¾èµ–"><a href="#mavenä¾èµ–" class="headerlink" title="mavenä¾èµ–"></a>mavenä¾èµ–</h2><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h2 id="å±•ç¤º"><a href="#å±•ç¤º" class="headerlink" title="å±•ç¤º"></a>å±•ç¤º</h2><h1 id="2-6-x-ä»¥ä¸Š-æ•´åˆå‡ºç°çš„é—®é¢˜"><a href="#2-6-x-ä»¥ä¸Š-æ•´åˆå‡ºç°çš„é—®é¢˜" class="headerlink" title="2.6.x ä»¥ä¸Š æ•´åˆå‡ºç°çš„é—®é¢˜"></a>2.6.x ä»¥ä¸Š æ•´åˆå‡ºç°çš„é—®é¢˜</h1><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®:"></a>å‚è€ƒæ–‡çŒ®:</h1><p><a href="https://blog.csdn.net/qq_40205116/article/details/105200104?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165284373416781483781926%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=165284373416781483781926&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-105200104-null-null.142%5Ev10%5Econtrol,157%5Ev4%5Econtrol&utm_term=swagger2&spm=1018.2226.3001.4187">swagger2æ•´åˆ</a></p><p><a href="https://blog.csdn.net/weixin_43740223/article/details/108491386?spm=1001.2014.3001.5506">swagger3æ•´åˆ</a></p><p><a href="https://xingyun.blog.csdn.net/article/details/123753888?spm=1001.2014.3001.5506">springboot2.6x å…¼å®¹é—®é¢˜</a></p>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
          <category> Swagger </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Swagger </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springbooté¡¹ç›®æ”¹ç«¯å£,ä¸€ç›´æ˜¾ç¤ºç«¯å£è¢«å ç”¨</title>
      <link href="/2022/05/13/springboot%E9%A1%B9%E7%9B%AE%E6%94%B9%E7%AB%AF%E5%8F%A3-%E4%B8%80%E7%9B%B4%E6%98%BE%E7%A4%BA%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8/"/>
      <url>/2022/05/13/springboot%E9%A1%B9%E7%9B%AE%E6%94%B9%E7%AB%AF%E5%8F%A3-%E4%B8%80%E7%9B%B4%E6%98%BE%E7%A4%BA%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>springbooté¡¹ç›®ï¼Œæ— è®ºä¿®æ”¹ä»€ä¹ˆç«¯å£ï¼Œéƒ½æ˜¾ç¤ºç«¯å£è¢«å ç”¨ã€‚</p><blockquote><p>é”™è¯¯åŸå› </p></blockquote><p>javaç¨‹åºå‡æ­»ï¼Œéœ€è¦åœ¨æ§åˆ¶å°éœ€æ¸…ç†è¿›ç¨‹</p><p> <img src="/.io//image-20220513103147763.png" alt="image-20220513103147763"></p><p><strong><a href="https://blog.csdn.net/YangHongcxy/article/details/120783257?spm=1001.2014.3001.5506">åŸæ–‡é“¾æ¥</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> é‡‡å‘ </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> é”™è¯¯ </tag>
            
            <tag> error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mybatis-plusä½¿ç”¨è®°å½•</title>
      <link href="/2022/04/15/mybatis-plus%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/04/15/mybatis-plus%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="springboot-æ•´åˆmybatis-plus"><a href="#springboot-æ•´åˆmybatis-plus" class="headerlink" title="springboot æ•´åˆmybatis-plus"></a>springboot æ•´åˆmybatis-plus</h1><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>application.yamlé…ç½®</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">auto-mapping-behavior:</span> <span class="string">full</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/**/*Mapper.xml</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="comment"># é€»è¾‘åˆ é™¤é…ç½®</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment"># åˆ é™¤å‰</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">1</span></span><br><span class="line">      <span class="comment"># åˆ é™¤å</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> mybatis-plus </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis-plus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurityä½¿ç”¨è®°å½•</title>
      <link href="/2022/04/14/SpringSecurity%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/04/14/SpringSecurity%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆä½“éªŒ"><a href="#åˆä½“éªŒ" class="headerlink" title="åˆä½“éªŒ"></a>åˆä½“éªŒ</h1><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>spring-securityä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªç™»é™†é¡µé¢</strong></p><ul><li>ç”¨æˆ· user</li><li>å¯†ç  ä¼šåœ¨æ§åˆ¶å°æ‰“å°</li></ul><h1 id="springSecurityåŸºæœ¬åŸç†"><a href="#springSecurityåŸºæœ¬åŸç†" class="headerlink" title="springSecurityåŸºæœ¬åŸç†"></a>springSecurityåŸºæœ¬åŸç†</h1><p><strong>spring-securityæœ¬è´¨ä¸Šæ˜¯è¿‡æ»¤å™¨é“¾</strong></p><p><strong>FilterSecurityInterceptor æ˜¯ä¸€ä¸ªæ–¹æ³•çº§çš„è¿‡æ»¤å™¨</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿‡æ»¤å™¨ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.invoke(<span class="keyword">new</span> FilterInvocation(request, response, chain));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿‡æ»¤å™¨çš„æ‰§è¡Œä½“</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(FilterInvocation filterInvocation)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isApplied(filterInvocation) &amp;&amp; <span class="keyword">this</span>.observeOncePerRequest) &#123;</span><br><span class="line">        filterInvocation.getChain().doFilter(filterInvocation.getRequest(), filterInvocation.getResponse());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (filterInvocation.getRequest() != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span>.observeOncePerRequest) &#123;</span><br><span class="line">            filterInvocation.getRequest().setAttribute(<span class="string">&quot;__spring_security_filterSecurityInterceptor_filterApplied&quot;</span>, Boolean.TRUE);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­ä¹‹å‰è¿‡æ»¤å™¨çš„ç»“æœ</span></span><br><span class="line">        InterceptorStatusToken token = <span class="keyword">super</span>.beforeInvocation(filterInvocation);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æ‰§è¡Œå½“å‰è¿‡æ»¤å™¨</span></span><br><span class="line">            filterInvocation.getChain().doFilter(filterInvocation.getRequest(), filterInvocation.getResponse());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.finallyInvocation(token);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//æ‰§è¡Œä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="keyword">super</span>.afterInvocation(token, (Object)<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ExceptionTranslationFilterå¼‚å¸¸è½¬æ¢è¿‡æ»¤å™¨</strong></p><p>å¤„ç†æƒé™è®¤è¯è¿‡ç¨‹ç§æŠ›å‡ºçš„å¼‚å¸¸</p><p><strong>UsernamePasswordAuthenticationFilter åˆ¤æ–­ç”¨æˆ·postè¯·æ±‚ç§çš„ç”¨æˆ·åå’Œå¯†ç </strong></p><p><img src="/.io//image-20220414120714351.png" alt="image-20220414120714351"></p><h1 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h1><h2 id="ä¸ä½¿ç”¨springbooté…ç½®security"><a href="#ä¸ä½¿ç”¨springbooté…ç½®security" class="headerlink" title="ä¸ä½¿ç”¨springbooté…ç½®security"></a>ä¸ä½¿ç”¨springbooté…ç½®security</h2><p><strong>DelegatingFilterProxy</strong></p><h2 id="è‡ªå®šä¹‰ç”¨æˆ·åå’Œå¯†ç åŒ¹é…è·å–æƒé™"><a href="#è‡ªå®šä¹‰ç”¨æˆ·åå’Œå¯†ç åŒ¹é…è·å–æƒé™" class="headerlink" title="è‡ªå®šä¹‰ç”¨æˆ·åå’Œå¯†ç åŒ¹é…è·å–æƒé™"></a>è‡ªå®šä¹‰ç”¨æˆ·åå’Œå¯†ç åŒ¹é…è·å–æƒé™</h2><p><strong>è·å–ç”¨æˆ·æ•°æ®</strong></p><ol><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·åå’Œå¯†ç </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">security:</span></span><br><span class="line">    <span class="attr">user:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">admin</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">admin</span></span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡é…ç½®ç±»è®¾ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿ WebSecurityConfigurerAdapter</span></span><br><span class="line"><span class="comment">// è®¾ç½®çš„å¯†ç å¿…é¡»åŠ å¯†ï¼Œä½¿ç”¨passwordEncoderç›¸åŒçš„åŠ å¯†å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        BCryptPasswordEncoder passwordEncoder = <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">        String encode = passwordEncoder.encode(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">        auth.inMemoryAuthentication().withUser(<span class="string">&quot;wangzhe&quot;</span>)</span><br><span class="line">                .password(encode)</span><br><span class="line">                        .roles(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¿…é¡»è®¾ç½®åŠ å¯†å™¨</span></span><br><span class="line">    <span class="comment">//exceptionï¼šid null...</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>é…ç½®ç±»è®¾ç½®çš„å¯†ç å¿…é¡»åŠ å¯†ï¼Œå¿…é¡»è®¾ç½®passwordEncoder</strong></p><ol start="3"><li><p>é€šè¿‡æ•°æ®åº“æŸ¥æ‰¾æ¥è·å–ç”¨æˆ·åå’Œå¯†ç ï¼Œéœ€è¦å®ç°UserDetailService æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyUserDetailService myUserDetailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.userDetailsService(myUserDetailService)</span><br><span class="line">                .passwordEncoder(passwordEncoder());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUserDetailService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        List&lt;GrantedAuthority&gt; authorities = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;roles&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">&quot;xiaomi&quot;</span>, <span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;123&quot;</span>),authorities);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="è‡ªå®šä¹‰ç™»å½•é¡µé¢"><a href="#è‡ªå®šä¹‰ç™»å½•é¡µé¢" class="headerlink" title="è‡ªå®šä¹‰ç™»å½•é¡µé¢"></a>è‡ªå®šä¹‰ç™»å½•é¡µé¢</h2><pre><code>  ç™»å½•é¡µé¢å¿…é¡»ä»¥postè¯·æ±‚ï¼Œè¡¨å•çš„nameå¿…é¡»è®¾ç½®ä¸ºusername,passwordã€‚  å¿…é¡»è®¾ç½®ç™»å½•é¡µé¢æ”¾è¡Œç­–ç•¥  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.formLogin()</span><br><span class="line">                .loginPage(<span class="string">&quot;/login.html&quot;</span>) <span class="comment">// ç™»å½•é¡µé¢</span></span><br><span class="line">                        .loginProcessingUrl(<span class="string">&quot;/user/login&quot;</span>) <span class="comment">//è¡¨å•ç™»å½•æŒ‰é’®è·¯å¾„</span></span><br><span class="line">                                .defaultSuccessUrl(<span class="string">&quot;/test/index&quot;</span>) <span class="comment">//ç™»å½•æˆåŠŸçš„é»˜è®¤è·³è½¬è·¯å¾„</span></span><br><span class="line">                                        .and().authorizeHttpRequests()</span><br><span class="line">                        .antMatchers(<span class="string">&quot;/hello&quot;</span>,<span class="string">&quot;/user/login&quot;</span>,<span class="string">&quot;/login.html&quot;</span>).permitAll() <span class="comment">//æ”¾è¡Œè·¯å¾„,éœ€è¦æ·»åŠ ç™»å½•é¡µé¢åˆ°æ”¾è¡Œè·¯å¾„ä¸­</span></span><br><span class="line">                        .anyRequest().authenticated()</span><br><span class="line">                        .and().csrf().disable();<span class="comment">//å…³é—­csrf é˜²æŠ¤</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre><h2 id="ç”¨æˆ·æˆæƒ"><a href="#ç”¨æˆ·æˆæƒ" class="headerlink" title="ç”¨æˆ·æˆæƒ"></a>ç”¨æˆ·æˆæƒ</h2><pre><code>  &gt; å•æƒé™  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       http.formLogin()</span><br><span class="line">               .loginPage(<span class="string">&quot;/login.html&quot;</span>) <span class="comment">// ç™»å½•é¡µé¢</span></span><br><span class="line">                       .loginProcessingUrl(<span class="string">&quot;/user/login&quot;</span>) <span class="comment">//è¡¨å•ç™»å½•æŒ‰é’®è·¯å¾„</span></span><br><span class="line">                               .defaultSuccessUrl(<span class="string">&quot;/test/index&quot;</span>) <span class="comment">//ç™»å½•æˆåŠŸçš„é»˜è®¤è·³è½¬è·¯å¾„</span></span><br><span class="line">                                       .and().authorizeHttpRequests()</span><br><span class="line">                       .antMatchers(<span class="string">&quot;/hello&quot;</span>,<span class="string">&quot;/user/login&quot;</span>,<span class="string">&quot;/login.html&quot;</span>).permitAll() <span class="comment">//æ”¾è¡Œè·¯å¾„,éœ€è¦æ·»åŠ ç™»å½•é¡µé¢åˆ°æ”¾è¡Œè·¯å¾„ä¸­</span></span><br><span class="line">                       .antMatchers(<span class="string">&quot;/test/authority&quot;</span>).hasAuthority(<span class="string">&quot;admin&quot;</span>) <span class="comment">//æ·»åŠ æƒé™æ ¡éªŒ</span></span><br><span class="line">                       .antMatchers(<span class="string">&quot;/test/authorities&quot;</span>).hasAnyAuthority(<span class="string">&quot;admin,girl&quot;</span>)</span><br><span class="line">                       .anyRequest().authenticated()</span><br><span class="line">                       .and().csrf().disable();<span class="comment">//å…³é—­csrf é˜²æŠ¤</span></span><br><span class="line">   &#125;</span><br><span class="line">      </span><br></pre></td></tr></table></figure></code></pre><p>â€‹      </p><pre><code>  &gt; å¤šæƒé™  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.antMatchers(<span class="string">&quot;/test/authorities&quot;</span>).hasAnyAuthority(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;girl&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre><p>â€‹      </p><pre><code>  **æƒé™ä¸è¶³**  <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Whitelabel Error Page</span><br><span class="line">This application has no explicit mapping for /error, so you are seeing this as a fallback.</span><br><span class="line"></span><br><span class="line">Fri Apr 15 16:07:39 CST 2022</span><br><span class="line">There was an unexpected error (type=Forbidden, status=403).</span><br><span class="line">Forbidden</span><br></pre></td></tr></table></figure></code></pre><p>â€‹      </p><h2 id="ç”¨æˆ·è§’è‰²åˆ†é…"><a href="#ç”¨æˆ·è§’è‰²åˆ†é…" class="headerlink" title="ç”¨æˆ·è§’è‰²åˆ†é…"></a>ç”¨æˆ·è§’è‰²åˆ†é…</h2><pre><code>  &gt; åˆ†é…æƒé™æ˜¯ å­—ç¬¦ä¸²éœ€è¦åœ¨å‰é¢æ‹¼æ¥ `ROLE_`  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å•è§’è‰²åˆ†é…</span></span><br><span class="line">.antMatchers(<span class="string">&quot;/test/authority&quot;</span>).hasRole(<span class="string">&quot;producer&quot;</span>)</span><br><span class="line">.antMatchers(<span class="string">&quot;/test/authorities&quot;</span>).hasAnyRole(<span class="string">&quot;producer&quot;</span>,<span class="string">&quot;consumer&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre><p>â€‹      </p><h2 id="è‡ªå®šä¹‰403-é”™è¯¯é¡µé¢"><a href="#è‡ªå®šä¹‰403-é”™è¯¯é¡µé¢" class="headerlink" title="è‡ªå®šä¹‰403 é”™è¯¯é¡µé¢"></a>è‡ªå®šä¹‰403 é”™è¯¯é¡µé¢</h2><blockquote><p> <strong>securityé…ç½®ç±»ä¸­æ·»åŠ </strong></p></blockquote>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.exceptionHandling().accessDeniedPage(<span class="string">&quot;/unauth.html&quot;</span>);</span><br></pre></td></tr></table></figure><p>â€‹      </p><h2 id="æ³¨è§£ä½¿ç”¨"><a href="#æ³¨è§£ä½¿ç”¨" class="headerlink" title="æ³¨è§£ä½¿ç”¨"></a>æ³¨è§£ä½¿ç”¨</h2><h3 id="Secured"><a href="#Secured" class="headerlink" title="@Secured"></a>@Secured</h3><p>æŒ‡å®šè®¿é—®ç›®æ ‡ æ‰€éœ€çš„ è§’è‰²</p><p>æ³¨è§£å¯ä»¥è¢«ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œcontrolleræˆ–è€…serviceå±‚éƒ½å¯ä»¥</p><p><strong>å¼€å¯æ³¨è§£ä½¿ç”¨</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨å¯åŠ¨ç±»æˆ–è€…æ˜¯é…ç½®ç±»ä¸Šæ·»åŠ  å¯åŠ¨æ³¨è§£</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(securedEnabled = true)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è®¿é—®ç›®æ ‡ä¸Šæ·»åŠ <code>è§’è‰²</code>æ ¡éªŒ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@Secured(&#123;&quot;ROLE_admin&quot;, &quot;ROLE_manager&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; getUserList() &#123;</span><br><span class="line">    <span class="keyword">return</span> userService.getUserList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="PreAuthorize"><a href="#PreAuthorize" class="headerlink" title="@PreAuthorize"></a>@PreAuthorize</h3><p>å¯ä»¥åœ¨è¿›å…¥æ–¹æ³•å‰ è¿›è¡Œæ ¡éªŒ</p><p><strong>å¼€å¯æ³¨è§£æ”¯æŒ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br></pre></td></tr></table></figure><p><strong>åœ¨è®¿é—®ç›®æ ‡ä¸Šæ·»åŠ <code>è§’è‰²</code>or<code>æƒé™</code>æ ¡éªŒ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;hasAnyAuthority(&#x27;admin&#x27;) and hasAnyRole(&#x27;ROLE_manager&#x27;)&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> userService.getById(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="PostAuthorize"><a href="#PostAuthorize" class="headerlink" title="@PostAuthorize"></a>@PostAuthorize</h3><p>åœ¨æ–¹æ³•æ‰§è¡Œåæ ¡éªŒ</p><p><strong>å¼€å¯æ³¨è§£æ”¯æŒ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true )</span></span><br></pre></td></tr></table></figure><p><strong>åœ¨è®¿é—®ç›®æ ‡ä¸Šæ·»åŠ <code>è§’è‰²</code>or<code>æƒé™</code>æ ¡éªŒ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@PostAuthorize(&quot;hasAnyRole(&#x27;ROLE_manager&#x27;) and hasAnyAuthority(&#x27;admin&#x27;)&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> userService.getById(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="PostFilter"><a href="#PostFilter" class="headerlink" title="@PostFilter"></a>@PostFilter</h3><p>å¯¹æ–¹æ³•çš„è¿”å›ç»“æœè¿›è¡Œè¿‡æ»¤</p><p><strong>åœ¨è®¿é—®ç›®æ ‡ä¸Šæ·»åŠ ç»“æœè¿‡æ»¤</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//filterObject æ˜¯è¿”å›Listä¸­çš„å•ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•ï¼Œæˆ–è€…æ˜¯.å±æ€§ </span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@Secured(&#123;&quot;ROLE_admin&quot;, &quot;ROLE_manager&quot;&#125;)</span></span><br><span class="line"><span class="meta">@PostFilter(&quot;filterObject.get(&#x27;username&#x27;) == &#x27;admin&#x27;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; getUserList() &#123;</span><br><span class="line">    <span class="keyword">return</span> userService.getUserList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="PreFilter"><a href="#PreFilter" class="headerlink" title="@PreFilter"></a>@PreFilter</h3><p>å¯¹æ–¹æ³•çš„å…¥å‚è¿›è¡Œæ ¡éªŒ</p><h2 id="ç”¨æˆ·æ³¨é”€"><a href="#ç”¨æˆ·æ³¨é”€" class="headerlink" title="ç”¨æˆ·æ³¨é”€"></a>ç”¨æˆ·æ³¨é”€</h2><ol><li><p>securityé…ç½® <code>ç™»å‡ºè·¯å¾„</code> å’Œ <code>ç™»å‡ºæˆåŠŸé¡µé¢</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http.logout().logoutUrl(<span class="string">&quot;/logout&quot;</span>).logoutSuccessUrl(<span class="string">&quot;/logoutSuccess.html&quot;</span>);</span><br><span class="line">éœ€è¦æ”¾è¡ŒlogoutSuccess.htmlé¡µé¢ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªpermitALL</span><br></pre></td></tr></table></figure></li></ol><h2 id="è‡ªåŠ¨ç™»å½•"><a href="#è‡ªåŠ¨ç™»å½•" class="headerlink" title="è‡ªåŠ¨ç™»å½•"></a>è‡ªåŠ¨ç™»å½•</h2><ol><li><p>åˆ›å»ºtoken-userinfo è¡¨</p><p>å»ºè¡¨è¯­å¥åœ¨<code>org.springframework.security.web.authentication.rememberme.JdbcTokenRepositoryImpl</code>ç±»ä¸­</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> persistent_logins (</span><br><span class="line">username <span class="type">VARCHAR</span> ( <span class="number">64</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">series <span class="type">VARCHAR</span> ( <span class="number">64</span> ) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">token <span class="type">VARCHAR</span> ( <span class="number">64</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">last_used <span class="type">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>)</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æ•°æ®æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é…ç½® PersistentTokenRepository çš„æ•°æ®æº</span></span><br><span class="line"><span class="comment">//åœ¨é…ç½®ç±»ä¸­æ·»åŠ </span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">DataSource dataSource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PersistentTokenRepository <span class="title">persistentTokenRepository</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    JdbcTokenRepositoryImpl jdbcTokenRepository = <span class="keyword">new</span> JdbcTokenRepositoryImpl();</span><br><span class="line">    jdbcTokenRepository.setDataSource(dataSource);</span><br><span class="line">    <span class="keyword">return</span> jdbcTokenRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>configure(HttpSecurity http)</code>ä¸­é…ç½®è‡ªåŠ¨ç™»å½•çš„æ•°æ®åº“ï¼ŒtokenæŒç»­æ—¶é—´ï¼Œuserservice</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http.and().rememberMe().tokenRepository(persistentTokenRepository())<span class="comment">//è®¾ç½®è‡ªåŠ¨ç™»å½•ï¼Œæ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">      .tokenValiditySeconds(<span class="number">60</span>) <span class="comment">//è®¾ç½®tokençš„æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½ç§’</span></span><br><span class="line">      .userDetailsService(userDetailsService())</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ç™»å½•é¡µé¢æ·»åŠ <strong>å¤é€‰æ¡†ï¼šåå¤©å…ç™»å½•</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember-me&quot;</span>&gt;</span> 5åˆ†é’Ÿä¹‹å†…å…ç™»å½•</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç»“æœæŸ¥çœ‹ï¼Œå®¢æˆ·ç«¯çš„cookieï¼Œæ•°æ®åº“ä¸­çš„æ•°æ®</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®åº“ä¿¡æ¯</span><br><span class="line">adminA1m2uLrSTC3CRQ9IRzyIgQ==Ieotk5N33+/5I6MNODR3gQ==2022-05-13 09:44:44</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯cookieä¿¡æ¯</strong></p><p><img src="/.io//image-20220513095136449.png" alt="image-20220513095136449"></p></li></ol><h1 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h1><h2 id="CSRFç®€ä»‹"><a href="#CSRFç®€ä»‹" class="headerlink" title="CSRFç®€ä»‹"></a>CSRFç®€ä»‹</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  CSRF(Cross-site request forgery)è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œä¹Ÿè¢«ç§°ä¸º&quot;One Click Attack&quot;æˆ–è€…Session Ridingï¼Œé€šå¸¸ç¼©å†™ä¸ºCSRFæˆ–è€…</span><br><span class="line">XSRFï¼Œæ˜¯ä¸€ç§å¯¹ç½‘ç«™çš„æ¶æ„åˆ©ç”¨ã€‚å°½ç®¡å¬èµ·æ¥åƒè·¨ç«™è„šæœ¬(XSS)ï¼Œä½†å®ƒä¸XSSéå¸¸ä¸åŒï¼ŒXSSåˆ©ç”¨ç«™ç‚¹å†…çš„ä¿¡ä»»ç”¨æˆ·ï¼Œè€ŒCSRFåˆ™é€šè¿‡ä¼ªè£…æˆå—ä¿¡</span><br><span class="line">ä»»ç”¨æˆ·çš„è¯·æ±‚æ¥åˆ©ç”¨å—ä¿¡ä»»çš„ç½‘ç«™ã€‚ä¸XSSæ”»å‡»ç›¸æ¯”ï¼ŒCSRFæ”»å‡»å¾€å¾€ä¸å¤§æµè¡Œ(å› æ­¤å¯¹å…¶è¿›è¡Œé˜²èŒƒçš„èµ„æºä¹Ÿç›¸å½“ç¨€å°‘)å’Œéš¾ä»¥é˜²èŒƒï¼Œæ‰€ä»¥è¢«è®¤ä¸ºæ¯”</span><br><span class="line">XSSæ›´å…·å±é™©æ€§ã€‚</span><br></pre></td></tr></table></figure><p><strong>SpringSecurity 4ä¹‹å</strong></p><p>é»˜è®¤å¼€å¯CSRFä¿æŠ¤ï¼Œä¼šé’ˆå¯¹POST,PUT,PATCH,DELETEè¿™äº›è¯·æ±‚è¿›è¡Œä¿æŠ¤ã€‚</p><p>å¼€å¯åï¼Œåªèƒ½åœ¨åŒç«™è¿›è¡Œè®¿é—®ï¼Œè·¨ç«™æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…³é—­CSRF</span></span><br><span class="line">http.csrf().disable();<span class="comment">//å…³é—­csrf é˜²æŠ¤</span></span><br></pre></td></tr></table></figure><p><strong>csrfçš„å®ç°åœ¨è¿‡æ»¤å™¨ä¸­</strong></p><p><code>org.springframework.security.web.csrf.CsrfFilter</code>springSecurity ä¸­çš„csrfåŠŸèƒ½æ—¶åœ¨è¿™ä¸ªè¿‡æ»¤å™¨ä¸­</p><h2 id="å¼€å¯csrfæ ¡éªŒ"><a href="#å¼€å¯csrfæ ¡éªŒ" class="headerlink" title="å¼€å¯csrfæ ¡éªŒ"></a>å¼€å¯csrfæ ¡éªŒ</h2><ol><li>åœ¨é…ç½®ç±»ä¸­å¼€å¯CSRFæ ¡éªŒ</li><li>éœ€è¦åœ¨è¯·æ±‚çš„æ—¶å€™ä¼ é€’_csrfçš„token</li></ol><h1 id="å•ç‚¹ç™»å½•"><a href="#å•ç‚¹ç™»å½•" class="headerlink" title="å•ç‚¹ç™»å½•"></a>å•ç‚¹ç™»å½•</h1><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><h2 id="ç™»å½•æˆåŠŸåçš„è¡Œä¸º"><a href="#ç™»å½•æˆåŠŸåçš„è¡Œä¸º" class="headerlink" title="ç™»å½•æˆåŠŸåçš„è¡Œä¸º"></a>ç™»å½•æˆåŠŸåçš„è¡Œä¸º</h2><ol><li>defaultSuccessUrl,successForwardUrl</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.formLogin().defaultSuccessUrl(<span class="string">&quot;/index&quot;</span>,<span class="keyword">true</span>).successForwardUrl(<span class="string">&quot;/index&quot;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>http.successHandler(AuthenticationSuccessHandler successHandler)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">http.successHandler(AuthenticationSuccessHandler successHandler);</span><br><span class="line"><span class="comment">//é…ç½®</span></span><br><span class="line">.successHandler(<span class="keyword">new</span> authenticationSuccessHandler());</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">authenticationSuccessHandler</span> <span class="keyword">implements</span> <span class="title">AuthenticationSuccessHandler</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAuthenticationSuccess</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Authentication authentication)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">            Object principal = authentication.getPrincipal();</span><br><span class="line">            PrintWriter writer = response.getWriter();</span><br><span class="line">            writer.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">            writer.flush();</span><br><span class="line">            writer.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//Lamdaå†™æ³•</span></span><br><span class="line">.successHandler((req, resp, authentication) -&gt; &#123;</span><br><span class="line">    Object principal = authentication.getPrincipal();</span><br><span class="line">    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">    PrintWriter out = resp.getWriter();</span><br><span class="line">    out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;)</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h2 id="ç™»å½•å¤±è´¥åçš„è¡Œä¸º"><a href="#ç™»å½•å¤±è´¥åçš„è¡Œä¸º" class="headerlink" title="ç™»å½•å¤±è´¥åçš„è¡Œä¸º"></a>ç™»å½•å¤±è´¥åçš„è¡Œä¸º</h2><ol><li>```java<br>.failureUrl(â€œ/failureâ€) //è·³è½¬ç™»å½•å¤±è´¥é¡µé¢<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```java</span><br><span class="line">   //ç™»å½•å¤±è´¥ï¼Œå¤„ç†æ–¹æ³•ï¼Œå‰åç«¯åˆ†ç¦»æ—¶ä½¿ç”¨</span><br><span class="line">   .failureHandler((req, resp, e) -&gt; &#123;</span><br><span class="line">       resp.setContentType(&quot;application/json;charset=utf-8&quot;);</span><br><span class="line">       PrintWriter out = resp.getWriter();</span><br><span class="line">       out.write(e.getMessage());</span><br><span class="line">       out.flush();</span><br><span class="line">       out.close();</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure></li></ol><h2 id="æœªè®¤è¯æ—¶è®¿é—®å…¶ä»–é¡µé¢æ˜¯çš„è¡Œä¸º"><a href="#æœªè®¤è¯æ—¶è®¿é—®å…¶ä»–é¡µé¢æ˜¯çš„è¡Œä¸º" class="headerlink" title="æœªè®¤è¯æ—¶è®¿é—®å…¶ä»–é¡µé¢æ˜¯çš„è¡Œä¸º"></a>æœªè®¤è¯æ—¶è®¿é—®å…¶ä»–é¡µé¢æ˜¯çš„è¡Œä¸º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œä¸»è¦æ˜¯é’ˆå¯¹ï¼Œå‰åç«¯åˆ†ç¦»çš„æƒ…å†µï¼Œåå°æ²¡æœ‰åŠæ³•é‡å®šå‘ã€‚ </span></span><br><span class="line">http.exceptionHandling().authenticationEntryPoint((req,resp,authException) -&gt; &#123;</span><br><span class="line">            resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">            PrintWriter writer = resp.getWriter();</span><br><span class="line">            writer.write(<span class="string">&quot;å°šæœªç™»å½•ï¼Œæ¸…é—²ç™»å½•&quot;</span>);</span><br><span class="line">            writer.flush();</span><br><span class="line">            writer.close();</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h2 id="æ³¨é”€ç™»å½•åè¿”å›jsonæ•°æ®"><a href="#æ³¨é”€ç™»å½•åè¿”å›jsonæ•°æ®" class="headerlink" title="æ³¨é”€ç™»å½•åè¿”å›jsonæ•°æ®"></a>æ³¨é”€ç™»å½•åè¿”å›jsonæ•°æ®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">http.logout()   .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">                .logoutSuccessUrl(<span class="string">&quot;/logoutSuccess&quot;</span>)</span><br><span class="line">                .logoutSuccessHandler((req,resp,auth) -&gt; &#123;</span><br><span class="line">                    Object principal = auth.getPrincipal();</span><br><span class="line">                    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                    PrintWriter writer = resp.getWriter();</span><br><span class="line">                    writer.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">                    writer.write(<span class="string">&quot;ç™»å‡ºæˆåŠŸ&quot;</span>);</span><br><span class="line">                    writer.flush();</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125;);</span><br></pre></td></tr></table></figure><h2 id="é…ç½®ç”¨æˆ·çš„æ–¹å¼"><a href="#é…ç½®ç”¨æˆ·çš„æ–¹å¼" class="headerlink" title="é…ç½®ç”¨æˆ·çš„æ–¹å¼"></a>é…ç½®ç”¨æˆ·çš„æ–¹å¼</h2><ol><li><p>é…ç½®åœ¨å†…å­˜ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    auth.inMemoryAuthentication()</span><br><span class="line">        .withUser(<span class="string">&quot;aoa&quot;</span>)</span><br><span class="line">        .password(passwordEncoder()</span><br><span class="line">        .encode(<span class="string">&quot;123&quot;</span>))</span><br><span class="line">        .roles(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®UserDetailsService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. é‡å†™æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> UserDetailsService <span class="title">userDetailsService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åœ¨è¿™é‡Œåˆ›å»º</span></span><br><span class="line">        InMemoryUserDetailsManager inMemoryUserDetailsManager = <span class="keyword">new</span> InMemoryUserDetailsManager();</span><br><span class="line">        inMemoryUserDetailsManager.createUser(User.withUsername(<span class="string">&quot;bin&quot;</span>).password(passwordEncoder().encode(<span class="string">&quot;123&quot;</span>)).roles(<span class="string">&quot;bin&quot;</span>).build());</span><br><span class="line">        inMemoryUserDetailsManager.createUser(User.withUsername(<span class="string">&quot;sofm&quot;</span>).password(passwordEncoder().encode(<span class="string">&quot;123&quot;</span>)).roles(<span class="string">&quot;sofm&quot;</span>).build());</span><br><span class="line">        <span class="keyword">return</span> inMemoryUserDetailsManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. åœ¨configure(auth)ä¸­é…ç½®</span></span><br><span class="line"> auth.userDetailsService((userName)-&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></li></ol><h2 id="æƒé™ç»§æ‰¿"><a href="#æƒé™ç»§æ‰¿" class="headerlink" title="æƒé™ç»§æ‰¿"></a>æƒé™ç»§æ‰¿</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–°ç‰ˆæœ¬å¯èƒ½é…ç½®çš„å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ \n åˆ†å‰²   </span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="function">RoleHierarchy <span class="title">roleHierarchy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RoleHierarchyImpl hierarchy = <span class="keyword">new</span> RoleHierarchyImpl();</span><br><span class="line">        hierarchy.setHierarchy(<span class="string">&quot;ROLE_admin &gt; ROLE_bin&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> hierarchy;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SpringSecurity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringSecurity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå­¦ä¹ è®°å½•</title>
      <link href="/2022/04/06/Docker%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/04/06/Docker%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p><a href="https://www.docker.com/">å®˜ç½‘</a></p><p><a href="https://docs.docker.com/">æ–‡æ¡£</a></p><p><a href="https://hub.docker.com/">ä»“åº“</a></p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><ol><li><p>å®‰è£…yumå’Œé…ç½®é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…yum</span></span><br><span class="line">sudo yum install -y yum-utils</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ é˜¿é‡Œäº‘é•œåƒ</span></span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">  --add-repo \</span><br><span class="line">  http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…æœ€è¿‘ç¨³å®šç‰ˆdocker</span></span><br><span class="line">yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºä½ çš„dockerå®‰è£…æˆåŠŸ</span></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br></pre></td></tr></table></figure></li><li><p>å¸è½½docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¸è½½docker</span></span><br><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤é•œåƒ</span></span><br><span class="line">rm -rf /var/lib/docker</span><br><span class="line">rm -rf /var/lib/containerd</span><br></pre></td></tr></table></figure></li></ol><h2 id="é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"><a href="#é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ" class="headerlink" title="é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"></a>é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ</h2><h2 id="docker-runçš„è¿è¡Œæµç¨‹å›¾"><a href="#docker-runçš„è¿è¡Œæµç¨‹å›¾" class="headerlink" title="docker runçš„è¿è¡Œæµç¨‹å›¾"></a>docker runçš„è¿è¡Œæµç¨‹å›¾</h2><p><img src="/.io//image-20220407111402318.png" alt="image-20220407111402318"></p><h2 id="dockerä¸è™šæ‹Ÿæœºå¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆå¿«ï¼Ÿ"><a href="#dockerä¸è™šæ‹Ÿæœºå¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆå¿«ï¼Ÿ" class="headerlink" title="dockerä¸è™šæ‹Ÿæœºå¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆå¿«ï¼Ÿ"></a>dockerä¸è™šæ‹Ÿæœºå¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆå¿«ï¼Ÿ</h2><h1 id="docker-çš„å¸¸ç”¨å‘½ä»¤"><a href="#docker-çš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="docker çš„å¸¸ç”¨å‘½ä»¤"></a>docker çš„å¸¸ç”¨å‘½ä»¤</h1><h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br><span class="line">docker info</span><br><span class="line">docker å‘½ä»¤ --help # å¸®åŠ©å‘½ä»¤</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¸®åŠ©æ–‡æ¡£"><a href="#å¸®åŠ©æ–‡æ¡£" class="headerlink" title="å¸®åŠ©æ–‡æ¡£"></a>å¸®åŠ©æ–‡æ¡£</h2><p><a href="https://docs.docker.com/engine/reference/run/">å‘½ä»¤</a></p><p><a href="https://hub.docker.com/">docker hub</a></p><h2 id="é•œåƒå‘½ä»¤"><a href="#é•œåƒå‘½ä»¤" class="headerlink" title="é•œåƒå‘½ä»¤"></a>é•œåƒå‘½ä»¤</h2><p><strong>docker images</strong> æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><strong>docker search é•œåƒ</strong>   æœç´¢é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">è¿™ä¸ªæœç´¢æ˜¯å’Œåœ¨docker hub  ä¸­æœç´¢æ˜¯ä¸€é¡¹çš„</span></span><br><span class="line">docker search mysql</span><br></pre></td></tr></table></figure><p><strong>docker pull é•œåƒ [:tag]</strong>  ä¸‹è½½é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">é»˜è®¤ä¸‹è½½æ˜¯latestç‰ˆæœ¬</span></span><br><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure><p><strong>docker rmi é•œåƒname/id [-f]</strong> åˆ é™¤é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸åŠ ç‰ˆæœ¬å·ï¼Œé»˜è®¤æ˜¯latest</span></span><br><span class="line">docker rmi -f mysql</span><br><span class="line">docker rmi -f mysql hello-world # åˆ é™¤å¤šä¸ªé•œåƒ</span><br><span class="line">docker rmi -f $(docker images -aq) # åˆ é™¤æ‰€æœ‰é•œåƒ</span><br></pre></td></tr></table></figure><h2 id="å®¹å™¨å‘½ä»¤"><a href="#å®¹å™¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å‘½ä»¤"></a>å®¹å™¨å‘½ä»¤</h2><p><strong>docker run [å‚æ•°] image      åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker run -it centos /bin/bash#ä»¥äº¤äº’çš„æ–¹å¼å¯åŠ¨å®¹å™¨</span><br><span class="line"></span><br><span class="line">[root@localhost /]# docker run -it centos /bin/bash</span><br><span class="line">[root@9dc8ce07f368 /]# ls# @9dc8ce07f368 æ˜¯å®¹å™¨id</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@9dc8ce07f368 /]# exit#é€€å‡ºå¹¶åˆ é™¤å®¹å™¨</span><br><span class="line">exit</span><br><span class="line">[root@localhost /]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ex1</span></span><br><span class="line">docker run -d -p=3344:80 --name=nginx nginx</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>exit é€€å‡ºå®¹å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure><p><strong>ctrl + p +q</strong> é€€å‡ºå®¹å™¨,ä½†ä¸åˆ é™¤å®¹å™¨</p><p><strong>docker ps   æŸ¥è¯¢å®¹å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker ps#æŸ¥è¯¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker ps -a#æŸ¥è¯¢æ‰€æœ‰çš„å®¹å™¨ï¼Œè¿è¡Œ+å†å²è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker ps -q#æ˜¾ç¤ºå®¹å™¨id</span><br></pre></td></tr></table></figure><p><strong>docker rm</strong> åˆ é™¤å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm containerid#åˆ é™¤çš„å®¹å™¨å¿…é¡»åœæ­¢è¿è¡Œ</span><br><span class="line">docker rm $(docker ps -aq)# åˆ é™¤æ‰€æœ‰å®¹å™¨</span><br><span class="line">docker ps -aq|xargs docker rm # linux ç®¡é“ä¼ å‚</span><br></pre></td></tr></table></figure><p><strong>å¯åŠ¨å’Œåœæ­¢å®¹å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start #å¯åŠ¨å®¹å™¨</span><br><span class="line">docker restart #é‡å¯å®¹å™¨</span><br><span class="line">docker stop #åœæ­¢å®¹å™¨</span><br><span class="line">docker kill #å¼ºåˆ¶åœæ­¢å®¹å™¨</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨çš„å…¶ä»–å‘½ä»¤"><a href="#å¸¸ç”¨çš„å…¶ä»–å‘½ä»¤" class="headerlink" title="å¸¸ç”¨çš„å…¶ä»–å‘½ä»¤"></a>å¸¸ç”¨çš„å…¶ä»–å‘½ä»¤</h2><p><strong>æŸ¥çœ‹æ—¥å¿—</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run --name test -d centos /bin/sh -c &quot;while true; do $(echo date); sleep 1; done&quot;</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line">docker logs -tf -n 2 --until=2s containerid</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker top bc63cfe835fb</span><br><span class="line"></span><br><span class="line">[root@localhost /]# docker top bc63cfe835fb</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                123674              123652              0                   10:14               ?                   00:00:00            /bin/sh -c while true; do date; sleep 1; done</span><br><span class="line">root                124989              123674              0                   10:23               ?                   00:00:00            /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1</span><br><span class="line">[root@localhost /]# </span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨ä¸­çš„å…ƒæ•°æ®</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect bc63cfe835fb</span><br></pre></td></tr></table></figure><p><strong>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">è¿›å…¥åï¼Œå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯</span></span><br><span class="line">docker exec -it bc63cfe835fb /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">è¿›å…¥åï¼Œè¿›å…¥æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯</span></span><br><span class="line">docker attach bc63cfe835fb</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä»å®¹å™¨ä¼ é€’æ–‡ä»¶åˆ°ä¸»æœºä¸Š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker cp containerid:path å®¿ä¸»æœºä¸Špath</span><br><span class="line">docker cp test:/home/wangzhe.txt /home/test</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨çš„è¿è¡ŒçŠ¶å†µ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker stats</span><br><span class="line">CONTAINER ID   NAME      CPU %     MEM USAGE / LIMIT     MEM %     NET I/O        BLOCK I/O     PIDS</span><br><span class="line">5895b696ec89   tomcat    0.22%     128.3MiB / 2.727GiB   4.59%     15kB / 138kB   2.34MB / 0B   36</span><br></pre></td></tr></table></figure><h2 id="è¡¥å……å‘½ä»¤"><a href="#è¡¥å……å‘½ä»¤" class="headerlink" title="è¡¥å……å‘½ä»¤"></a>è¡¥å……å‘½ä»¤</h2><p><strong>é•œåƒé‡å‘½å</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag imageid updateinfo:tag</span><br></pre></td></tr></table></figure><p><strong>é•œåƒæ‰“åŒ…ä¸åŠ è½½</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker save -o test.tar 15296797459/diycentos:1.0</span><br><span class="line"></span><br><span class="line">docker load</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨ç½‘ç»œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network</span><br></pre></td></tr></table></figure><h2 id="å¯è§†åŒ–"><a href="#å¯è§†åŒ–" class="headerlink" title="å¯è§†åŒ–"></a>å¯è§†åŒ–</h2><p><a href="https://docs.portainer.io/v/ce-2.11/start/install/server/docker/linux">portainer å®˜ç½‘</a></p><p><strong>å®‰è£…</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker pull portainer/portainer-ce</span><br><span class="line">docker volume create portainer_data</span><br><span class="line">docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">9000 æ˜¯å¯è§†åŒ–ç•Œé¢çš„è®¿é—®åœ°å€</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Docker-é•œåƒ"><a href="#Docker-é•œåƒ" class="headerlink" title="Docker é•œåƒ"></a>Docker é•œåƒ</h1><h2 id="ä¿®æ”¹ä¿å­˜é•œåƒ"><a href="#ä¿®æ”¹ä¿å­˜é•œåƒ" class="headerlink" title="ä¿®æ”¹ä¿å­˜é•œåƒ"></a>ä¿®æ”¹ä¿å­˜é•œåƒ</h2><p><strong>æäº¤ä¿®æ”¹åçš„å®¹å™¨ä¸ºæ–°çš„é•œåƒ</strong></p><blockquote><p>å¯¹äºä¸‹è½½çš„é•œåƒä¿®æ”¹åï¼Œä¿å­˜ä¸ºæ–°çš„é•œåƒï¼Œç±»ä¼¼äºå¿«ç…§</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker commit -a=&quot;author&quot; -m=&quot;comonent&quot; containerid new_image_name:tag  </span><br><span class="line">[root@localhost test]# docker commit -a=&quot;wangzhe&quot; -m=&quot;add a new web app&quot; 5895b696ec89 tomcat_prime:1.0  </span><br><span class="line">sha256:156c35decf5d5ea65156111c2bbc2e56930d0f56d0d56520fa047c81cbb1179e</span><br><span class="line">[root@localhost test]# docker images</span><br><span class="line">REPOSITORY               TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line"><span class="meta">#</span><span class="bash">tomcat_prime             1.0       156c35decf5d   5 seconds ago   684MB</span></span><br><span class="line">tomcat                   latest    b00440a36b99   6 days ago      680MB</span><br><span class="line">nginx                    latest    12766a6745ee   9 days ago      142MB</span><br><span class="line">portainer/portainer-ce   2.11.1    ed396c816a75   8 weeks ago     280MB</span><br><span class="line">portainer/portainer-ce   latest    ed396c816a75   8 weeks ago     280MB</span><br><span class="line">hello-world              latest    feb5d9fea6a5   6 months ago    13.3kB</span><br><span class="line">centos                   latest    5d0da3dc9764   6 months ago    231MB</span><br></pre></td></tr></table></figure><h1 id="å®¹å™¨æ•°æ®å·"><a href="#å®¹å™¨æ•°æ®å·" class="headerlink" title="å®¹å™¨æ•°æ®å·"></a>å®¹å™¨æ•°æ®å·</h1><p><strong>æŒ‚è½½æ•°æ®å·</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# docker run -it --name centos7 -v /home/test:/home centos /bin/bash</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜ï¼šdocker-å®‰è£…mysql"><a href="#å®æˆ˜ï¼šdocker-å®‰è£…mysql" class="headerlink" title="å®æˆ˜ï¼šdocker å®‰è£…mysql"></a>å®æˆ˜ï¼šdocker å®‰è£…mysql</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql --name mysql -e MYSQL_ROOT_PASSWORD=343621  mysql:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŒ‚è½½é…ç½®æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="å…·åå’ŒåŒ¿åæŒ‚è½½"><a href="#å…·åå’ŒåŒ¿åæŒ‚è½½" class="headerlink" title="å…·åå’ŒåŒ¿åæŒ‚è½½"></a>å…·åå’ŒåŒ¿åæŒ‚è½½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å…·åæŒ‚è½½</span></span><br><span class="line">docker run --name nginx05 -d -P -v juming-nginx:/etc/nginx nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢æ•°æ®å·ï¼ŒåŒ¿åæ•°æ®å·æ˜¯éšæœºå­—ç¬¦ä¸²ï¼Œå…·åæ•°æ®å·æ˜¯æœ‰åå­—çš„</span></span><br><span class="line">[root@localhost conf.d]# docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     071c733fcd2db97f0aee68cf338d2ec49f344670b029cd6173c8b247dee33736</span><br><span class="line">local     6694db8ec1e0347998c2b744c40fa4cce16490600da539ca6759c9b54eb0e5af</span><br><span class="line">local     a4ca0c940bb15e60c655a7d97753d2745783a3db3a6687ec16b4dd8acee86449</span><br><span class="line">local     juming-nginx</span><br><span class="line">local     portainer_data</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å·è¯¦æƒ…</span></span><br><span class="line">[root@localhost conf.d]# docker volume inspect juming-nginx </span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2022-04-11T16:30:14+08:00&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: null,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/juming-nginx/_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;juming-nginx&quot;,</span><br><span class="line">        &quot;Options&quot;: null,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"><span class="meta">#</span><span class="bash"> Mountpoint æ˜¯æ•°æ®å·åœ¨å®¿ä¸»æœºä¸Šçš„ä½ç½®</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#æ•°æ®å·æŒ‚è½½ï¼š</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å…·åæŒ‚è½½</span></span><br><span class="line"><span class="meta">#</span><span class="bash">åŒ¿åæŒ‚è½½</span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŒ‡å®šè·¯å¾„æŒ‚è½½</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># æŒ‡å®šå®¿ä¸»æœºè¯»å–æƒé™</span></span></span><br><span class="line">:roreadonly</span><br><span class="line">:rwreadwrite</span><br><span class="line">docker run --name nginx05 -d -P -v juming-nginx:/etc/nginx:ro nginx</span><br><span class="line">docker run --name nginx05 -d -P -v juming-nginx:/etc/nginx:rw nginx</span><br></pre></td></tr></table></figure><h2 id="dockerFile"><a href="#dockerFile" class="headerlink" title="dockerFile"></a>dockerFile</h2><p>dockerfile å°±æ˜¯ç”¨æ¥åˆ›å»ºé•œåƒçš„</p><h2 id="dockerFileæ„å»ºé•œåƒæ—¶è¿›è¡Œå·æŒ‚è½½"><a href="#dockerFileæ„å»ºé•œåƒæ—¶è¿›è¡Œå·æŒ‚è½½" class="headerlink" title="dockerFileæ„å»ºé•œåƒæ—¶è¿›è¡Œå·æŒ‚è½½"></a>dockerFileæ„å»ºé•œåƒæ—¶è¿›è¡Œå·æŒ‚è½½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç¼–å†™dockerfile  æ–‡ä»¶</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åŠ çš„æŒ‚è½½å·ï¼Œåœ¨æ ¹ç›®å½•ä¸­</span></span><br><span class="line">FROM centos</span><br><span class="line"></span><br><span class="line">VOLUME [&quot;v01&quot;, &quot;v02&quot;]</span><br><span class="line"></span><br><span class="line">CMD echo &quot;----end-----&quot;</span><br><span class="line"></span><br><span class="line">CMD /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡Œåˆ›å»ºå‘½ä»¤</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -fæ–‡ä»¶ä½ç½®</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -tåˆ›å»ºçš„é•œåƒåï¼šç‰ˆæœ¬å·</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¿…é¡»è¦åŠ ä¸Š .</span></span><br><span class="line">docker build -f dockfile1 -t wangzhe/centos:1.0 .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">åœ¨å®¿ä¸»æœºä¸­å·æ˜¯åŒ¿åæ•°æ®å·</span></span><br><span class="line">1. ä½¿ç”¨ docker inspect container   æ‰¾mount</span><br><span class="line">2. ä½¿ç”¨ docker volume inspect  vid  æ‰¾åˆ°æŒ‚è½½è·¯å¾„</span><br><span class="line">3. </span><br></pre></td></tr></table></figure><h2 id="æ•°æ®å·å®¹å™¨"><a href="#æ•°æ®å·å®¹å™¨" class="headerlink" title="æ•°æ®å·å®¹å™¨"></a>æ•°æ®å·å®¹å™¨</h2><p>å¤šä¸ªå®¹å™¨ä¹‹é—´åŒæ­¥æ•°æ®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--volumes-from containerid</span><br></pre></td></tr></table></figure><h2 id="mysqlæ•°æ®å…±äº«"><a href="#mysqlæ•°æ®å…±äº«" class="headerlink" title="mysqlæ•°æ®å…±äº«"></a>mysqlæ•°æ®å…±äº«</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql01 -d -p 3310:3306 -v /etc/mysql/conf.d -v /var/lib/mysql -e MYSQL_ROOT_PASSWORD=343621 mysql:latest</span><br><span class="line">docker run --name mysql01 -d -p 3311:3306 --volumes-from mysql01 -e MYSQL_ROOT_PASSWORD=343621 mysql:latest</span><br></pre></td></tr></table></figure><h1 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h1><h2 id="dockerfile-æŒ‡ä»¤"><a href="#dockerfile-æŒ‡ä»¤" class="headerlink" title="dockerfile æŒ‡ä»¤"></a>dockerfile æŒ‡ä»¤</h2><ul><li>æ‰€æœ‰æŒ‡ä»¤å¿…é¡»å¤§å†™</li><li>æŒ‡ä»¤ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œ</li><li>æ¯æ¡æŒ‡ä»¤éƒ½æ˜¯ä¸€å±‚é•œåƒ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM container[centos,nginx]#å£°æ˜çˆ¶é•œåƒ</span><br><span class="line">MAINTAINER  å§“å+é‚®ç®± #å£°æ˜ç»´æŠ¤è€…</span><br><span class="line">RUN #é•œåƒæ„å»ºçš„æ—¶å€™æ‰§è¡Œçš„ä¸€äº›å‘½ä»¤</span><br><span class="line">ADD#æ·»åŠ å…¶ä»–é•œåƒï¼Œtomcatï¼Œjdkï¼Œnginxä¹‹ç±»çš„å‹ç¼©åŒ…ï¼Œä¼šè‡ªåŠ¨è§£å‹</span><br><span class="line">WORKDIR#å·¥ä½œç›®å½•ï¼Œè¿›å…¥bashåçš„æ‰€åœ¨ç›®å½•ã€centosé»˜è®¤æ˜¯/ã€‘</span><br><span class="line">VOLUME#æŒ‚è½½çš„ç›®å½•</span><br><span class="line">EXPOSE#æš´éœ²çš„ç«¯å£é…ç½®</span><br><span class="line">CMD#å¯åŠ¨å®¹å™¨çš„æ—¶å€™æ‰§è¡Œï¼Œåªä¼šæ‰§è¡Œæœ€åä¸€æ¡cmdå‘½ä»¤ï¼Œå¯ä»¥è¢«æ›¿æ¢ä½†ä¸èƒ½è¢«è¿½åŠ </span><br><span class="line">ENTRYPOINT#æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</span><br><span class="line">ONBUILD#å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿çš„dockfileæ—¶ï¼Œä¼šæ‰§è¡Œ</span><br><span class="line">COPY#ç±»ä¼¼äºaddï¼Œå°†æˆ‘ä»¬çš„æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­å»</span><br><span class="line">ENV#æ„å»ºçš„æ—¶å€™è®¾ç½®çš„ç¯å¢ƒå˜é‡ï¼Œæ„ä»¶æ—¶ä¼ é€’çš„å‚æ•°</span><br></pre></td></tr></table></figure><h2 id="æ„å»ºmy-centos"><a href="#æ„å»ºmy-centos" class="headerlink" title="æ„å»ºmy-centos"></a>æ„å»ºmy-centos</h2><p>åœ¨åŸºç¡€é•œåƒä¸Šæ·»åŠ  vimå’ŒipconfigåŠŸèƒ½ï¼Œä½“éªŒdockerfileçš„å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">FROM centos</span><br><span class="line">MAINTAINER wangzhe&lt;2546972682@qq.com&gt;</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line"></span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN yum -y install net-tools</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo ----end----</span><br><span class="line">CMD /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ„å»º</span></span><br><span class="line">docker build -f dockerfile-centos -t dockerfile-centos:1.0 .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å·¥ä½œç›®å½• å’Œ ifconfigå‘½ä»¤å¯ä»¥ä½¿ç”¨</span></span><br><span class="line">[root@localhost test-dockfile]# docker run -it --name dockfilecentos  23376f473200</span><br><span class="line">[root@536088d44218 local]# pwd</span><br><span class="line">/usr/local</span><br><span class="line">[root@536088d44218 local]# ifconfig</span><br></pre></td></tr></table></figure><h2 id="CMD-ä¸-ENTRYPOINT-åŒºåˆ«"><a href="#CMD-ä¸-ENTRYPOINT-åŒºåˆ«" class="headerlink" title="CMD  ä¸ ENTRYPOINT åŒºåˆ«"></a>CMD  ä¸ ENTRYPOINT åŒºåˆ«</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">cmd  ä¼šåœ¨è¿è¡Œå®¹å™¨æ—¶è¿è¡Œæœ€åä¸€æ¡å‘½ä»¤ï¼Œå¯ä»¥è¢«æ›¿æ¢ï¼Œä½†ä¸èƒ½è¿½åŠ </span><br><span class="line">entrypoint  ä¼šåœ¨è¿è¡Œå®¹å™¨æ—¶è¿è¡Œï¼Œå¯ä»¥åœ¨åé¢è¿½åŠ å‘½ä»¤</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">cmd  æ‰§è¡Œ ls -aå‘½ä»¤</span></span><br><span class="line">CMD [&quot;ls&quot;,&quot;-a&quot;]</span><br><span class="line"></span><br><span class="line">[root@localhost test]# docker run 0d1a612596fa</span><br><span class="line">.</span><br><span class="line">..</span><br><span class="line">.dockerenv</span><br><span class="line">bin</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">home</span><br><span class="line">ã€‚ã€‚ã€‚</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#æ·»åŠ  -l å‚æ•°</span></span></span><br><span class="line">[root@localhost test]# docker run 0d1a612596fa -l</span><br><span class="line">docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: &quot;-l&quot;: executable file not found in $PATH: unknown.</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#éœ€è¦åœ¨åé¢æ·»åŠ å®Œæ•´çš„å‘½ä»¤</span></span></span><br><span class="line">[root@localhost test]# docker run 0d1a612596fa ls -al</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x.   1 root root   6 Apr 12 07:37 .</span><br><span class="line">drwxr-xr-x.   1 root root   6 Apr 12 07:37 ..</span><br><span class="line">-rwxr-xr-x.   1 root root   0 Apr 12 07:37 .dockerenv</span><br><span class="line">lrwxrwxrwx.   1 root root   7 Nov  3  2020 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x.   5 root root 340 Apr 12 07:37 dev</span><br><span class="line">drwxr-xr-x.   1 root root  66 Apr 12 07:37 etc</span><br><span class="line">drwxr-xr-x.   2 root root   6 Nov  3  2020 home</span><br><span class="line">lrwxrwxrwx.   1 root root   7 Nov  3  2020 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx.   1 root root   9 Nov  3  2020 lib64 -&gt; usr/lib64</span><br><span class="line">drwx------.   2 root root   6 Sep 15  2021 lost+found</span><br><span class="line">drwxr-xr-x.   2 root root   6 Nov  3  2020 media</span><br><span class="line">drwxr-xr-x.   2 root root   6 Nov  3  2020 mnt</span><br><span class="line">drwxr-xr-x.   2 root root   6 Nov  3  2020 opt</span><br><span class="line">dr-xr-xr-x. 250 root root   0 Apr 12 07:37 proc</span><br><span class="line">dr-xr-x---.   2 root root 162 Sep 15  2021 root</span><br><span class="line">drwxr-xr-x.  11 root root 163 Sep 15  2021 run</span><br><span class="line">lrwxrwxrwx.   1 root root   8 Nov  3  2020 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x.   2 root root   6 Nov  3  2020 srv</span><br><span class="line">dr-xr-xr-x.  13 root root   0 Apr 11 07:11 sys</span><br><span class="line">drwxrwxrwt.   7 root root 171 Sep 15  2021 tmp</span><br><span class="line">drwxr-xr-x.  12 root root 144 Sep 15  2021 usr</span><br><span class="line">drwxr-xr-x.  20 root root 262 Sep 15  2021 var</span><br></pre></td></tr></table></figure><p><strong>entrypointå‘½ä»¤</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# docker run 1dc871c9c046</span><br><span class="line">.</span><br><span class="line">..</span><br><span class="line">.dockerenv</span><br><span class="line">bin</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">home</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚</span><br><span class="line">[root@localhost test]# docker run 1dc871c9c046 -l</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x.   1 root root   6 Apr 12 07:39 .</span><br><span class="line">drwxr-xr-x.   1 root root   6 Apr 12 07:39 ..</span><br><span class="line">-rwxr-xr-x.   1 root root   0 Apr 12 07:39 .dockerenv</span><br><span class="line">lrwxrwxrwx.   1 root root   7 Nov  3  2020 bin -&gt; usr/bin</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜tomcat"><a href="#å®æˆ˜tomcat" class="headerlink" title="å®æˆ˜tomcat"></a>å®æˆ˜tomcat</h2><p>dockerfileæ–‡ä»¶ä»¥<code>Dockerfile</code>å‘½åï¼Œæ˜¯æ ‡å‡†çš„åå­—ï¼Œåœ¨æ„å»ºçš„æ—¶å€™å°±ä¸éœ€è¦åŠ -f</p><p><strong># tomcat ç›®å½•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">éœ€è¦å‡†å¤‡tomcatå’Œjdkçš„å‹ç¼©æ–‡ä»¶ï¼Œä½¿ç”¨addå‘½ä»¤æ·»åŠ æ—¶ä¼šè‡ªåŠ¨è§£å‹</span></span><br><span class="line">[root@localhost tomcat]# ll</span><br><span class="line">æ€»ç”¨é‡ 155024</span><br><span class="line">drwxr-xr-x. 9 root  root        220 4æœˆ  12 16:41 apache-tomcat-10.0.20</span><br><span class="line">-rw-r--r--. 1 root  root   11915655 4æœˆ  12 16:38 apache-tomcat-10.0.20.tar.gz</span><br><span class="line">-rw-r--r--. 1 root  root        653 4æœˆ  12 16:50 Dockerfile</span><br><span class="line">drwxr-xr-x. 8 10143 10143       273 12æœˆ 16 03:30 jdk1.8.0_321</span><br><span class="line">-rw-r--r--. 1 root  root  146815279 4æœˆ  12 16:36 jdk-8u321-linux-x64.tar.gz</span><br><span class="line">-rw-r--r--. 1 root  root          7 4æœˆ  12 16:31 readme.txt</span><br></pre></td></tr></table></figure><p><strong>#Dockerfileæ–‡ä»¶</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tomcat]# cat Dockerfile </span><br><span class="line">FROM centos:centos7</span><br><span class="line"></span><br><span class="line">MAINTAINER wangzhe&lt;2546972682@qq.com&gt;</span><br><span class="line"></span><br><span class="line">COPY readme.txt /usr/local/readme.txt</span><br><span class="line"></span><br><span class="line">ADD apache-tomcat-10.0.20.tar.gz /usr/local/</span><br><span class="line">ADD jdk-8u321-linux-x64.tar.gz /usr/local</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line"></span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/local/jdk1.8.0_321</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV CATALINA_HOME /usr/local/apache-tomcat-10.0.20</span><br><span class="line">ENV CATALINA_BASH /usr/local/apache-tomcat-10.0.20</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/bin:$CATALINA_HOME/bin</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">CMD /usr/local/apache-tomcat-10.0.20/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-10.0.20/bin/logs/catalina.out</span><br></pre></td></tr></table></figure><p><strong>é•œåƒæ„å»ºåŠè¿è¡Œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ„å»ºé•œåƒä¸ç”¨æ·»åŠ -f</span></span><br><span class="line">docker build -t diy-centos:1.0 .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œé•œåƒ</span></span><br><span class="line">docker run -d -p 9090:8080 --name wangzhetomcat -v /home/admin/build/tomcat/test:/usr/local/apache-tomcat-10.0.20/webapps/test \</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> -v /home/admin/build/tomcat/tomcatlogs/:/usr/<span class="built_in">local</span>/apache-tomcat-10.0.20/logs diy-centos:1.0</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨æŒ‚è½½<span class="built_in">test</span>ç›®å½•ä¸­æ·»åŠ é¡¹ç›®ä¿¡æ¯</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•åœ°å€</span></span><br><span class="line">192.168.112.128:9090</span><br><span class="line">192.168.112.128:9090/test</span><br></pre></td></tr></table></figure><h2 id="å‘å¸ƒé•œåƒ"><a href="#å‘å¸ƒé•œåƒ" class="headerlink" title="å‘å¸ƒé•œåƒ"></a>å‘å¸ƒé•œåƒ</h2><h3 id="å‘å¸ƒåˆ°-hub-docker-com"><a href="#å‘å¸ƒåˆ°-hub-docker-com" class="headerlink" title="å‘å¸ƒåˆ° hub.docker.com"></a>å‘å¸ƒåˆ° hub.docker.com</h3><p><strong>1.ç™»å½•ç½‘ç«™</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u account -p password</span><br></pre></td></tr></table></figure><p><strong>2.push</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost .docker]# docker push 15296797459/diycentos:1.0</span><br><span class="line">The push refers to repository [docker.io/15296797459/diycentos]</span><br><span class="line">174b635a5058: Pushed </span><br><span class="line">9f7ffe7837ee: Pushed </span><br><span class="line">34ee798fa05a: Pushed </span><br><span class="line">e7f006c9c590: Pushed </span><br><span class="line">174f56854903: Pushed </span><br><span class="line">1.0: digest: sha256:6876bab1fe0fdc9d83bcbbaac25cc744f0eca5a87a4a64179613e193b91da675 size: 1373</span><br></pre></td></tr></table></figure><h3 id="å‘å¸ƒé•œåƒåˆ°é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡"><a href="#å‘å¸ƒé•œåƒåˆ°é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡" class="headerlink" title="å‘å¸ƒé•œåƒåˆ°é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡"></a>å‘å¸ƒé•œåƒåˆ°é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡</h3><p><strong>â€¦</strong></p><h1 id="docker-ç½‘ç»œ"><a href="#docker-ç½‘ç»œ" class="headerlink" title="docker ç½‘ç»œ"></a>docker ç½‘ç»œ</h1><p><strong>æŸ¥çœ‹ç½‘ç»œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# ip addr</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:d2:b1:f9 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.112.128/24 brd 192.168.112.255 scope global noprefixroute dynamic ens33</span><br><span class="line">       valid_lft 1563sec preferred_lft 1563sec</span><br><span class="line">    inet6 fe80::d86c:8784:85bc:385d/64 scope link noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000</span><br><span class="line">    link/ether 52:54:00:06:40:cc brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast master virbr0 state DOWN group default qlen 1000</span><br><span class="line">    link/ether 52:54:00:06:40:cc brd ff:ff:ff:ff:ff:ff</span><br><span class="line">5: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default </span><br><span class="line">    link/ether 02:42:b8:de:8e:fb brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="meta">#</span><span class="bash">docker0 æ˜¯dockerçš„ç½‘å¡</span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ¯ä¸ªå®¹å™¨éƒ½å¯¹åº”ä¸€ä¸ªç½‘å¡</span></span><br></pre></td></tr></table></figure><p>**å¯åŠ¨å®¹å™¨åçš„ip addr **</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å®¹å™¨å¯åŠ¨åä¼šå¤šå‡ºä¸€ä¸ªç½‘å¡</span></span><br><span class="line">7: veth6ce638d@if6: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default </span><br><span class="line">    link/ether e2:82:63:8d:f9:d2 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet6 fe80::e082:63ff:fe8d:f9d2/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">       </span><br><span class="line"><span class="meta">#</span><span class="bash">é€šè¿‡docker inspect containerid æŸ¥çœ‹å®¹å™¨ ipåœ°å€</span></span><br><span class="line"> &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class="line">            &quot;EndpointID&quot;: &quot;fbf8f5976927865501758b0bfffb8f6d9b3ded6b1866d7930fbc9d9e49dc1ade&quot;,</span><br><span class="line">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;bridge&quot;: &#123;</span><br><span class="line">                    &quot;IPAMConfig&quot;: null,</span><br><span class="line">                    &quot;Links&quot;: null,</span><br><span class="line">                    &quot;Aliases&quot;: null,</span><br><span class="line">                    &quot;NetworkID&quot;: &quot;70dee68966da2ee89e5c29d55f358c92c153db0bb239379193e4a79a636ff78e&quot;,</span><br><span class="line">                    &quot;EndpointID&quot;: &quot;fbf8f5976927865501758b0bfffb8f6d9b3ded6b1866d7930fbc9d9e49dc1ade&quot;,</span><br><span class="line">                    </span><br><span class="line"> </span><br></pre></td></tr></table></figure><blockquote><p>docker0æ˜¯æ‰€æœ‰å®¹å™¨çš„ç½‘å…³ï¼Œå¤šæœ‰å®¹å™¨éƒ½ä¸docker0æ˜¯åŒä¸€ç½‘æ®µ</p></blockquote><p>ä¸åŒå®¹å™¨ä¹‹é—´æ˜¯å¯ä»¥ç›¸äº’ ping é€šçš„</p><h2 id="å®ç°pingå®¹å™¨åæ¥è¿é€š"><a href="#å®ç°pingå®¹å™¨åæ¥è¿é€š" class="headerlink" title="å®ç°pingå®¹å™¨åæ¥è¿é€š"></a>å®ç°pingå®¹å™¨åæ¥è¿é€š</h2><p><strong>â€“link</strong></p><blockquote><p>è¿™ç§æ–¹å¼å·²ç»ä¸æµè¡Œäº†</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ä½¿ç”¨linké“¾æ¥åå¯ä»¥ç›´æ¥ä½¿ç”¨å®¹å™¨åç§°æ¥ping</span></span><br><span class="line">docker run -d -it -P --name tomcat02 --link tomcat01 tomcat</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --link çš„æœ¬è´¨æ˜¯ï¼šåœ¨/etc/hosts æ–‡ä»¶ä¸­æ·»åŠ æ˜ å°„</span></span><br><span class="line"><span class="meta">#</span><span class="bash">172.17.0.2      tomcat01 3cbc794672f4</span></span><br><span class="line"></span><br><span class="line">[root@localhost /]# docker exec -it tomcat02 cat /etc/hosts</span><br><span class="line">127.0.0.1       localhost</span><br><span class="line">::1     localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0 ip6-localnet</span><br><span class="line">ff00::0 ip6-mcastprefix</span><br><span class="line">ff02::1 ip6-allnodes</span><br><span class="line">ff02::2 ip6-allrouters</span><br><span class="line">172.17.0.2      tomcat01 3cbc794672f4</span><br><span class="line">172.17.0.3      70a222b7a8a2</span><br></pre></td></tr></table></figure><h2 id="dockerè‡ªå®šä¹‰ç½‘ç»œ"><a href="#dockerè‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="dockerè‡ªå®šä¹‰ç½‘ç»œ"></a>dockerè‡ªå®šä¹‰ç½‘ç»œ</h2><p><strong>å®¹å™¨äº’è”</strong></p><blockquote><p>ç½‘ç»œæ¨¡å¼</p></blockquote><p><strong>åˆ›å»ºç½‘ç»œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# docker network create -d bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</span><br><span class="line">cac186e0f9036603661970829a8d7efd14564db2a5e7c0687a402e7cde593307</span><br><span class="line">[root@localhost /]# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">70dee68966da   bridge    bridge    local</span><br><span class="line">2bafb20418b7   host      host      local</span><br><span class="line">cac186e0f903   mynet     bridge    local</span><br><span class="line">febb418c2c60   none      null      local</span><br><span class="line"></span><br><span class="line">[root@localhost /]# docker network inspect mynet</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Name&quot;: &quot;mynet&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;cac186e0f9036603661970829a8d7efd14564db2a5e7c0687a402e7cde593307&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2022-04-13T15:11:40.89222403+08:00&quot;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;bridge&quot;,</span><br><span class="line">        &quot;EnableIPv6&quot;: false,</span><br><span class="line">        &quot;IPAM&quot;: &#123;</span><br><span class="line">            &quot;Driver&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">            &quot;Config&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;192.168.0.1&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Internal&quot;: false,</span><br><span class="line">        &quot;Attachable&quot;: false,</span><br><span class="line">        &quot;Ingress&quot;: false,</span><br><span class="line">        &quot;ConfigFrom&quot;: &#123;</span><br><span class="line">            &quot;Network&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ConfigOnly&quot;: false,</span><br><span class="line">        &quot;Containers&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>å®¹å™¨ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œ</strong></p><p><strong>â€“net mynet</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# docker run --name centos02 -d -it --net mynet centos</span><br><span class="line"></span><br><span class="line">[root@localhost /]# docker network inspect mynet </span><br><span class="line"></span><br><span class="line">        &quot;Containers&quot;: &#123;</span><br><span class="line">            &quot;3dd7a67c4fca04d2a24d876195260c7e494a72c03af31695ea54e4f30080b33d&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;centos01&quot;,</span><br><span class="line">                &quot;EndpointID&quot;: &quot;37cd1c3199bc6a386efccff45523609f38cc30063f4e6de9f94ce63c49a2c4e6&quot;,</span><br><span class="line">                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:02&quot;,</span><br><span class="line">                &quot;IPv4Address&quot;: &quot;192.168.0.2/16&quot;,</span><br><span class="line">                &quot;IPv6Address&quot;: &quot;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;ef58a6b1a377f6516838a00477bee0d6fbef56757dd684d7726e9632df2d00d9&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;centos02&quot;,</span><br><span class="line">                &quot;EndpointID&quot;: &quot;3cba83a82663a555c7a7b3c8c12c01e71d8fddb077d4e97d63ad8cbb49b52f97&quot;,</span><br><span class="line">                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:03&quot;,</span><br><span class="line">                &quot;IPv4Address&quot;: &quot;192.168.0.3/16&quot;,</span><br><span class="line">                &quot;IPv6Address&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">ping centos02</span><br><span class="line">pong</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç½‘ç»œè¿é€š"><a href="#ç½‘ç»œè¿é€š" class="headerlink" title="ç½‘ç»œè¿é€š"></a>ç½‘ç»œè¿é€š</h2><p>æœ¬è´¨ä¸Šæ˜¯å°†å®¹å™¨æ·»åŠ åˆ°ç›®æ ‡ç½‘ç»œä¸­å»</p><p><strong>docker network connect</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network connect network container</span><br></pre></td></tr></table></figure><h1 id="å®æˆ˜ï¼šéƒ¨ç½²redisé›†ç¾¤"><a href="#å®æˆ˜ï¼šéƒ¨ç½²redisé›†ç¾¤" class="headerlink" title="å®æˆ˜ï¼šéƒ¨ç½²redisé›†ç¾¤"></a>å®æˆ˜ï¼šéƒ¨ç½²redisé›†ç¾¤</h1><h1 id="springbootå¾®æœåŠ¡æ‰“åŒ…"><a href="#springbootå¾®æœåŠ¡æ‰“åŒ…" class="headerlink" title="springbootå¾®æœåŠ¡æ‰“åŒ…"></a>springbootå¾®æœåŠ¡æ‰“åŒ…</h1><h1 id="å¸¸è§çš„å‘"><a href="#å¸¸è§çš„å‘" class="headerlink" title="å¸¸è§çš„å‘"></a>å¸¸è§çš„å‘</h1><p><strong>docker run ä¹‹åå‘ç°å®¹å™¨åœæ­¢äº†</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">docker run image; å¦‚æœå®¹å™¨æ²¡æœ‰å¯åŠ¨å‰å°ç¨‹åºï¼Œdockeræ²¡æœ‰å‘ç°åº”ç”¨ï¼Œå°±ä¼šè‡ªåŠ¨åœæ­¢ï¼Œ</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nginx å¯åŠ¨åï¼Œå‘ç°è‡ªå·±æ²¡æœ‰ç¨‹åºï¼Œå°±ä¼šåœæ­¢è¿è¡Œ</span></span><br></pre></td></tr></table></figure><p><strong>Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the d</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">é‡å¯æœåŠ¡</span></span><br><span class="line">service docker restart</span><br></pre></td></tr></table></figure><p><strong>æ¨é€åˆ°hub.docker.comé‡åˆ°çš„é—®é¢˜</strong></p><blockquote><p> denied: requested access to the resource is denied</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker push diy-tomcat:1.0</span><br><span class="line">The push refers to repository [docker.io/library/diy-tomcat]</span><br><span class="line">174b635a5058: Preparing </span><br><span class="line">9f7ffe7837ee: Preparing </span><br><span class="line">34ee798fa05a: Preparing </span><br><span class="line">e7f006c9c590: Waiting </span><br><span class="line">174f56854903: Waiting </span><br><span class="line">denied: requested access to the resource is denied</span><br><span class="line"></span><br><span class="line">åŸå› ï¼špushçš„é•œåƒåº”è¯¥æ˜¯account/imagesname:version</span><br><span class="line">push 15296797459/diytomcat:version</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloudAlibabaå­¦ä¹ è®°å½•</title>
      <link href="/2022/03/24/SpringCloudAlibaba%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/03/24/SpringCloudAlibaba%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Nacos"><a href="#Nacos" class="headerlink" title="Nacos"></a>Nacos</h1><p><a href="https://github.com/alibaba/nacos">å®˜ç½‘</a></p><h2 id="nacos-çš„å®‰è£…å¯åŠ¨"><a href="#nacos-çš„å®‰è£…å¯åŠ¨" class="headerlink" title="nacos çš„å®‰è£…å¯åŠ¨"></a>nacos çš„å®‰è£…å¯åŠ¨</h2><p><a href="https://github.com/alibaba/nacos/releases">ä¸‹è½½åœ°å€</a></p><p><strong>å¯åŠ¨å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> nacos/bin  <span class="comment">#è¿›å…¥binç›®å½•</span></span><br><span class="line">sh startup.sh -m standalone <span class="comment">#standaloneä»£è¡¨å•æœºè¿è¡Œï¼Œéé›†ç¾¤æ¨¡å¼</span></span><br></pre></td></tr></table></figure><p><a href="http://192.168.112.128:8848/nacos/index.html">è®¿é—®åœ°å€</a></p><h2 id="æœåŠ¡å‘ç°-åŸºæœ¬ä½¿ç”¨"><a href="#æœåŠ¡å‘ç°-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="æœåŠ¡å‘ç°-åŸºæœ¬ä½¿ç”¨"></a>æœåŠ¡å‘ç°-åŸºæœ¬ä½¿ç”¨</h2><h4 id="ç”Ÿäº§è€…é…ç½®"><a href="#ç”Ÿäº§è€…é…ç½®" class="headerlink" title="ç”Ÿäº§è€…é…ç½®"></a>ç”Ÿäº§è€…é…ç½®</h4><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>application.yaml é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9001</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-nacos-provider</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span><span class="string">:8848</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ç±»é…ç½®ä½¿ç”¨<code>@EnableDiscoveryClient</code> æ³¨è§£</p></li></ol><h4 id="æ¶ˆè´¹è€…é…ç½®"><a href="#æ¶ˆè´¹è€…é…ç½®" class="headerlink" title="æ¶ˆè´¹è€…é…ç½®"></a>æ¶ˆè´¹è€…é…ç½®</h4><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¿™é‡Œä½¿ç”¨loadbalancer åšè´Ÿè½½å‡è¡¡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>application.yaml é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">83</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-nacos-consumer</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:9411</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span><span class="string">:8848</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">service:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">http://cloud-nacos-provider</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰‹åŠ¨æ³¨å…¥restTemplate,åœ¨å¯åŠ¨ç±»ä¸Šé…ç½®<code>@EnableDiscoveryClient</code>æ³¨è§£</p></li></ol><h2 id="é…ç½®ä¸­å¿ƒ-åŸºæœ¬ä½¿ç”¨"><a href="#é…ç½®ä¸­å¿ƒ-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="é…ç½®ä¸­å¿ƒ-åŸºæœ¬ä½¿ç”¨"></a>é…ç½®ä¸­å¿ƒ-åŸºæœ¬ä½¿ç”¨</h2><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¿…é¡»æ·»åŠ è¿™ä¸ªä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>bootstrap.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">3377</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-nacos-config</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span><span class="string">:8848</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span><span class="string">:8848</span> <span class="comment"># é…ç½®nacos config serveråœ°å€</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment">#é…ç½®æ–‡ä»¶çš„æ‰©å±•åï¼Œé»˜è®¤ä¸ºproperties</span></span><br><span class="line"><span class="attr">refresh-enabled:</span> <span class="literal">true</span> <span class="comment"># è‡ªåŠ¨åˆ·æ–°é»˜è®¤å¼€å¯ï¼Œå¦‚æœè¦å…³é—­è®¾ç½®ä¸ºfalse</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¼šåˆ°æœåŠ¡å™¨çš„default namespace -&gt; DEFAULT_GROUP -&gt; cloud-nacos-config.yaml çš„æ–‡ä»¶       </span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="é…ç½®è‡ªåŠ¨åˆ·æ–°"><a href="#é…ç½®è‡ªåŠ¨åˆ·æ–°" class="headerlink" title="é…ç½®è‡ªåŠ¨åˆ·æ–°"></a>é…ç½®è‡ªåŠ¨åˆ·æ–°</h3><ol><li><code>cloud.nacos.config.refresh-enabled=true</code> é»˜è®¤å°±æ˜¯å¼€å¯çš„ã€‚</li><li>åœ¨éœ€è¦åˆ·æ–°çš„ç±»ä¸Šæ·»åŠ <code>@RefreshScope</code> æ³¨è§£</li></ol><h3 id="profileç²’åº¦é…ç½®"><a href="#profileç²’åº¦é…ç½®" class="headerlink" title="profileç²’åº¦é…ç½®"></a>profileç²’åº¦é…ç½®</h3><p>å…³äºç²’åº¦çš„é…ç½®å¿…é¡»æ”¾åœ¨<code>bootstrap.yaml</code>æ–‡ä»¶é‡Œé¢</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•åï¼Œæ”¾åœ¨<code>æ™®é€šçš„application.yaml</code>æ–‡ä»¶é‡Œé¢ä¹Ÿå¯ä»¥ç”Ÿæ•ˆ</p><h3 id="namespace-å’Œ-group-è‡ªå®šä¹‰é…ç½®"><a href="#namespace-å’Œ-group-è‡ªå®šä¹‰é…ç½®" class="headerlink" title="namespace å’Œ group è‡ªå®šä¹‰é…ç½®"></a>namespace å’Œ group è‡ªå®šä¹‰é…ç½®</h3><p><strong>namespace</strong>é…ç½®</p><ol><li><p>åˆ›å»ºå‘½åç©ºé—´</p><p><img src="/.io//image-20220325152453581.png" alt="image-20220325152453581"></p></li><li><p>æ·»åŠ é…ç½®åœ¨è‡ªå®šä¹‰å‘½åç©ºé—´ä¸‹</p><p><img src="/.io//image-20220325152617200.png" alt="image-20220325152617200"></p></li><li><p>bootstrap.yamlé…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">      <span class="comment">#é…ç½®å‘½åç©ºé—´</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">7ab3b839-b579-402c-992b-bb2ea46a7172</span></span><br><span class="line">        <span class="comment">#é…ç½®åˆ†ç»„</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">TEST_GROUP</span> </span><br></pre></td></tr></table></figure></li></ol><h3 id="dataid-æ‰©å±•"><a href="#dataid-æ‰©å±•" class="headerlink" title="dataid æ‰©å±•"></a>dataid æ‰©å±•</h3><p>è¿™é‡Œä¸åšè¯¦ç»†ä»‹ç»ï¼Œç”¨åˆ°çš„è¯ï¼Œå»å®˜ç½‘æŸ¥æ€ä¹ˆç”¨</p><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/Nacos-config">å®˜ç½‘</a></p><h3 id="é…ç½®ä¼˜å…ˆçº§"><a href="#é…ç½®ä¼˜å…ˆçº§" class="headerlink" title="é…ç½®ä¼˜å…ˆçº§"></a>é…ç½®ä¼˜å…ˆçº§</h3><p>Spring Cloud Alibaba Nacos Config ç›®å‰æä¾›äº†ä¸‰ç§é…ç½®èƒ½åŠ›ä» Nacos æ‹‰å–ç›¸å…³çš„é…ç½®ã€‚</p><ul><li>A: é€šè¿‡ <code>spring.cloud.nacos.config.shared-configs[n].data-id</code> æ”¯æŒå¤šä¸ªå…±äº« Data Id çš„é…ç½®</li><li>B: é€šè¿‡ <code>spring.cloud.nacos.config.extension-configs[n].data-id</code> çš„æ–¹å¼æ”¯æŒå¤šä¸ªæ‰©å±• Data Id çš„é…ç½®</li><li>C: é€šè¿‡å†…éƒ¨ç›¸å…³è§„åˆ™(åº”ç”¨åã€åº”ç”¨å+ Profile )è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„ Data Id é…ç½®</li></ul><p>å½“ä¸‰ç§æ–¹å¼å…±åŒä½¿ç”¨æ—¶ï¼Œä»–ä»¬çš„ä¸€ä¸ªä¼˜å…ˆçº§å…³ç³»æ˜¯:A &lt; B &lt; C</p><h3 id="å…³é—­nacos-configåŠŸèƒ½"><a href="#å…³é—­nacos-configåŠŸèƒ½" class="headerlink" title="å…³é—­nacos-configåŠŸèƒ½"></a>å…³é—­nacos-configåŠŸèƒ½</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.cloud.nacos.config.enabled</span> = <span class="string">false</span></span><br></pre></td></tr></table></figure><h2 id="nacosé›†ç¾¤"><a href="#nacosé›†ç¾¤" class="headerlink" title="nacosé›†ç¾¤"></a>nacosé›†ç¾¤</h2><h1 id="sentinel"><a href="#sentinel" class="headerlink" title="sentinel"></a>sentinel</h1><h2 id="Sentinelæ§åˆ¶å°"><a href="#Sentinelæ§åˆ¶å°" class="headerlink" title="Sentinelæ§åˆ¶å°"></a>Sentinelæ§åˆ¶å°</h2><p><a href="https://github.com/alibaba/Sentinel/releases">sentinelæ§åˆ¶å°ä¸‹è½½é“¾æ¥</a></p><p>æ§åˆ¶å°å¯åŠ¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æ˜¯8080ç«¯å£</span></span><br><span class="line">java -Dserver.port=8080 -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard.jar</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><p>æ§åˆ¶å°æ˜¯æ‡’åŠ è½½çš„ï¼Œåªæœ‰å½“ä½ è®¿é—®ä¸€æ¬¡åº”ç”¨åï¼Œæ§åˆ¶å°æ‰ä¼šæ˜¾ç¤ºè¯¥å¼•ç”¨çš„ä¿¡æ¯ã€‚</p><h2 id="åŸºæœ¬ä½¿ç”¨-1"><a href="#åŸºæœ¬ä½¿ç”¨-1" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--nacos--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--sentinel--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>application.yaml é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8401</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloudalibaba-sentinel-service</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">0.5</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:9411</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span><span class="string">:8848</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">      <span class="attr">transport:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8719</span> <span class="comment">#å°è¯•ç«¯å£ï¼Œä¼šä»8719å¼€å§‹å°è¯•ï¼Œä¸è¡Œå°±+1</span></span><br><span class="line">        <span class="attr">dashboard:</span> <span class="string">localhost:8080</span> <span class="comment">#é…ç½®æ§åˆ¶å°çš„åœ°å€</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="é™æµè§„åˆ™"><a href="#é™æµè§„åˆ™" class="headerlink" title="é™æµè§„åˆ™"></a>é™æµè§„åˆ™</h2><h2 id="ç†”æ–­é™çº§"><a href="#ç†”æ–­é™çº§" class="headerlink" title="ç†”æ–­é™çº§"></a>ç†”æ–­é™çº§</h2><p>åœ¨æ¡ä»¶æ»¡è¶³åï¼Œä¼šç†”æ–­ï¼Œè¶…è¿‡ç†”æ–­æ—¶é—´åï¼Œä¼šæ…¢æ…¢æ”¾è¡Œã€‚</p><h2 id="çƒ­ç‚¹è§„åˆ™"><a href="#çƒ­ç‚¹è§„åˆ™" class="headerlink" title="çƒ­ç‚¹è§„åˆ™"></a>çƒ­ç‚¹è§„åˆ™</h2><p>éœ€è¦é…ç½®blockerhandlerï¼Œé”™è¯¯ä¿¡æ¯è‡ªå®šä¹‰</p><p>å¦‚æœä¸æ·»åŠ ï¼Œé»˜è®¤æ˜¾ç¤ºçš„æ˜¯ç¨‹åºçš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>åªæœ‰qpsä¸€ç§æ£€éªŒæ–¹å¼ï¼Œæ˜¯æ£€éªŒæ–¹æ³•å‚æ•°çš„æ¬¡æ•°ï¼Œåªè¦å¸¦äº†é‚£ä¸ªå‚æ•°å°±ä¼šè¢«è®¡ç®—è¿›å…¥æ£€éªŒï¼Œç¬¬å‡ ä¸ªå‚æ•°åº”è¯¥æ˜¯é€šè¿‡åœ¨æ–¹æ³•ä¸Šçš„ç”Ÿå‘½é¡ºåºç¡®å®šçš„ã€‚</p><p>å¿…é¡»ä½¿ç”¨<code>@SentinelResource(value = &quot;testHostKey&quot;)</code>,ä¸æ·»åŠ è¿™ä¸ªåœ¨è·¯å¾„ä¸Šæ·»åŠ çƒ­ç‚¹è§„åˆ™ï¼Œä¸ç”Ÿæ•ˆçš„ã€‚</p><p>å‚æ•°æ˜¯ä»0å¼€å§‹</p><p>é™æµä¸å¤„ç†ç¨‹åºå¼‚å¸¸é”™è¯¯ï¼Œä»–åªä¼šå¤„ç†ä¸æ»¡è¶³è§„åˆ™çš„é”™è¯¯ã€‚</p><p>ç†”æ–­å¤„ç†ç¨‹åºå¼‚å¸¸é”™è¯¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/testHostKey&quot;)</span></span><br><span class="line"><span class="meta">@SentinelResource(value = &quot;testHostKey&quot;,blockHandler = &quot;testHostKeyHandler&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testHostKey</span><span class="params">(<span class="meta">@RequestParam(name = &quot;p1&quot;,required = false)</span> String p1,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="meta">@RequestParam(name = &quot;p2&quot;, required = false)</span> String p2)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;testHostKey:&quot;</span> + p1 + <span class="string">&quot;, &quot;</span> + p2);</span><br><span class="line">    <span class="comment">//        int i = 10/0;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;testHostKey&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testHostKeyHandler</span><span class="params">(String p1, String p2, BlockException e)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;testHostKey:&quot;</span> + p1 + <span class="string">&quot;, &quot;</span> + p2);</span><br><span class="line">    System.out.println(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;testHostKeyHandler è‹¦è‹¦&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç³»ç»Ÿè§„åˆ™"><a href="#ç³»ç»Ÿè§„åˆ™" class="headerlink" title="ç³»ç»Ÿè§„åˆ™"></a>ç³»ç»Ÿè§„åˆ™</h2><h2 id="sentinelResource-æ³¨è§£çš„nameå¯ä»¥å’Œè·¯å¾„ç›¸åŒå—"><a href="#sentinelResource-æ³¨è§£çš„nameå¯ä»¥å’Œè·¯å¾„ç›¸åŒå—" class="headerlink" title="@sentinelResource æ³¨è§£çš„nameå¯ä»¥å’Œè·¯å¾„ç›¸åŒå—"></a>@sentinelResource æ³¨è§£çš„nameå¯ä»¥å’Œè·¯å¾„ç›¸åŒå—</h2><p><a href="https://github.com/alibaba/Sentinel/wiki/%E6%B3%A8%E8%A7%A3%E6%94%AF%E6%8C%81">sentinelresourceæ³¨è§£å®˜ç½‘</a></p><p>fallbackï¼Œç›¸å½“äºhystrixä¸­çš„æœåŠ¡é™çº§ï¼Œç”¨äºå¤„ç†ç¨‹åºå¼‚å¸¸æ—¶çš„å…œåº•æ–¹æ³•ã€‚</p><p>blockhandler,å¤„ç†sentinelæ§åˆ¶å°è¿è§„å¼‚å¸¸</p><p>exceptionToIgnore ,ä¼šå¿½ç•¥å¼‚å¸¸ï¼Œå› æ­¤ä¸ä¼šèµ°fallbackæ–¹æ³•ï¼Œä½†æ˜¯ä»ç„¶ä¼šè¢«è®¡ç®—è¿›å…¥æ§åˆ¶å°è§„åˆ™ä¸­ã€‚</p><blockquote><p>æƒ…å†µä¸€ï¼š</p></blockquote><p>å½“é…ç½®äº†fallback å’Œ blockhandler,ä¸¤ç§é…ç½®åŒæ—¶ç”Ÿæ•ˆï¼Œæœ€åæ˜¾ç¤ºçš„æ˜¯blockhandlerçš„é…ç½®ã€‚</p><h2 id="sentinel-æ•´åˆ-rest-balancer"><a href="#sentinel-æ•´åˆ-rest-balancer" class="headerlink" title="sentinel æ•´åˆ rest+balancer"></a>sentinel æ•´åˆ rest+balancer</h2><p>å› ä¸ºribbonç°åœ¨å·²ç»è¢«å¼ƒç”¨ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨rest+balancer,</p><p>è¿™é‡Œä½¿ç”¨å’Œdemoä¸­çš„æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œé‡ç‚¹çœ‹ä¸‹æ¥ä¸‹æ¥æ•´åˆopenfeignçš„é…ç½®ã€‚</p><h2 id="sentinel-æ•´åˆopenFeign"><a href="#sentinel-æ•´åˆopenFeign" class="headerlink" title="sentinel æ•´åˆopenFeign"></a>sentinel æ•´åˆopenFeign</h2><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel">å®˜ç½‘</a></p><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br></pre></td></tr></table></figure></li><li><p>application.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># feign å¼€å¯å¯¹ sentinel çš„æ”¯æŒ</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h2 id="è§„åˆ™æŒä¹…åŒ–"><a href="#è§„åˆ™æŒä¹…åŒ–" class="headerlink" title="è§„åˆ™æŒä¹…åŒ–"></a>è§„åˆ™æŒä¹…åŒ–</h2><p>ä¹‹å‰çš„é™æµè§„åˆ™æ˜¯ä¸´æ—¶çš„ï¼Œåº”ç”¨é‡å¯åï¼Œé…ç½®çš„è§„åˆ™å°±ä¼šæ¶ˆå¤±ã€‚</p><p>å®˜æ–¹æ¨èæŒä¹…åŒ–åˆ°nacosä¸­ã€‚</p><p>è¿™ä¸ªæŒä¹…åŒ–ä¸æ˜¯sentinelä¸­çš„é…ç½®ä¿å­˜åˆ°nacosä¸­ï¼Œè€Œæ˜¯åœ¨nacosä¸­ä¿å­˜ä¿¡æ¯ï¼Œsentinelå»è¯»å–ï¼Œæ‰€ä»¥åœ¨sentinelä¸­å¯¹è§„åˆ™çš„ä¿®æ”¹ä¸ä¼šæŒä¿å­˜åˆ°nacosä¸­ã€‚</p><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.csp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sentinel-datasource-nacos<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>application.yaml é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8401</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloudalibaba-sentinel-service</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">0.5</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:9411</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span><span class="string">:8848</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">      <span class="attr">transport:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8719</span></span><br><span class="line">        <span class="attr">dashboard:</span> <span class="string">localhost:8080</span></span><br><span class="line">      <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">ds1:</span></span><br><span class="line">          <span class="attr">nacos:</span></span><br><span class="line">            <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span><span class="string">:8848</span></span><br><span class="line">            <span class="attr">dataId:</span> <span class="string">$&#123;spring.application.name&#125;</span></span><br><span class="line">            <span class="attr">groupId:</span> <span class="string">DEFAULT_GROUP</span></span><br><span class="line">            <span class="attr">data-type:</span> <span class="string">json</span></span><br><span class="line">            <span class="attr">rule-type:</span> <span class="string">flow</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨nacosé…ç½®ä¸­å¿ƒä¸­æ·»åŠ é…ç½®ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶çš„dataId,groupId,æ–‡ä»¶ç±»å‹å’Œyamlé…ç½®æ–‡ä»¶ä¸­çš„ç›¸åŒã€‚</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">         <span class="attr">&quot;resource&quot;</span>:<span class="string">&quot;/rateLimit/byUrl&quot;</span>,</span><br><span class="line">         <span class="attr">&quot;limitApp&quot;</span>:<span class="string">&quot;default&quot;</span>,</span><br><span class="line">         <span class="attr">&quot;grade&quot;</span>:<span class="number">1</span>,</span><br><span class="line">         <span class="attr">&quot;count&quot;</span>:<span class="number">1</span>,</span><br><span class="line">         <span class="attr">&quot;strategy&quot;</span>:<span class="number">0</span>,</span><br><span class="line">         <span class="attr">&quot;controlBehavior&quot;</span>:<span class="number">0</span>,</span><br><span class="line">         <span class="attr">&quot;clusterMode&quot;</span>:<span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>é…ç½®ä¿¡æ¯çš„è§£é‡Šï¼š</p><p>resource: èµ„æºåç§°<br> limitApp: æ¥æºåº”ç”¨<br> grade: é˜ˆå€¼ç±»å‹,0è¡¨ç¤ºçº¿ç¨‹,1è¡¨ç¤ºQPS<br> count: å•æœºé˜ˆå€¼<br> strategy: æµæ§æ¨¡å¼,0è¡¨ç¤ºç›´æ¥,1è¡¨ç¤ºå…³è”,2è¡¨ç¤ºé“¾è·¯<br> controlBehavior: æµæ§æ•ˆæœ,0è¡¨ç¤ºå¿«é€Ÿå¤±è´¥,1è¡¨ç¤ºWarm Up,2è¡¨ç¤ºæ’é˜Ÿç­‰å¾…<br> clusterMode: æ˜¯å¦é›†ç¾¤</p><h1 id="seata"><a href="#seata" class="headerlink" title="seata"></a>seata</h1><p>alibaba è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„ ä¸€å¥—æ¡†æ¶ã€‚</p><p><a href="https://seata.io/zh-cn/docs/user/quickstart.html">seataå®˜ç½‘</a></p><p><a href="https://www.jb51.net/article/202333.htm">seata1.4ä½¿ç”¨æ•™ç¨‹</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
          <category> SpringCloudAlibaba </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloudAlibaba </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeperä½¿ç”¨è®°å½•</title>
      <link href="/2022/03/10/Zookeeper%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/03/10/Zookeeper%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€äº†è§£å’Œå·¥å…·ä½¿ç”¨"><a href="#åŸºç¡€äº†è§£å’Œå·¥å…·ä½¿ç”¨" class="headerlink" title="åŸºç¡€äº†è§£å’Œå·¥å…·ä½¿ç”¨"></a>åŸºç¡€äº†è§£å’Œå·¥å…·ä½¿ç”¨</h1><blockquote><p>pretty zooå·¥å…·ä½¿ç”¨</p></blockquote><p><a href="https://github.com/vran-dev/PrettyZoo">PrettyZooä¸‹è½½åœ°å€</a></p><blockquote><p>çŸ¥è¯†ç‚¹</p></blockquote><ul><li>Zookeeperçš„èŠ‚ç‚¹æœ‰å£°æ˜å‘¨æœŸï¼Œä¸èŠ‚ç‚¹ç±»å‹æœ‰å…³</li><li>æœ‰å››ç§èŠ‚ç‚¹ç±»å‹</li></ul>]]></content>
      
      
      <categories>
          
          <category> Zookeeper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloudå­¦ä¹ è®°å½•</title>
      <link href="/2022/03/04/SpringCloud%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/03/04/SpringCloud%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰ç½®åŸºç¡€"><a href="#å‰ç½®åŸºç¡€" class="headerlink" title="å‰ç½®åŸºç¡€"></a>å‰ç½®åŸºç¡€</h1><h2 id="springbootå’Œspringcloudç‰ˆæœ¬åŒ¹é…"><a href="#springbootå’Œspringcloudç‰ˆæœ¬åŒ¹é…" class="headerlink" title="springbootå’Œspringcloudç‰ˆæœ¬åŒ¹é…"></a>springbootå’Œspringcloudç‰ˆæœ¬åŒ¹é…</h2><p><a href="https://start.spring.io/actuator/info">æŸ¥è¯¢ç½‘ç«™</a></p><p>è·å–jsonå­—ç¬¦ä¸²åä½¿ç”¨å·¥å…·è¿›è¡Œæ ¼å¼åŒ–</p><h2 id="ç‰ˆæœ¬é€‰æ‹©"><a href="#ç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="ç‰ˆæœ¬é€‰æ‹©"></a>ç‰ˆæœ¬é€‰æ‹©</h2><p><strong>é€‰æ‹©å®˜ç½‘æ¨èçš„</strong></p><p> <img src="/.io//image-20220304152136541.png" alt="image-20220304152136541"></p><p> ä½¿ç”¨å®˜ç½‘æ¨èçš„ç‰ˆæœ¬</p><p> <img src="/.io//image-20220304152152635.png" alt="image-20220304152152635"></p><h2 id="springcloudç»„ä»¶"><a href="#springcloudç»„ä»¶" class="headerlink" title="springcloudç»„ä»¶"></a>springcloudç»„ä»¶</h2><ul><li>æœåŠ¡æ³¨å†Œä¸å‘ç°<ul><li>EUREKA</li></ul></li></ul><h2 id="springcloudä¸­æ–‡ç½‘"><a href="#springcloudä¸­æ–‡ç½‘" class="headerlink" title="springcloudä¸­æ–‡ç½‘"></a>springcloudä¸­æ–‡ç½‘</h2><p><a href="https://www.springcloud.cc/">spirngcloud</a></p><h1 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a>Eureka</h1><ol><li>ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†ï¼Ÿ</li></ol><ul><li>eurekaä¸­application å­—æ®µä¸ æœåŠ¡çš„application name  ç›¸åŒ</li></ul><p><img src="/.io//image-20220308112955737.png" alt="image-20220308112955737"></p><h2 id="eurekaé›†ç¾¤"><a href="#eurekaé›†ç¾¤" class="headerlink" title="eurekaé›†ç¾¤"></a>eurekaé›†ç¾¤</h2><ul><li><p>eurekaæœåŠ¡å™¨ä¹‹é—´ç›¸äº’æ³¨å†Œ</p></li><li><p>æœåŠ¡åœ¨å¤šä¸ªeurekaä¸Šæ³¨å†Œ</p></li></ul><h2 id="å¾®æœåŠ¡é›†ç¾¤"><a href="#å¾®æœåŠ¡é›†ç¾¤" class="headerlink" title="å¾®æœåŠ¡é›†ç¾¤"></a>å¾®æœåŠ¡é›†ç¾¤</h2><ul><li>æœåŠ¡åç§°ç›¸åŒï¼ŒæœåŠ¡å™¨æˆ–è€…ç«¯å£ä¸åŒ</li><li>æ¶ˆè´¹è€…ä½¿ç”¨æœåŠ¡åç§°å»è¯·æ±‚</li><li>restTemplate ä½œè´Ÿè½½å‡è¡¡</li></ul><h2 id="actuator-æœåŠ¡ä¿¡æ¯æ˜¾ç¤º"><a href="#actuator-æœåŠ¡ä¿¡æ¯æ˜¾ç¤º" class="headerlink" title="actuator æœåŠ¡ä¿¡æ¯æ˜¾ç¤º"></a>actuator æœåŠ¡ä¿¡æ¯æ˜¾ç¤º</h2><ul><li><p>ä¸»æœºåç§°çš„ä¿®æ”¹</p><ul><li><p>é»˜è®¤æ˜¾ç¤ºæœºå™¨åç§°+é¡¹ç›®åç§°+ç«¯å£å·</p></li><li><p>```yml<br>instance-id: payment8001</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* è®¿é—®ä¿¡æ¯æœ‰ipåœ°å€</span><br><span class="line"></span><br><span class="line">  * ```yml</span><br><span class="line">    prefer-ip-address: true</span><br></pre></td></tr></table></figure></li><li><p> <img src="/.io//image-20220309115309930.png" alt="image-20220309115309930"></p></li></ul></li></ul><h2 id="è·å–è–‡æœåŠ¡ä¿¡æ¯"><a href="#è·å–è–‡æœåŠ¡ä¿¡æ¯" class="headerlink" title="è·å–è–‡æœåŠ¡ä¿¡æ¯"></a>è·å–è–‡æœåŠ¡ä¿¡æ¯</h2><p>ä¸»å¯åŠ¨ç±»ä¸Šæ·»åŠ  @EnableDiscoveryClientæ³¨è§£</p><p>è·å–æœåŠ¡ä¿¡æ¯ï¼šä½¿ç”¨import org.springframework.cloud.client.discovery.DiscoveryClient;è¿™ä¸ªç±»</p><p>è·å–å…·ä½“æœåŠ¡å®ä¾‹ä¿¡æ¯ï¼šä½¿ç”¨DiscoveryClient.getinstances</p><h2 id="Eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶"><a href="#Eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" class="headerlink" title="Eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶"></a>Eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</h2><ul><li><p>è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶çš„åŸå› </p><ul><li>é˜²æ­¢å¾®æœåŠ¡å› ä¸ºä¸eurekaæœåŠ¡å™¨æš‚æ—¶ä¸è¿é€šï¼Œè€Œå¯¼è‡´eurekaæœåŠ¡å™¨å°†å¾®æœåŠ¡åˆ é™¤</li><li>å®å¯ä¿ç•™é”™è¯¯çš„ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šç›²ç›®æ³¨é”€æœåŠ¡</li></ul></li><li><p>é…ç½®</p><ul><li><p>eurekaæœåŠ¡ç«¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">enable-self-preservation:</span> <span class="literal">false</span> <span class="comment"># å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</span></span><br><span class="line"><span class="attr">eviction-interval-timer-in-ms:</span> <span class="number">2000</span> <span class="comment">#è¶…æ—¶2såé©±é€æœåŠ¡</span></span><br></pre></td></tr></table></figure></li><li><p>eurekaå®¢æˆ·ç«¯</p></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lease-renewal-interval-in-seconds:</span> <span class="number">2</span> <span class="comment"># å‘é€å¿ƒè·³çš„é—´éš”ï¼Œæ¯2ç§’å‘é€ä¸€æ¬¡</span></span><br><span class="line"><span class="attr">lease-expiration-duration-in-seconds:</span> <span class="number">9</span> <span class="comment">#eureka æœ€åä¸€æ¬¡æ”¶åˆ°å¿ƒè·³ï¼Œä¹‹åçš„ç­‰å¾…æ—¶é—´</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><h2 id="linux-å®‰è£…zookeeper"><a href="#linux-å®‰è£…zookeeper" class="headerlink" title="linux å®‰è£…zookeeper"></a>linux å®‰è£…zookeeper</h2><p><strong>é…ç½®æ–‡ä»¶è¯´æ˜</strong></p><p> <img src="/.io//image-20220309154802184.png" alt="image-20220309154802184"></p><h2 id="å®‰è£…zookeeperé‡åˆ°çš„é—®é¢˜"><a href="#å®‰è£…zookeeperé‡åˆ°çš„é—®é¢˜" class="headerlink" title="å®‰è£…zookeeperé‡åˆ°çš„é—®é¢˜"></a>å®‰è£…zookeeperé‡åˆ°çš„é—®é¢˜</h2><ol><li><p>æœåŠ¡å¯åŠ¨æˆåŠŸï¼ŒæŸ¥çœ‹çŠ¶æ€å´æ˜¯å¤±è´¥çŠ¶æ€ï¼Œå®¢æˆ·ç«¯ä¹Ÿè¿æ¥ä¸ä¸Š</p><blockquote><p>åŸå› æ˜¯ï¼šæ²¡æœ‰å®‰è£…jdkç¯å¢ƒ</p></blockquote></li></ol><h2 id="springcloudæ•´åˆzookeeperé‡åˆ°çš„é—®é¢˜"><a href="#springcloudæ•´åˆzookeeperé‡åˆ°çš„é—®é¢˜" class="headerlink" title="springcloudæ•´åˆzookeeperé‡åˆ°çš„é—®é¢˜"></a>springcloudæ•´åˆzookeeperé‡åˆ°çš„é—®é¢˜</h2><p>zookeeperç‰ˆæœ¬ä¸jaråŒ…ä¸­å¼•ç”¨çš„ç‰ˆæœ¬ä¸å…¼å®¹</p><blockquote><p>è§£å†³æ–¹æ³•ï¼›æ’é™¤ä¾èµ–ï¼Œæ‰‹åŠ¨å¼•å…¥é€‚åˆç‰ˆæœ¬çš„ä¾èµ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zookeeper-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--å…ˆæ’é™¤è‡ªå¸¦çš„zookeeper3.5.3--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="zookeeper-ç­–ç•¥"><a href="#zookeeper-ç­–ç•¥" class="headerlink" title="zookeeper ç­–ç•¥"></a>zookeeper ç­–ç•¥</h2><ul><li>zookeeperèŠ‚ç‚¹æ˜¯ä¸´æ—¶èŠ‚ç‚¹</li><li>è–‡æœåŠ¡æŒ‚äº†ï¼Œ ä¸€å®šæ—¶é—´å†…ä¼šä¿ç•™</li></ul><h2 id="zookeeperé›†ç¾¤"><a href="#zookeeperé›†ç¾¤" class="headerlink" title="zookeeperé›†ç¾¤"></a>zookeeperé›†ç¾¤</h2><blockquote><p>é…ç½®è¿‡ç¨‹</p></blockquote><h1 id="consul"><a href="#consul" class="headerlink" title="consul"></a>consul</h1><h2 id="consul-ä¸­æ–‡ç½‘"><a href="#consul-ä¸­æ–‡ç½‘" class="headerlink" title="consul ä¸­æ–‡ç½‘"></a>consul ä¸­æ–‡ç½‘</h2><ul><li><a href="https://www.springcloud.cc/spring-cloud-consul.html">consul ä¸­æ–‡ç½‘</a></li></ul><h2 id="consul-å®‰è£…"><a href="#consul-å®‰è£…" class="headerlink" title="consul  å®‰è£…"></a>consul  å®‰è£…</h2><p><a href="https://www.consul.io/downloads">ä¸‹è½½åœ°å€</a></p><blockquote><p>è§£å‹å‘½ä»¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip consul_1.11.4_linux_amd64.zip</span><br></pre></td></tr></table></figure><blockquote><p>å¯åŠ¨å‘½ä»¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">consul agent -data-dir=/usr/<span class="built_in">local</span>/software/consul-1.11.4/data -<span class="built_in">bind</span>=192.168.112.128 -server -bootstrap -client -ui -client=0.0.0.0 </span><br><span class="line"><span class="comment">##</span></span><br><span class="line">consul agent -data-dir=/usr/<span class="built_in">local</span>/software/consul-1.11.4/data -<span class="built_in">bind</span>=192.168.112.128 -client=0.0.0.0 </span><br><span class="line"><span class="comment">##</span></span><br><span class="line">./consul agent -dev -ui -node=consul-dev -client=192.168.112.128 -server</span><br><span class="line"><span class="comment">##</span></span><br><span class="line">./consul agent -dev -ui -node=consul-dev -client=0.0.0.0 -server</span><br></pre></td></tr></table></figure><p>-data-dir consulæ•°æ®ç›®å½•<br>-bind ç»‘å®šipåœ°å€<br>-server ä»£è¡¨ä»¥æœåŠ¡çš„æ–¹å¼å¯åŠ¨<br>-bootstrap æŒ‡å®šè‡ªå·±ä¸ºleaderè€Œä¸éœ€è¦é€‰ä¸¾<br>-ui å¯åŠ¨ä¸€ä¸ªå†…ç½®ç®¡ç†çš„webç•Œé¢<br>-client æŒ‡å®šå®¢æˆ·ç«¯å¯ä»¥è®¿é—®çš„IPã€‚è®¾ç½®ä¸º0.0.0.0åˆ™ä»»æ„è®¿é—®ï¼Œå¦åˆ™é»˜è®¤æœ¬æœºæ‰å¯ä»¥è®¿é—®ã€‚</p><h2 id="æ•´åˆconsulé‡åˆ°çš„é—®é¢˜"><a href="#æ•´åˆconsulé‡åˆ°çš„é—®é¢˜" class="headerlink" title="æ•´åˆconsulé‡åˆ°çš„é—®é¢˜"></a>æ•´åˆconsulé‡åˆ°çš„é—®é¢˜</h2><h3 id="at-lease-one-health-check-on-one-instance-is-failing"><a href="#at-lease-one-health-check-on-one-instance-is-failing" class="headerlink" title="at lease one health check on one instance is failing"></a>at lease one health check on one instance is failing</h3><blockquote><p>é—®é¢˜æè¿°</p></blockquote><p> <img src="/.io//image-20220311104216161.png" alt="image-20220311104216161"></p><p>é”™è¯¯</p><p><img src="/.io//image-20220311110448714.png" alt="image-20220311110448714"></p><blockquote><p><a href="https://blog.csdn.net/qq_2662385590/article/details/107883199">è§£å†³æ–¹æ¡ˆ</a></p></blockquote><p>åœ¨application.yaml æ–‡ä»¶ä¸­å¼€å¯å¿ƒè·³ï¼Œé»˜è®¤æ˜¯å…³é—­çš„</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-provider-consul</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">consul:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8500</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">service-name:</span> <span class="string">$&#123;spring.application.name&#125;</span></span><br><span class="line">        <span class="comment">#hostname: localhost</span></span><br><span class="line">        <span class="attr">heartbeat:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#å¼€å¯å¿ƒè·³</span></span><br></pre></td></tr></table></figure><h2 id="consul-é…ç½®è¯¦è§£"><a href="#consul-é…ç½®è¯¦è§£" class="headerlink" title="consul é…ç½®è¯¦è§£"></a>consul é…ç½®è¯¦è§£</h2><p><a href="https://my.oschina.net/suveng/blog/4768711">é…ç½®site</a></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">consul:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.9</span><span class="number">.233</span> <span class="comment"># ip</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8500</span> <span class="comment"># ç«¯å£</span></span><br><span class="line">      <span class="attr">discovery:</span> <span class="comment"># consul æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">        <span class="attr">service-name:</span> <span class="string">zuul-service</span> <span class="comment">#æ³¨å†Œåœ¨consulä¸Šé¢çš„åå­—ï¼Œåœ¨consulçš„è°ƒç”¨ä¸­ï¼Œæ˜¯é€šè¿‡æ­¤åå­—è°ƒç”¨çš„</span></span><br><span class="line">        <span class="attr">register-health-check:</span> <span class="literal">true</span> <span class="comment">#å¥åº·æ£€æŸ¥ï¼Œä¿è¯æœåŠ¡å¤„äºå¯åŠ¨çŠ¶æ€ï¼Œå»ºè®®å¼€å¯</span></span><br><span class="line">        <span class="attr">instance-id:</span> <span class="string">$&#123;spring.application.name&#125;:$&#123;spring.cloud.client.ip-address&#125;</span> <span class="comment"># æœåŠ¡id</span></span><br><span class="line">        <span class="attr">health-check-url:</span> <span class="string">http://$&#123;spring.cloud.client.ip-address&#125;:$&#123;server.port&#125;/actuator/health</span> <span class="comment"># å¥åº·æ£€æŸ¥çš„URI</span></span><br><span class="line">        <span class="attr">tags:</span> <span class="comment"># æ ‡ç­¾,è¿™ä¸ªå±æ€§æ˜¯ä¸ªlist,æ‰€ä»¥ç”¨ymlçš„listçš„æ ¼å¼æ³¨å…¥</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">gateway</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">common</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">other</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">firstboot</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># æœåŠ¡å‘ç°æ˜¯å¦å¯åŠ¨</span></span><br><span class="line">        <span class="attr">management-tags:</span> <span class="comment"># æ³¨å†Œç®¡ç†æœåŠ¡æ—¶ä½¿ç”¨çš„æ ‡è®°,é»˜è®¤æ˜¯management</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">sss</span></span><br><span class="line">        <span class="comment"># health-check-path: /health/check # è¦è°ƒç”¨ä»¥è¿›è¡Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥çš„å¤‡ç”¨æœåŠ¡å™¨è·¯å¾„,å·²ç»ä½¿ç”¨health-check-urlè¦†ç›–äº†,æ‰€ä»¥è¿™å±æ€§æš‚æ—¶æ‰¾ä¸åˆ°æœ‰ä»€ä¹ˆç”¨å¤„</span></span><br><span class="line">        <span class="attr">health-check-interval:</span> <span class="string">10s</span> <span class="comment"># å­—ç¬¦ä¸²,æ‰§è¡Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥çš„é¢‘ç‡ï¼ˆä¾‹å¦‚10ç§’ï¼‰ï¼Œé»˜è®¤ä¸º10ç§’ã€‚</span></span><br><span class="line">        <span class="attr">health-check-timeout:</span> <span class="string">10s</span> <span class="comment"># å¥åº·æ£€æŸ¥è¶…æ—¶ï¼ˆä¾‹å¦‚10ç§’ï¼‰ã€‚</span></span><br><span class="line">        <span class="attr">health-check-critical-timeout:</span> <span class="string">30s</span> <span class="comment"># æ³¨é”€å…³é”®æœåŠ¡çš„æ—¶é—´, è¦æ±‚consulçš„ç‰ˆæœ¬åœ¨1.0.7æˆ–è€…æ›´é«˜</span></span><br><span class="line">        <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment">#  ip åå¥½; è¿™ä¸ªå¿…é¡»é… åœ¨æ³¨å†Œè¿‡ç¨‹ä¸­ä½¿ç”¨ipåœ°å€è€Œä¸æ˜¯ä¸»æœºå</span></span><br><span class="line">        <span class="attr">prefer-agent-address:</span> <span class="literal">false</span> <span class="comment"># æ¥æº,æˆ‘ä»¬å°†å¦‚ä½•ç¡®å®šä½¿ç”¨çš„åœ°å€</span></span><br><span class="line">        <span class="comment"># ip-address: 192.168.9.233 # è®¿é—®æœåŠ¡æ—¶è¦ä½¿ç”¨çš„IPåœ°å€ï¼ˆè¿˜å¿…é¡»è®¾ç½®è¦ä½¿ç”¨çš„é¦–é€‰IPåœ°å€ï¼‰</span></span><br><span class="line">        <span class="comment"># hostname: # Hostname to use when accessing server</span></span><br><span class="line">        <span class="comment"># port: 8500 # Port to register the service under (defaults to listening port)</span></span><br><span class="line">        <span class="comment"># management-port: # Port to register the management service under (defaults to management port)</span></span><br><span class="line">        <span class="comment"># catalog-services-watch-delay: 1000 # æŸ¥çœ‹consulçš„æœåŠ¡æ›´æ–°é—´éš”,é»˜è®¤1s</span></span><br><span class="line">        <span class="comment"># catalog-services-watch-timeout: 2 # æŸ¥çœ‹consulæœåŠ¡æ›´æ–°é—´éš”çš„è¶…æ—¶æ—¶é—´, é»˜è®¤ä¸¤ç§’</span></span><br><span class="line">        <span class="attr">query-passing:</span> <span class="literal">true</span> <span class="comment"># è¿™æ¨åŠ¨å¥åº·æ£€æŸ¥ pass ä¼ é€’åˆ°æœåŠ¡å™¨ã€‚</span></span><br><span class="line">        <span class="attr">deregister:</span> <span class="literal">false</span> <span class="comment"># åœ¨consulç¦ç”¨è‡ªåŠ¨æ³¨é”€ç™»è®°æœåŠ¡ã€‚</span></span><br><span class="line">        <span class="attr">fail-fast:</span> <span class="literal">true</span> <span class="comment"># *æœåŠ¡ç™»è®°æœŸé—´æŠ›å‡ºå¼‚å¸¸å¦‚æœè¿™æ˜¯çœŸçš„,å¦åˆ™,æ—¥å¿—è­¦å‘Š(é»˜è®¤å€¼ä¸ºtrue)ã€‚</span></span><br><span class="line">        <span class="comment"># health-check-tls-skip-verify: true # è·³è¿‡è¯ä¹¦æ ¡éªŒ, å¦‚æœä¸æ˜¯åˆ™è¿›è¡Œè¯ä¹¦æ ¡éªŒ</span></span><br><span class="line">      <span class="attr">config:</span>   <span class="comment"># consul é…ç½®ä¸­å¿ƒ</span></span><br><span class="line">        <span class="attr">prefix:</span> <span class="string">config</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">format:</span> <span class="string">YAML</span></span><br><span class="line">        <span class="attr">data-key:</span> <span class="string">settings.yml</span></span><br></pre></td></tr></table></figure><h1 id="Ribbon"><a href="#Ribbon" class="headerlink" title="Ribbon"></a>Ribbon</h1><blockquote><p>è‡ªSpringCloud 2020èµ·ï¼Œå·²ç»èˆå¼ƒäº†ribbon</p><p>ä½¿ç”¨loadbalancer ä»£æ›¿</p><p>2020ç‰ˆæœ¬ä¹‹åä½¿ç”¨ribbonï¼Œä¼šæŠ¥æ²¡æœ‰åˆå§‹åŒ–æœåŠ¡ çš„é”™è¯¯ï¼Œå¼•å…¥ä¾èµ–å°±ä¼šæŠ¥é”™</p></blockquote><ul><li>ä¾èµ–</li><li>restTemplate çš„ä½¿ç”¨</li><li>è´Ÿè½½å‡è¡¡ç­–ç•¥</li></ul><h2 id="ä½¿ç”¨é—®é¢˜"><a href="#ä½¿ç”¨é—®é¢˜" class="headerlink" title="ä½¿ç”¨é—®é¢˜"></a>ä½¿ç”¨é—®é¢˜</h2><ol><li><p>java.lang.IllegalStateException: No instances available for CLOUD-PAYMENT-SERVICE</p><p><img src="/.io//image-20220314095953525.png" alt="image-20220314095953525"></p><blockquote><p>åŸå› æ˜¯ä½¿ç”¨çš„æ˜¯2020ç‰ˆåŠä¹‹åçš„springcloudï¼Œribbonå·²ç»è¢«æ‘’å¼ƒï¼Œæ¨èä½¿ç”¨loadbalancer</p></blockquote></li></ol><h2 id="Irule-ç»„ä»¶"><a href="#Irule-ç»„ä»¶" class="headerlink" title="Irule ç»„ä»¶"></a>Irule ç»„ä»¶</h2><h3 id="è§„åˆ™æ›¿æ¢"><a href="#è§„åˆ™æ›¿æ¢" class="headerlink" title="è§„åˆ™æ›¿æ¢"></a>è§„åˆ™æ›¿æ¢</h3><ul><li><p>æ·»åŠ è´Ÿè½½å‡è¡¡è§„åˆ™é…ç½®ç±»ï¼ˆè¿™ä¸ªç±»ä¸èƒ½æ·»åŠ åœ¨ä¸»å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ä¸‹ï¼‰</p></li><li><p>åœ¨ä¸»å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨é‡Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RibbonClient(name = &quot;CLOUD-PAYMENT-SERVICE&quot;, configuration = MySelfRule.class)</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="è‡ªå®šä¹‰è§„åˆ™ç®—æ³•"><a href="#è‡ªå®šä¹‰è§„åˆ™ç®—æ³•" class="headerlink" title="è‡ªå®šä¹‰è§„åˆ™ç®—æ³•"></a>è‡ªå®šä¹‰è§„åˆ™ç®—æ³•</h3><h1 id="Loadbalancer"><a href="#Loadbalancer" class="headerlink" title="Loadbalancer"></a>Loadbalancer</h1><blockquote><p>springcloud 2020 åæ›¿æ¢ribbon</p></blockquote><h2 id="ä¿®æ”¹è§„åˆ™"><a href="#ä¿®æ”¹è§„åˆ™" class="headerlink" title="ä¿®æ”¹è§„åˆ™"></a>ä¿®æ”¹è§„åˆ™</h2><ol><li><p>åˆ›å»ºè§„åˆ™é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ªç±»ä¸æ·»åŠ @configurationæ³¨è§£</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªç±»å¯ä»¥æ”¾åœ¨ä¸»å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶è‡ªåŒ…ä¸‹ï¼ˆribbonä¸å…è®¸ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomLoadBalancerConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ReactorLoadBalancer&lt;ServiceInstance&gt; <span class="title">reactorLoadBalancer</span><span class="params">(Environment environment,</span></span></span><br><span class="line"><span class="params"><span class="function">                                                                    LoadBalancerClientFactory loadBalancerClientFactory)</span> </span>&#123;</span><br><span class="line">        String name = environment.getProperty(loadBalancerClientFactory.PROPERTY_NAME);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RandomLoadBalancer(</span><br><span class="line">                loadBalancerClientFactory.getLazyProvider(name, ServiceInstanceListSupplier.class),name</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†é…ç½®ç±»è®¾ç½®ç»™ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„é…ç½®ç±»é‡ŒrestTemplate</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@LoadBalancerClient(name = &quot;CLOUD-PAYMENT-SERVICE&quot;, configuration = CustomLoadBalancerConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationContextConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿™é‡Œå°±å°†è´Ÿè½½å‡è¡¡è§„åˆ™ä»é»˜è®¤çš„è½®è¯¢ä¿®æ”¹ä¸ºrandomRule</p></li></ol><h1 id="OpenFeign"><a href="#OpenFeign" class="headerlink" title="OpenFeign"></a>OpenFeign</h1><blockquote><p>å®˜ç½‘ï¼š <a href="https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/#feign-logging">https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/#feign-logging</a></p></blockquote><h2 id="åŸºæœ¬æ•´åˆä½¿ç”¨"><a href="#åŸºæœ¬æ•´åˆä½¿ç”¨" class="headerlink" title="åŸºæœ¬æ•´åˆä½¿ç”¨"></a>åŸºæœ¬æ•´åˆä½¿ç”¨</h2><h2 id="è¶…æ—¶æ§åˆ¶"><a href="#è¶…æ—¶æ§åˆ¶" class="headerlink" title="è¶…æ—¶æ§åˆ¶"></a>è¶…æ—¶æ§åˆ¶</h2><blockquote><p>é»˜è®¤åªç­‰å¾…1ç§’ï¼Œè¶…æ—¶ä¼šæŠ¥é”™</p></blockquote><p>2020ç‰ˆopenfeignè¶…æ—¶é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># è¿™é‡Œå°±æ˜¯æŒ‡çš„æ‰€æœ‰è¢«åŠ è½½çš„é»˜è®¤FeignClientå®ç°çš„æœåŠ¡é…ç½®éƒ½ç”Ÿæ•ˆ</span></span><br><span class="line">        <span class="attr">connectTimeout:</span> <span class="number">1000</span></span><br><span class="line">        <span class="attr">readTimeout:</span> <span class="number">2000</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">CLOUD-PAYMENT-SERVICE:</span> <span class="comment">#å¯¹å•ä¸ªæœåŠ¡FeignClientçš„é…ç½®</span></span><br><span class="line">        <span class="attr">connectTimeout:</span> <span class="number">1000</span></span><br><span class="line">        <span class="attr">readTimeout:</span> <span class="number">5000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ‰“å°æ—¥å¿—"><a href="#æ‰“å°æ—¥å¿—" class="headerlink" title="æ‰“å°æ—¥å¿—"></a>æ‰“å°æ—¥å¿—</h2><blockquote><p>yaml ä¸­çš„é…ç½®</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å¯æ—¥å¿—æ‰“å°</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.wangzhe.springcloud.service.PaymentFeign:</span> <span class="string">debug</span></span><br><span class="line"><span class="comment"># è®¾ç½®æ‰“å°çº§åˆ«</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">CLOUD-PAYMENT-SERVICE:</span></span><br><span class="line">        <span class="attr">connectTimeout:</span> <span class="number">1000</span></span><br><span class="line">        <span class="attr">readTimeout:</span> <span class="number">5000</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">BASIC</span> <span class="comment">#åªæ‰“å°è¯·æ±‚çš„ä¸€äº›ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><blockquote><p>æ—¥å¿—çº§åˆ«ä¿¡æ¯</p></blockquote><ul><li><code>NONE</code>, ä¸è®°å½•ï¼ˆ<strong>é»˜è®¤</strong>ï¼‰ã€‚</li><li><code>BASIC</code>, åªè®°å½•è¯·æ±‚æ–¹æ³•å’Œ URL ä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´ã€‚</li><li><code>HEADERS</code>, è®°å½•åŸºæœ¬ä¿¡æ¯ä»¥åŠè¯·æ±‚å’Œå“åº”æ ‡å¤´ã€‚</li><li><code>FULL</code>, è®°å½•è¯·æ±‚å’Œå“åº”çš„æ ‡å¤´ã€æ­£æ–‡å’Œå…ƒæ•°æ®ã€‚</li></ul><h1 id="Hystrix"><a href="#Hystrix" class="headerlink" title="Hystrix"></a>Hystrix</h1><h2 id="æœåŠ¡é™çº§"><a href="#æœåŠ¡é™çº§" class="headerlink" title="æœåŠ¡é™çº§"></a>æœåŠ¡é™çº§</h2><blockquote><p>æœåŠ¡é™çº§ä¸€èˆ¬æ”¾åœ¨å®¢æˆ·ç«¯ï¼Œå½“ç„¶æ˜¯å¯ä»¥æ”¾åœ¨æœåŠ¡ç«¯çš„</p></blockquote><ul><li>å½“å‘ç”ŸæœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œä½¿ç”¨å…œåº•æ–¹æ¡ˆ<ul><li>æœåŠ¡å™¨è¶…æ—¶</li><li>æœåŠ¡å™¨å¼‚å¸¸é”™è¯¯</li><li>æœåŠ¡å™¨å®•æœº</li><li>æœåŠ¡ç†”æ–­</li></ul></li></ul><blockquote><p>æœåŠ¡æä¾›è€… ç¼–ç é…ç½®</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ä¸»å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableHystrix</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@EnableHystrix</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProviderHystrixMain8001</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ProviderHystrixMain8001.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨é™çº§æœåŠ¡ä¸Šæ·»åŠ  @HystrixCommand</span></span><br><span class="line"> <span class="meta">@HystrixCommand(fallbackMethod = &quot;timeoutHandler&quot;, commandProperties = &#123;</span></span><br><span class="line"><span class="meta">            @HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;,value = &quot;3000&quot;)</span></span><br><span class="line"><span class="meta">    &#125; )</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">timeout</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*try &#123;</span></span><br><span class="line"><span class="comment">            TimeUnit.SECONDS.sleep(5);</span></span><br><span class="line"><span class="comment">        &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">            e.printStackTrace();</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;çº¿ç¨‹ï¼š &quot;</span>+ Thread.currentThread().getName() + <span class="string">&quot; timeout , id: &quot;</span> + id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">timeoutHandler</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;çº¿ç¨‹ï¼š &quot;</span>+ Thread.currentThread().getName() + <span class="string">&quot; è¶…æ—¶æˆ–è€…å¼‚å¸¸å¤„ç† timeoutHandler , id: &quot;</span> + id;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ¶ˆè´¹è€…å®¢æˆ·ç«¯ç¼–ç é…ç½®</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ @EnableHystrix</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="meta">@EnableHystrix</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerHystrixMain80</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConsumerHystrixMain80.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®é™çº§æœåŠ¡</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/get/timeout/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod = &quot;timeoutHandler&quot;, commandProperties = &#123;</span></span><br><span class="line"><span class="meta">            @HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;,value = &quot;1500&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">timeout</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> paymentClientService.timeout(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">timeoutHandler</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ¶ˆè´¹è€…æœåŠ¡é™çº§ï¼šæœåŠ¡å™¨è¶…æ—¶ï¼Œæˆ–è€…å¼‚å¸¸é”™è¯¯, id: &quot;</span> + id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®é»˜è®¤æœåŠ¡é™çº§"><a href="#è®¾ç½®é»˜è®¤æœåŠ¡é™çº§" class="headerlink" title="è®¾ç½®é»˜è®¤æœåŠ¡é™çº§"></a>è®¾ç½®é»˜è®¤æœåŠ¡é™çº§</h2><blockquote><p>æ²¡æœ‰ç‰¹åˆ«æŒ‡å®šé™çº§æ–¹æ³•ï¼Œå°±ä¼šä½¿ç”¨å…¨å±€é™çº§æ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ç±»ä¸Šæ·»åŠ @DefaultPropertiesï¼Œè®¾ç½®å…¨å±€é™çº§æ–¹æ³•</span></span><br><span class="line"><span class="meta">@DefaultProperties(defaultFallback = &quot;globalHandler&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PaymentController</span></span></span><br><span class="line"><span class="class">// åœ¨éœ€è¦é™çº§çš„æ–¹æ³•ä¸Šæ·»åŠ  @<span class="title">HystrixCommand</span> ,æ²¡æœ‰ç‰¹åˆ«æŒ‡å®šé™çº§æ–¹æ³•ï¼Œå°±ä¼šä½¿ç”¨å…¨å±€é™çº§æ–¹æ³•  </span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    @<span class="title">GetMapping</span>(&quot;/<span class="title">get</span>/<span class="title">ok</span>/</span>&#123;id&#125;<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    @HystrixCommand</span></span><br><span class="line"><span class="string">    public String ok(@PathVariable(&quot;</span>id<span class="string">&quot;) Integer id) &#123;</span></span><br><span class="line"><span class="string">        int i = 10/0;</span></span><br><span class="line"><span class="string">        return paymentClientService.ok(id);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="feign-å’Œ-hystrix-ç»“åˆä½¿ç”¨"><a href="#feign-å’Œ-hystrix-ç»“åˆä½¿ç”¨" class="headerlink" title="feign å’Œ hystrix ç»“åˆä½¿ç”¨"></a>feign å’Œ hystrix ç»“åˆä½¿ç”¨</h2><blockquote><p>å¼€å¯feign å¯¹ hystrixçš„æ”¯æŒ</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">circuitbreaker:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>è®¾ç½®fallbacké™çº§</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨@FeignClientæ·»åŠ æœåŠ¡é™çº§é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;CLOUD-PROVIDER-HYSTRIX&quot;, fallback = PaymentClientImpl.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PaymentClientService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/payment/hystrix/get/ok/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">ok</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/payment/hystrix/get/timeout/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">timeout</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœåŠ¡é™çº§ç±»æ˜¯ç»§æ‰¿äº†æ¥å£</span></span><br><span class="line"><span class="comment">//éœ€è¦å°†å®ƒåŠ å…¥å®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PaymentClientImpl</span> <span class="keyword">implements</span> <span class="title">PaymentClientService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">ok</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–°ç‰ˆæœ¬è®¾ç½®çš„fallback,ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">timeout</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–°ç‰ˆæœ¬è®¾ç½®çš„fallback,timeout&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡ç†”æ–­"><a href="#æœåŠ¡ç†”æ–­" class="headerlink" title="æœåŠ¡ç†”æ–­"></a>æœåŠ¡ç†”æ–­</h2><p>é™çº§(open)â€”æ»¡è¶³ä¸€å®šçš„ç†”æ–­æ¡ä»¶â€”ã€‹ç†”æ–­ï¼ˆclosedï¼‰â€”ç»è¿‡ä¼‘çœ çª—å£æ—¶é—´â€”ã€‹ç¼“æ…¢æ”¾è¡Œï¼ˆhalf openï¼‰â€”å¦‚æœä»ç„¶ä¸è¡Œâ€”ã€‹é‡ç½®ä¼‘çœ çª—å£æ—¶é—´</p><blockquote><p>ç†”æ–­æœåŠ¡é…ç½®</p><p>hystrixç†”æ–­å‚æ•°ï¼Œè¿˜æœ‰å…¶ä»–çš„ï¼Œå»çœ‹é˜³å“¥è§†é¢‘ä¸­æœ‰61</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HystrixCommand(fallbackMethod = &quot;circuitBreakerFallback&quot;, commandProperties = &#123;</span></span><br><span class="line"><span class="meta">            @HystrixProperty(name = &quot;circuitBreaker.enabled&quot;, value = &quot;true&quot;), //å¼€å¯ç†”æ–­å™¨</span></span><br><span class="line"><span class="meta">            @HystrixProperty(name = &quot;circuitBreaker.requestVolumeThreshold&quot;, value = &quot;10&quot;), //è¯·æ±‚æ¬¡æ•°</span></span><br><span class="line"><span class="meta">            @HystrixProperty(name = &quot;circuitBreaker.sleepWindowInMilliseconds&quot;, value = &quot;10000&quot;), // å¿«ç…§æ—¶é—´çª—å£</span></span><br><span class="line"><span class="meta">            @HystrixProperty(name = &quot;circuitBreaker.errorThresholdPercentage&quot;, value = &quot;60&quot;), //å¤±è´¥ç™¾åˆ†æ¯”</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡é™æµ"><a href="#æœåŠ¡é™æµ" class="headerlink" title="æœåŠ¡é™æµ"></a>æœåŠ¡é™æµ</h2><h2 id="æœåŠ¡ç›‘æ§ï¼ˆç›®å‰åªèƒ½åœ¨åœ¨æœåŠ¡ä¸­ç›‘æ§ï¼Œä¸èƒ½å°†æœåŠ¡ç›‘æ§ä¸æœåŠ¡åˆ†å¼€ï¼‰"><a href="#æœåŠ¡ç›‘æ§ï¼ˆç›®å‰åªèƒ½åœ¨åœ¨æœåŠ¡ä¸­ç›‘æ§ï¼Œä¸èƒ½å°†æœåŠ¡ç›‘æ§ä¸æœåŠ¡åˆ†å¼€ï¼‰" class="headerlink" title="æœåŠ¡ç›‘æ§ï¼ˆç›®å‰åªèƒ½åœ¨åœ¨æœåŠ¡ä¸­ç›‘æ§ï¼Œä¸èƒ½å°†æœåŠ¡ç›‘æ§ä¸æœåŠ¡åˆ†å¼€ï¼‰"></a>æœåŠ¡ç›‘æ§ï¼ˆç›®å‰åªèƒ½åœ¨åœ¨æœåŠ¡ä¸­ç›‘æ§ï¼Œä¸èƒ½å°†æœåŠ¡ç›‘æ§ä¸æœåŠ¡åˆ†å¼€ï¼‰</h2><blockquote><p>hystrix-dashboard</p><p><a href="http://localhost:9001/hystrix">http://localhost:9001/hystrix</a></p></blockquote><blockquote><ol><li>å¼•å…¥ä¾èµ–</li></ol></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--hystrix-dashboard--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ol start="2"><li>é…ç½®å¯åŠ¨ç±»</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableHystrixDashboard</span>  <span class="comment">//æ·»åŠ æ³¨è§£ï¼Œå¯åŠ¨æ”¯æŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HystrixDashboardMain9001</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(HystrixDashboardMain9001.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ol start="3"><li>è®¿é—®è·¯å¾„</li></ol></blockquote><p><a href="http://localhost:9001/hystrix">http://localhost:9001/hystrix</a></p><blockquote><ol start="4"><li>è¢«ç›‘æ§ç¨‹åºé…ç½®è¦æ±‚</li></ol></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/.io//image-20220317102218065.png" alt="image-20220317102218065"></p><h3 id="é‡‡å‘è§£å†³"><a href="#é‡‡å‘è§£å†³" class="headerlink" title="é‡‡å‘è§£å†³"></a>é‡‡å‘è§£å†³</h3><blockquote><p>é—®é¢˜1:</p></blockquote><blockquote><p>è®¿é—®ï¼š<a href="http://localhost:8001/hystrix.stream">http://localhost:8001/hystrix.stream</a></p></blockquote><p><img src="/.io//image-20220317100622682.png" alt="image-20220317100622682"></p><blockquote><p>è§£å†³</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean&lt;HystrixMetricsStreamServlet&gt; <span class="title">getServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">HystrixMetricsStreamServlet streamServlet = <span class="keyword">new</span> HystrixMetricsStreamServlet();</span><br><span class="line">ServletRegistrationBean&lt;HystrixMetricsStreamServlet&gt; registrationBean = <span class="keyword">new</span> ServletRegistrationBean&lt;&gt;(streamServlet);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€å¯åŠ¨å°±åŠ è½½</span></span><br><span class="line">registrationBean.setLoadOnStartup(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// æ·»åŠ url</span></span><br><span class="line">registrationBean.addUrlMappings(<span class="string">&quot;/hystrix.stream&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®åç§°</span></span><br><span class="line">registrationBean.setName(<span class="string">&quot;HystrixMetricsStreamServlet&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é—®é¢˜äºŒï¼šUnable to connect to Command Metric Stream.</p></blockquote><p><img src="/.io//image-20220317101602911.png" alt="image-20220317101602911"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2022</span>-<span class="number">03</span>-<span class="number">17</span> 09:<span class="number">28</span>:<span class="number">56.338</span>  WARN <span class="number">23840</span> --- [nio-<span class="number">9001</span>-exec-<span class="number">4</span>] ashboardConfiguration$ProxyStreamServlet : Origin parameter: http:<span class="comment">//localhost:8001/hystrix.stream is not in the allowed list of proxy host names.  If it should be allowed add it to hystrix.dashboard.proxyStreamAllowList.</span></span><br></pre></td></tr></table></figure><blockquote><p>è§£å†³</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hystrix:</span><br><span class="line">  dashboard:</span><br><span class="line">    proxy-stream-allow-list: &quot;*&quot;</span><br></pre></td></tr></table></figure><h1 id="ç½‘å…³æœåŠ¡"><a href="#ç½‘å…³æœåŠ¡" class="headerlink" title="ç½‘å…³æœåŠ¡"></a>ç½‘å…³æœåŠ¡</h1><h2 id="ä¸ºä»€ä¹ˆè¦æ·»åŠ ç½‘å…³ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æ·»åŠ ç½‘å…³ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æ·»åŠ ç½‘å…³ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦æ·»åŠ ç½‘å…³ï¼Ÿ</h2><ol><li>åªæš´éœ²ç½‘å…³åœ°å€æ¥å£ï¼Œéšè—ä¿æŠ¤æœåŠ¡çš„åœ°å€æ¥å£</li></ol><h1 id="Zuul"><a href="#Zuul" class="headerlink" title="Zuul"></a>Zuul</h1><h1 id="Gateway"><a href="#Gateway" class="headerlink" title="Gateway"></a>Gateway</h1><h2 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h2><blockquote><ol><li>å¼•å…¥ä¾èµ–</li></ol></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springcloud gateway--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ol start="2"><li>application.yaml é…ç½®</li></ol></blockquote><p><strong>é…ç½®è·¯ç”±</strong></p><ol><li>yamlé…ç½®</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-gateway-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment"># é…ç½®è·¯ç”±</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">cloud-payment-service</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:8001</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/payment/hystrix/**</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®ç±»æ–¹å¼</li></ol><h2 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h2><h3 id="é™æ€è·¯ç”±"><a href="#é™æ€è·¯ç”±" class="headerlink" title="é™æ€è·¯ç”±"></a>é™æ€è·¯ç”±</h3><p>æ˜¯å°†è·¯ç”±çš„æ˜ å°„å†™æ­»</p><blockquote><p>é…ç½®ç±»é…ç½®</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GateWayConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RouteLocator <span class="title">customRouteLocator</span><span class="params">(RouteLocatorBuilder routeLocatorBuilder)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> routeLocatorBuilder.routes()</span><br><span class="line">                .route(<span class="string">&quot;path_route&quot;</span>,r -&gt; r.path(<span class="string">&quot;/exclusive&quot;</span>)</span><br><span class="line">                        .uri(<span class="string">&quot;https://world.huanqiu.com/exclusive&quot;</span>))</span><br><span class="line">                .route(<span class="string">&quot;test2&quot;</span>,r -&gt; r.path(<span class="string">&quot;/article&quot;</span>)</span><br><span class="line">                        .uri(<span class="string">&quot;https://world.huanqiu.com/article&quot;</span>))</span><br><span class="line">                .route(<span class="string">&quot;test3&quot;</span>,r -&gt; r.path(<span class="string">&quot;/world&quot;</span>)</span><br><span class="line">                        .uri(<span class="string">&quot;https://news.cctv.com/world/&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong></p><ul><li>uri å¦‚æœæ·»åŠ äº† pathï¼Œè·¯ç”±å™¨å¯¼èˆªæ è¿˜æ˜¯åŸæ¥çš„é“¾æ¥ï¼›</li><li>uriä¸æ·»åŠ pathï¼Œè·¯ç”±å™¨ä¼šæ‹¼æ¥å è·³è½¬åˆ°ç›®æ ‡é“¾æ¥ï¼Œå¯¼èˆªæ é“¾æ¥ä¼šæ›´æ–°</li></ul><blockquote><p>é…ç½®æ–‡ä»¶é…ç½®</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-gateway-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">cloud-payment-service</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:8001</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/payment/hystrix/**</span></span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€è·¯ç”±"><a href="#åŠ¨æ€è·¯ç”±" class="headerlink" title="åŠ¨æ€è·¯ç”±"></a>åŠ¨æ€è·¯ç”±</h3><p>åŠ¨æ€è·¯ç”±æ˜¯é€šè¿‡æœåŠ¡åç§° å» æ³¨å†Œä¸­å¿ƒå»è·å–ipï¼športï¼›</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-gateway-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">locator:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#å¼€å¯åŠ¨æ€è·¯ç”±</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">cloud-payment-service</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:8001</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/payment/hystrix/**</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">dynamic-route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://cloud-payment-service</span>  <span class="comment">#ä½¿ç”¨æœåŠ¡åç§°</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/payment/**</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“é¢†æ‚Ÿ</p></blockquote><p>å®¢æˆ·ç›´æ¥å‘æ¥çš„è¯·æ±‚ä½¿ç”¨ç½‘å…³åšè´Ÿè½½å‡è¡¡ï¼Œ</p><p>æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ï¼Œä½¿ç”¨ribbonï¼Œloadbalancer,openfeign åšè´Ÿè½½å‡è¡¡</p><h2 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h2><p>9ä¸­æ–­è¨€å·¥å‚</p><h3 id="After"><a href="#After" class="headerlink" title="After"></a>After</h3><p>åœ¨xxxxxæ—¶é—´ä¹‹å‰è®¿é—®</p><blockquote><p>æ—¶é—´æ ¼å¼è·å–</p><p>2022-03-21T10:49:53.861+08:00[Asia/Shanghai]</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ZonedDateTime zonedDateTime = ZonedDateTime.now();</span><br><span class="line">        System.out.println(zonedDateTime);</span><br><span class="line">        <span class="comment">//2022-03-21T10:49:53.861+08:00[Asia/Shanghai]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h2><h3 id="GateWayfilterï¼ˆå•ä¸ªï¼‰"><a href="#GateWayfilterï¼ˆå•ä¸ªï¼‰" class="headerlink" title="GateWayfilterï¼ˆå•ä¸ªï¼‰"></a>GateWayfilterï¼ˆå•ä¸ªï¼‰</h3><h3 id="GlobalFilter-å…¨å±€"><a href="#GlobalFilter-å…¨å±€" class="headerlink" title="GlobalFilter(å…¨å±€)"></a>GlobalFilter(å…¨å±€)</h3><blockquote><p>æ¡ˆä¾‹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLogGateWayFilter</span> <span class="keyword">implements</span> <span class="title">GlobalFilter</span>, <span class="title">Ordered</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Mono&lt;Void&gt; <span class="title">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> </span>&#123;</span><br><span class="line">        String uname = exchange.getRequest().getQueryParams().getFirst(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(uname == <span class="keyword">null</span>) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;uname = null, éæ³•é—¯å…¥ï¼Œæ¶ˆç­å…¥ä¾µè€…&quot;</span>);</span><br><span class="line">            exchange.getResponse().setStatusCode(HttpStatus.NOT_ACCEPTABLE);</span><br><span class="line">            <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡‡å‘è®°å½•"><a href="#é‡‡å‘è®°å½•" class="headerlink" title="é‡‡å‘è®°å½•"></a>é‡‡å‘è®°å½•</h2><blockquote><p>é—®é¢˜1ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway at <span class="keyword">this</span> time. Please remove spring-boot-starter-web dependency.</span><br></pre></td></tr></table></figure><blockquote><p>è§£å†³æ–¹æ¡ˆ</p></blockquote><p>gateway ç½‘å…³ä¸éœ€è¦springMVCï¼Œç§»é™¤spring-boot-starter-webä¾èµ–</p><h1 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h1><h2 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h2><p>spring-cloud-config æ¨èä¸ gitæ•´åˆä½¿ç”¨</p><blockquote><p>é…ç½®ä¸­å¿ƒçš„é…ç½®æ–‡ä»¶å‘½åæ–¹å¼å¿…é¡»æ˜¯ <strong>application-profile.yaml</strong></p></blockquote><h3 id="åŸºæœ¬é…ç½®-1"><a href="#åŸºæœ¬é…ç½®-1" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h3><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springcloud-config-server--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--eureka-client--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ç±»é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigCenterMain3344</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConfigCenterMain3344.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>application.yamlé…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-config-center</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">git:</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://github.com/CodeWolfs/spring-cloud-config.git</span> <span class="comment">#è¿™é‡Œä½¿ç”¨httpé“¾æ¥ï¼Œä½¿ç”¨sshé”™è¯¯æ²¡æœ‰è§£å†³</span></span><br><span class="line">          <span class="attr">search-paths:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">spring-cloud-config</span></span><br><span class="line"><span class="comment">#          username: 2546972682@qq.com</span></span><br><span class="line"><span class="comment">#          password: wasdsxy5210.</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span> <span class="comment">#é…ç½®é»˜è®¤çš„åˆ†æ”¯</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="springcloudçš„è®¿é—®è§„åˆ™"><a href="#springcloudçš„è®¿é—®è§„åˆ™" class="headerlink" title="springcloudçš„è®¿é—®è§„åˆ™"></a>springcloudçš„è®¿é—®è§„åˆ™</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/&#123;application&#125;/&#123;profile&#125;[/&#123;label&#125;]</span><br><span class="line">/&#123;application&#125;-&#123;profile&#125;.yml</span><br><span class="line">/&#123;label&#125;/&#123;application&#125;-&#123;profile&#125;.yml</span><br><span class="line">/&#123;application&#125;-&#123;profile&#125;.properties</span><br><span class="line">/&#123;label&#125;/&#123;application&#125;-&#123;profile&#125;.properties</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>{application} å°±æ˜¯åº”ç”¨åç§°ï¼Œå¯¹åº”åˆ°é…ç½®æ–‡ä»¶ä¸Šæ¥ï¼Œå°±æ˜¯é…ç½®æ–‡ä»¶çš„åç§°éƒ¨åˆ†ï¼Œä¾‹å¦‚æˆ‘ä¸Šé¢åˆ›å»ºçš„é…ç½®æ–‡ä»¶ã€‚</p></li><li><p>{profile} å°±æ˜¯é…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬çš„é¡¹ç›®æœ‰å¼€å‘ç‰ˆæœ¬ã€æµ‹è¯•ç¯å¢ƒç‰ˆæœ¬ã€ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œå¯¹åº”åˆ°é…ç½®æ–‡ä»¶ä¸Šæ¥å°±æ˜¯ä»¥ application-{profile}.yml åŠ ä»¥åŒºåˆ†ï¼Œä¾‹å¦‚application-dev.ymlã€application-sit.ymlã€application-prod.ymlã€‚</p></li><li><p>{label} è¡¨ç¤º git åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ master åˆ†æ”¯ï¼Œå¦‚æœé¡¹ç›®æ˜¯ä»¥åˆ†æ”¯åšåŒºåˆ†ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œé‚£å°±å¯ä»¥é€šè¿‡ä¸åŒçš„ label æ¥æ§åˆ¶è®¿é—®ä¸åŒçš„é…ç½®æ–‡ä»¶äº†ã€‚</p></li></ul><h3 id="é‡‡å‘è®°å½•-1"><a href="#é‡‡å‘è®°å½•-1" class="headerlink" title="é‡‡å‘è®°å½•"></a>é‡‡å‘è®°å½•</h3><blockquote><p>é—®é¢˜1</p></blockquote><p><strong>This application has no explicit mapping for /error, so you are seeing this as a fallback</strong></p><p><img src="/.io//image-20220322103523771.png" alt="image-20220322103523771"></p><blockquote><p>è§£å†³æ–¹æ¡ˆï¼š</p></blockquote><p>uriä½¿ç”¨httpé“¾æ¥ï¼Œä¸è¦ä½¿ç”¨sshé“¾æ¥</p><h2 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><blockquote><p>bootstrap.yaml æ–‡ä»¶äº†è§£ï¼Œä»¥åŠä¸application.yamlæ–‡ä»¶çš„æ¯”è¾ƒ</p></blockquote><p>bootstrap.yaml, æ˜¯ç³»ç»Ÿçº§çš„ï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šæ ¹æ®é…ç½®åŠ è½½application.yaml</p><p>application.yaml,æ˜¯ç”¨æˆ·çº§çš„ã€‚</p><h3 id="åŸºæœ¬é…ç½®-2"><a href="#åŸºæœ¬é…ç½®-2" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h3><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springcloud-config-client--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¿™é‡Œä¸configæœåŠ¡å™¨ä¸åŒ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--eureka-client--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--bootstrap.yaml éœ€è¦--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ç±»é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigClientMain3355</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConfigClientMain3355.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>bootstrap.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">3355</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-config-client</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="string">dev</span></span><br><span class="line">      <span class="attr">uri:</span> <span class="string">http://config3344.com:3344</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="é‡‡å‘è®°å½•-2"><a href="#é‡‡å‘è®°å½•-2" class="headerlink" title="é‡‡å‘è®°å½•"></a>é‡‡å‘è®°å½•</h3><ol><li><p>é—®é¢˜ä¸€</p><blockquote><p>org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--bootstrap.yaml éœ€è¦è¿™ä¸ªä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="é…ç½®åŠ¨æ€åˆ·æ–°"><a href="#é…ç½®åŠ¨æ€åˆ·æ–°" class="headerlink" title="é…ç½®åŠ¨æ€åˆ·æ–°"></a>é…ç½®åŠ¨æ€åˆ·æ–°</h2><p>æŒ‰ç…§ä¸Šè¿°çš„é…ç½®åï¼Œåœ¨githubæ›´æ–°é…ç½®åï¼Œå®¢æˆ·ç«¯è·å–ä¸åˆ°æœ€æ–°çš„é…ç½®ï¼Œéœ€è¦æœåŠ¡å™¨è·å–åˆ°é…ç½®ï¼Œä¹‹åå®¢æˆ·ç«¯æ‰å¯ä»¥è·å–åˆ°é…ç½®ã€‚</p><h2 id="æ‰‹åŠ¨åˆ·æ–°"><a href="#æ‰‹åŠ¨åˆ·æ–°" class="headerlink" title="æ‰‹åŠ¨åˆ·æ–°"></a>æ‰‹åŠ¨åˆ·æ–°</h2><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>bootstrap.yaml é…ç½®æš´éœ²</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ§åˆ¶å™¨ä¸Šæ·»åŠ @RefreshScopeæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/config/info&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigInfoController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;config.info&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String configInfo;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getConfigInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(configInfo);</span><br><span class="line">        <span class="keyword">return</span> configInfo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨gitä¸Šçš„é…ç½®æ›´æ–°ä¹‹åï¼Œéœ€è¦ä»¥postçš„æ–¹å¼è®¿é—®  â€œ<a href="http://localhost:3355/actuator/refresh&quot;">http://localhost:3355/actuator/refresh&quot;</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="string">&quot;http://localhost:3355/actuator/refresh&quot;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="è‡ªåŠ¨åˆ·æ–°"><a href="#è‡ªåŠ¨åˆ·æ–°" class="headerlink" title="è‡ªåŠ¨åˆ·æ–°"></a>è‡ªåŠ¨åˆ·æ–°</h2><p>æ•´åˆbuså®ç°è‡ªåŠ¨åˆ·æ–°</p><blockquote><p><strong>è®¾è®¡æ€è·¯</strong></p></blockquote><ol><li>å‘é€ç»™å¾®æœåŠ¡ä¸ªä½“ï¼Œæœ‰å¾®æœåŠ¡ä¸ªä½“æƒ³è •è™«ç—…æ¯’ä¸€æ ·ï¼Œç›¸äº’å‘é€</li><li>å‘é€ç»™é…ç½®ä¸­å¿ƒï¼Œæœ‰é…ç½®ä¸­å¿ƒé€šçŸ¥æ‰€æœ‰å¾®æœåŠ¡</li></ol><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œå¾®æœåŠ¡åº”è¯¥èŒè´£å•ä¸€ï¼Œä¸åº”è¯¥æ‰¿æ‹…å¤šä½™çš„ä¸å±äºä»–çš„å†…å®¹</p><h4 id="åŸºæœ¬é…ç½®-3"><a href="#åŸºæœ¬é…ç½®-3" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h4><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç›‘æ§åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bus-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--bootstrap.yaml éœ€è¦--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>application.yaml é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯é…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-config-center</span></span><br><span class="line">  <span class="comment">#rabbitmq é…ç½®</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="comment"># é…ç½®ä¸­å¿ƒé…ç½®</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">git:</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://github.com/CodeWolfs/spring-cloud-config.git</span></span><br><span class="line">          <span class="attr">search-paths:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">spring-cloud-config</span></span><br><span class="line"><span class="comment">#          username: 2546972682@qq.com</span></span><br><span class="line"><span class="comment">#          password: wasdsxy5210.</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span></span><br><span class="line"><span class="comment">#æš´éœ²bus-refreshï¼Œåˆ·æ–°ä½¿ç”¨</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;busrefresh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##############################################</span></span><br><span class="line"><span class="comment">#å®¢æˆ·ç«¯é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-config-client</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">uri:</span> <span class="string">http://localhost:3344</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="string">dev</span></span><br><span class="line"><span class="comment">#å®¢æˆ·ç«¯ä¸éœ€è¦æš´éœ²ç«¯å£ï¼Œä½†æ˜¯å¿…é¡»æ·»åŠ @RefreshScopeæ³¨è§£</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯åœ¨éœ€è¦æ›´æ–°çš„ç±»ä¸Šæ·»åŠ <code>@RefreshScope</code>æ³¨è§£</p></li><li><p>gitæ›´æ–°åï¼Œè¿ç»´äººå‘˜ä»¥postæ–¹å¼å‘é€<a href="http://localhost:3344/actuator/busrefresh">http://localhost:3344/actuator/busrefresh</a> ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„æ–°ç‰ˆæœ¬å‘é€çš„æ˜¯busrefresh,ä¸­é—´æ²¡æœ‰-ã€‚</p></li></ol><h4 id="å±€éƒ¨é€šçŸ¥"><a href="#å±€éƒ¨é€šçŸ¥" class="headerlink" title="å±€éƒ¨é€šçŸ¥"></a>å±€éƒ¨é€šçŸ¥</h4><p>ä¸Šè¿°æ˜¯å…¨å±€é€šçŸ¥ï¼Œä¸‹é¢æ¥è¯´ä¸€ä¸‹å±€éƒ¨é€šçŸ¥çš„æ–¹å¼</p><p><a href="http://localhost:3344/actuator/busrefresh/%7Bservice-name%7D:%7Bport%7D">http://localhost:3344/actuator/busrefresh/{service-name}:{port}</a></p><p><strong>ex:</strong></p><p><strong>åˆ·æ–°å•ä¸ªç«¯å£</strong></p><p><a href="http://localhost:3344/actuator/busrefresh/cloud-config-client:3355">http://localhost:3344/actuator/busrefresh/cloud-config-client:3355</a></p><p><strong>åˆ·æ–°å¤šä¸ªç«¯å£</strong></p><p><a href="http://localhost:3344/actuator/busrefresh/cloud-config-client:%7B3355,3366%7D">http://localhost:3344/actuator/busrefresh/cloud-config-client:{3355,3366}</a></p><h4 id="é‡‡å‘è®°å½•-3"><a href="#é‡‡å‘è®°å½•-3" class="headerlink" title="é‡‡å‘è®°å½•"></a>é‡‡å‘è®°å½•</h4><blockquote><p>ä»¥postè¯·æ±‚å‘é€ <a href="http://localhost:3344/actuator/bus-refresh">http://localhost:3344/actuator/bus-refresh</a> ï¼Œ æŠ¥404é”™è¯¯</p></blockquote><p><img src="/.io//image-20220323093820513.png" alt="image-20220323093820513"></p><p><strong>è§£å†³æ–¹æ³•</strong></p><p>æ–°ç‰ˆæœ¬bus-ampq,ä½¿ç”¨busrefresh,ä¸­é—´ä¸åŠ  â€œ **-**â€</p><p><img src="/.io//image-20220323094039502.png" alt="image-20220323094039502"></p><h1 id="Bus"><a href="#Bus" class="headerlink" title="Bus"></a>Bus</h1><p>Bus åªæ”¯æŒ RabbitMQ å’Œ kafka</p><h2 id="æŸ¥çœ‹configä¸­è‡ªåŠ¨åˆ·æ–°å†…å®¹"><a href="#æŸ¥çœ‹configä¸­è‡ªåŠ¨åˆ·æ–°å†…å®¹" class="headerlink" title="æŸ¥çœ‹configä¸­è‡ªåŠ¨åˆ·æ–°å†…å®¹"></a>æŸ¥çœ‹configä¸­è‡ªåŠ¨åˆ·æ–°å†…å®¹</h2><h1 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h1><p><a href="https://www.cnblogs.com/java-spring/p/14539407.html">rabbitmq æ•´åˆ</a></p><p>stream 3.1 ä»¥åæ¨èä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å–ä»£æ³¨è§£ï¼Œä¾‹å¦‚@enablebinding();</p><h2 id="ä½¿ç”¨rabbitmq"><a href="#ä½¿ç”¨rabbitmq" class="headerlink" title="ä½¿ç”¨rabbitmq"></a>ä½¿ç”¨rabbitmq</h2><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®application.yaml æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span> <span class="comment">#è¿™é‡Œæ·»åŠ rabbitmqé…ç½®ï¼Œæ˜¯å› ä¸ºä¸åŠ çš„è¯ä¼šæŠ¥é“¾æ¥æ‹’ç»çš„é—®é¢˜</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">stream-rabbitmq-provider</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">stream:</span></span><br><span class="line">      <span class="attr">binders:</span></span><br><span class="line">      <span class="comment"># æ¶ˆè´¹è€…ç¯å¢ƒé…ç½®</span></span><br><span class="line">        <span class="attr">consumerRabbit:</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">rabbit</span></span><br><span class="line">          <span class="attr">environment:</span></span><br><span class="line">            <span class="attr">spring:</span></span><br><span class="line">              <span class="attr">rabbitmq:</span></span><br><span class="line">                <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span></span><br><span class="line">                <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">                <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">                <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">                </span><br><span class="line">        <span class="attr">defaultRabbit:</span> <span class="comment">#æ˜¯å£°æ˜binderå±æ€§ï¼Œå£°æ˜ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä»¥åŠé…ç½®ä¸­é—´ä»¶ç¯å¢ƒï¼ŒdefaultRabbitæ˜¯é…ç½®åç§°ï¼Œåœ¨binddingsä¸­ä½¿ç”¨default-binder</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">rabbit</span></span><br><span class="line">          <span class="attr">environment:</span></span><br><span class="line">            <span class="attr">spring:</span></span><br><span class="line">              <span class="attr">rabbitmq:</span></span><br><span class="line">                <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.112</span><span class="number">.128</span></span><br><span class="line">                <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">                <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">                <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">      <span class="attr">bindings:</span></span><br><span class="line">        <span class="attr">output:</span> <span class="comment">#ç”Ÿäº§è€…ç®¡é“channelï¼Œå‘é€æ¶ˆæ¯éœ€è¦ä½¿ç”¨ï¼Œoutput æ˜¯å¯¹è±¡å</span></span><br><span class="line">          <span class="attr">destination:</span> <span class="string">studyExchange</span></span><br><span class="line">          <span class="attr">content-type:</span> <span class="string">application/json</span></span><br><span class="line">          <span class="attr">default-binder:</span> <span class="string">defaultRabbit</span></span><br><span class="line">          </span><br><span class="line">        <span class="attr">input:</span> <span class="comment">#æ¶ˆè´¹è€…channel</span></span><br><span class="line">          <span class="attr">destination:</span> <span class="string">studyExchange</span></span><br><span class="line">          <span class="attr">content-type:</span> <span class="string">application/json</span></span><br><span class="line">          <span class="attr">default-binder:</span> <span class="string">consumerRabbit</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">rabbitmq-provider</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">rabbitmq-provider</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>ç¼–ç </p><ol><li><p>ç”Ÿäº§è€…ç¼–ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@EnableBinding(Source.class)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageProviderImpl</span> <span class="keyword">implements</span> <span class="title">MessageProvider</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MessageChannel output; <span class="comment">//outputéœ€è¦å’Œé…ç½®æ–‡ä»¶ä¸­çš„ä¸€æ ·</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String s = UUID.randomUUID().toString();</span><br><span class="line">        <span class="keyword">boolean</span> send = output.send(MessageBuilder.withPayload(s).build());</span><br><span class="line">        log.info(s);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ¶ˆè´¹è€…ç¼–ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@EnableBinding(Sink.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReciveMessageController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String serverPort;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@StreamListener(&quot;input&quot;)</span> <span class="comment">//è¿™é‡Œè¯•äº†ä½¿ç”¨å…¶ä»–çš„åç§°ï¼Œä¸å¯ä»¥ï¼Œå¥½åƒåªèƒ½ä½¿ç”¨input</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reciveMessage</span><span class="params">(Message&lt;String&gt; message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…1ï¼š &quot;</span> + message.getPayload() + <span class="string">&quot;\tport:&quot;</span> + serverPort);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="é‡å¤æ¶ˆè´¹å’Œæ¶ˆæ¯æŒä¹…åŒ–"><a href="#é‡å¤æ¶ˆè´¹å’Œæ¶ˆæ¯æŒä¹…åŒ–" class="headerlink" title="é‡å¤æ¶ˆè´¹å’Œæ¶ˆæ¯æŒä¹…åŒ–"></a>é‡å¤æ¶ˆè´¹å’Œæ¶ˆæ¯æŒä¹…åŒ–</h2><p><strong>ä¸Šè¿°é…ç½®çš„é—®é¢˜</strong></p><p><img src="/.io//image-20220324110553925.png" alt="image-20220324110553925"></p><h3 id="é‡å¤æ¶ˆè´¹"><a href="#é‡å¤æ¶ˆè´¹" class="headerlink" title="é‡å¤æ¶ˆè´¹"></a>é‡å¤æ¶ˆè´¹</h3><p>ä½¿ç”¨groupåˆ†ç»„è§£å†³è¿™ä¸ªé—®é¢˜</p><p>è¿™ä¸ªgroupå®é™…ä¸Šåœ¨rabbitmqå°±æ˜¯é˜Ÿåˆ—çš„æ„æ€ï¼Œåœ¨æ²¡æœ‰æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…éƒ½æœ‰ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¼šä¸ºæ¯ä¸ªæ¶ˆè´¹è€…åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼ˆå¦‚æœä¸æŒ‡å®šçš„è¯ï¼‰</p><p>æ‰€ä»¥å¦‚æœéœ€è¦é¿å…é‡å¤æ¶ˆè´¹é—®é¢˜ï¼Œå°±å°†æ¶ˆè´¹è€…æ”¾åœ¨åŒä¸€ç»„ä¸‹å°±å¯ä»¥äº†ã€‚</p><p><strong>è®¾ç½®çš„groupï¼Œdurable=true</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ä¸ªåˆ†ç»„ç»‘å®šåªèƒ½åœ¨æ¶ˆè´¹è€…ç«¯è¿›è¡Œï¼Œå› ä¸ºç³»ç»Ÿä¼šç”±æ­¤ç¡®å®šä½ çš„æ¶ˆè´¹è€…ç»‘å®šçš„æ˜¯å“ªä¸ªé˜Ÿåˆ—</span></span><br><span class="line">    <span class="attr">bindings:</span></span><br><span class="line">        <span class="attr">input:</span></span><br><span class="line">          <span class="attr">destination:</span> <span class="string">studyExchange</span></span><br><span class="line">          <span class="attr">content-type:</span> <span class="string">application/json</span></span><br><span class="line">          <span class="attr">default-binder:</span> <span class="string">consumerRabbit</span></span><br><span class="line">          <span class="attr">group:</span> <span class="string">wangzheB</span> <span class="comment"># é…ç½®åˆ†ç»„</span></span><br></pre></td></tr></table></figure><h3 id="æ¶ˆæ¯æŒä¹…åŒ–"><a href="#æ¶ˆæ¯æŒä¹…åŒ–" class="headerlink" title="æ¶ˆæ¯æŒä¹…åŒ–"></a>æ¶ˆæ¯æŒä¹…åŒ–</h3><blockquote><p>å‡è®¾æƒ…å†µ</p></blockquote><p>æ¶ˆè´¹è€…Aå’Œæ¶ˆè´¹è€…Bæ˜¯åŒä¸€ç»„çš„æ¶ˆè´¹è€…ï¼Œä½¿ç”¨åŒä¸€groupï¼Œåœ¨ä¸¤å°æ¶ˆè´¹è€…åœæœºåï¼Œåˆ é™¤æˆ–è€…ä¿®æ”¹æ¶ˆè´¹è€…Açš„åˆ†ç»„ï¼Œ</p><p>æ­¤æ—¶ç”Ÿäº§è€…ä¸€ç›´åœ¨å¾€è¿™ä¸ªgroupé‡Œé¢å‘é€æ¶ˆæ¯ï¼Œå‘é€äº†Næ¡æ¶ˆæ¯</p><p>æ­¤æ—¶å¯åŠ¨æ¶ˆè´¹è€…Aï¼Œæ¶ˆè´¹è€…A è·å–ä¸åˆ°ä»»ä½•æ¶ˆæ¯ï¼Œä¼šé”™è¿‡æ¶ˆæ¯</p><p>æ­¤æ—¶å¯åŠ¨æ¶ˆè´¹è€…Bï¼Œæ¶ˆè´¹è€…Bä»ç„¶å¯ä»¥è·å–åˆ°å…¨éƒ¨æ¶ˆæ¯</p></li></ol><p>â€‹        </p><h2 id="rabbitmqæ•´åˆ-é‡‡å‘"><a href="#rabbitmqæ•´åˆ-é‡‡å‘" class="headerlink" title="rabbitmqæ•´åˆ é‡‡å‘"></a>rabbitmqæ•´åˆ é‡‡å‘</h2><ol><li><p>3.1åå¾ˆå¤šæ³¨è§£æ¨èä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ä»£æ›¿</p></li><li><p>rabbitmqçš„é“¾æ¥ä¿¡æ¯éœ€è¦é…ç½®ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯streamçš„enviromentï¼Œä¸€æ¬¡æ˜¯åœ¨springä¸‹é…ç½®rabbitmq</p><ol><li>è¿™ä¸ªæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæ˜¯environmentå†™é”™äº†ï¼Œå¯¼è‡´é…ç½®é…æœ‰è¯»å–åˆ°ã€‚</li></ol><p><img src="/.io//image-20220323171602305.png" alt="image-20220323171602305"></p></li><li></li></ol><h1 id="Sleuth-And-Zipkin"><a href="#Sleuth-And-Zipkin" class="headerlink" title="Sleuth And  Zipkin"></a>Sleuth And  Zipkin</h1><p>sleuth æ˜¯å®ç°</p><p>zipkin æ˜¯å±•ç¤º</p><p><a href="https://github.com/openzipkin/zipkin">zipkinä¸‹è½½åœ°å€</a></p><p><strong>zipkinå¯åŠ¨å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar zipkin-server-2.23.16-exec.jar</span><br></pre></td></tr></table></figure><p>æœåŠ¡é“¾è·¯è·Ÿè¸ª</p><h2 id="åŸºæœ¬é…ç½®-4"><a href="#åŸºæœ¬é…ç½®-4" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h2><ol><li><p>åœ¨éœ€è¦ç›‘æ§çš„æœåŠ¡ä¸­ å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä¸é€‚ç”¨è¿™ä¸ªä¾èµ–äº†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ç°åœ¨ä½¿ç”¨è¿™ä¸¤ä¸ªä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-sleuth<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-sleuth-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¾®æœåŠ¡<code>application.yaml</code>é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-payment-service</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://127.0.0.1:9411</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1</span>  <span class="comment">#é‡‡æ ·ç‡ï¼Œ0-1ä¹‹é—´ï¼Œä¸€èˆ¬æ˜¯0.5</span></span><br></pre></td></tr></table></figure></li><li><p>æ•ˆæœå›¾</p><p><img src="/.io//image-20220324152725524.png" alt="image-20220324152725524"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå­¦ä¹ ä½¿ç”¨è®°å½•</title>
      <link href="/2022/03/02/Linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/03/02/Linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æŸ¥çœ‹è¿›ç¨‹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux | grep redis</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹ç«¯å£</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -lanp | grep 6379</span><br></pre></td></tr></table></figure><h1 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h1><blockquote><p>æŸ¥çœ‹å¼€é€šçš„ç«¯å£</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure><blockquote><p>æ‰“å¼€é˜²ç«å¢™</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld</span><br></pre></td></tr></table></figure><blockquote><p>å…³é—­é˜²ç«å¢™</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure><blockquote><p>ç¦æ­¢é˜²ç«å¢™</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld </span><br></pre></td></tr></table></figure><h1 id="å†·çŸ¥è¯†"><a href="#å†·çŸ¥è¯†" class="headerlink" title="å†·çŸ¥è¯†"></a>å†·çŸ¥è¯†</h1><ul><li>linuxè‡ªå¸¦jreç¯å¢ƒ</li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxä½¿ç”¨è®°å½•</title>
      <link href="/2022/02/28/Nginx%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/02/28/Nginx%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Nginx-é‡è¦æ¦‚å¿µ"><a href="#Nginx-é‡è¦æ¦‚å¿µ" class="headerlink" title="Nginx é‡è¦æ¦‚å¿µ"></a>Nginx é‡è¦æ¦‚å¿µ</h1><h2 id="æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h2><h2 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h2><h2 id="åŠ¨é™åˆ†ç¦»"><a href="#åŠ¨é™åˆ†ç¦»" class="headerlink" title="åŠ¨é™åˆ†ç¦»"></a>åŠ¨é™åˆ†ç¦»</h2><h1 id="Nginx-linuxä¸‹å®‰è£…"><a href="#Nginx-linuxä¸‹å®‰è£…" class="headerlink" title="Nginx linuxä¸‹å®‰è£…"></a>Nginx linuxä¸‹å®‰è£…</h1><h1 id="Nginx-å¸¸ç”¨å‘½ä»¤"><a href="#Nginx-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Nginx å¸¸ç”¨å‘½ä»¤"></a>Nginx å¸¸ç”¨å‘½ä»¤</h1><blockquote><p>nginxå‘½ä»¤æ‰€åœ¨è·¯å¾„</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/software/nginx-1.20.2/sbin</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹ç‰ˆæœ¬å·</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -v</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹nginxè¿›ç¨‹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure><blockquote><p>åœæ­¢nginx</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s stop</span><br></pre></td></tr></table></figure><blockquote><p>å¯åŠ¨nginx</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx</span><br></pre></td></tr></table></figure><blockquote><p>é‡æ–°åŠ è½½ nginx</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure><h1 id="Nginx-é…ç½®æ–‡ä»¶"><a href="#Nginx-é…ç½®æ–‡ä»¶" class="headerlink" title="Nginx é…ç½®æ–‡ä»¶"></a>Nginx é…ç½®æ–‡ä»¶</h1><blockquote><p>é…ç½®æ–‡ä»¶ä½ç½®</p></blockquote><p><strong>/usr/local/software/nginx-1.20.2/conf/nginx.conf</strong></p><blockquote><p>é…ç½®æ–‡ä»¶å†…å®¹è¯¦è§£</p></blockquote><h2 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šå…¨å±€å—"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šå…¨å±€å—" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šå…¨å±€å—"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šå…¨å±€å—</h2><p>é…ç½®nginx æœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„ä¸€äº›æŒ‡ä»¤ï¼šç”¨æˆ·ç»„ã€æ—¥å¿—ã€è¿›ç¨‹pidã€nginxè¿›ç¨‹æ•°</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®šä¹‰Nginxè¿è¡Œçš„ç”¨æˆ·å’Œç”¨æˆ·ç»„</span></span><br><span class="line"><span class="string">user</span> <span class="string">www</span> <span class="string">www;</span></span><br><span class="line"><span class="comment">#nginxè¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºç­‰äºCPUæ€»æ ¸å¿ƒæ•°ã€‚</span></span><br><span class="line"><span class="string">worker_processes</span> <span class="number">8</span><span class="string">;</span></span><br><span class="line"><span class="comment">#å…¨å±€é”™è¯¯æ—¥å¿—å®šä¹‰ç±»å‹ï¼Œ[ debug | info | notice | warn | error | crit ]</span></span><br><span class="line"><span class="string">error_log</span> <span class="string">/usr/local/nginx/logs/error.log</span> <span class="string">info;</span></span><br><span class="line"><span class="comment">#è¿›ç¨‹pidæ–‡ä»¶</span></span><br><span class="line"><span class="string">pid</span> <span class="string">/usr/local/nginx/logs/nginx.pid;</span></span><br></pre></td></tr></table></figure><h2 id="ç¬¬äºŒéƒ¨åˆ†ï¼ševentså—"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼ševentså—" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼ševentså—"></a>ç¬¬äºŒéƒ¨åˆ†ï¼ševentså—</h2><p>é…ç½®nginxæœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿æ¥æœ€å¤§æ•°</span></span><br><span class="line">worker_connections  1024;</span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šhttpå—"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šhttpå—" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šhttpå—"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šhttpå—</h2><p>httpå—ä¸­åŒ…å« <strong>httpå…¨å±€å—</strong> å’Œ <strong>serverå—</strong></p><h3 id="httpå…¨å±€å—"><a href="#httpå…¨å±€å—" class="headerlink" title="httpå…¨å±€å—"></a>httpå…¨å±€å—</h3><h3 id="serverå—"><a href="#serverå—" class="headerlink" title="serverå—"></a>serverå—</h3><p>serverå—ä¸­åŒ…å« <strong>serverå…¨å±€å—</strong> å’Œ <strong>locationå—</strong></p><h4 id="serverå…¨å±€å—"><a href="#serverå…¨å±€å—" class="headerlink" title="serverå…¨å±€å—"></a>serverå…¨å±€å—</h4><h4 id="locationå—"><a href="#locationå—" class="headerlink" title="locationå—"></a>locationå—</h4><blockquote><p>proxy_pass   è·¯å¾„;</p></blockquote><blockquote><p>è·¯å¾„åŒ¹é…è§„åˆ™</p></blockquote><h2 id="è´Ÿè½½å‡è¡¡é…ç½®"><a href="#è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="è´Ÿè½½å‡è¡¡é…ç½®"></a>è´Ÿè½½å‡è¡¡é…ç½®</h2><h2 id="åŠ¨é™åˆ†ç¦»é…ç½®"><a href="#åŠ¨é™åˆ†ç¦»é…ç½®" class="headerlink" title="åŠ¨é™åˆ†ç¦»é…ç½®"></a>åŠ¨é™åˆ†ç¦»é…ç½®</h2><blockquote><p>location ä¸­çš„root,index  ,autoindex</p></blockquote><h1 id="nginx-é«˜å¯ç”¨é›†ç¾¤"><a href="#nginx-é«˜å¯ç”¨é›†ç¾¤" class="headerlink" title="nginx é«˜å¯ç”¨é›†ç¾¤"></a>nginx é«˜å¯ç”¨é›†ç¾¤</h1><blockquote><p>2å°nginxæœåŠ¡å™¨</p><p>2å°æœåŠ¡å™¨å®‰è£…keepalived</p></blockquote><h2 id="keepalived-é…ç½®æ–‡ä»¶"><a href="#keepalived-é…ç½®æ–‡ä»¶" class="headerlink" title="keepalived é…ç½®æ–‡ä»¶"></a>keepalived é…ç½®æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">global_defs &#123;</span><br><span class="line">   notification_email &#123;</span><br><span class="line">     acassen@firewall.loc</span><br><span class="line">     failover@firewall.loc</span><br><span class="line">     sysadmin@firewall.loc</span><br><span class="line">   &#125;</span><br><span class="line">   notification_email_from Alexandre.Cassen@firewall.loc</span><br><span class="line">   smtp_server 192.168.200.1</span><br><span class="line">   smtp_connect_timeout 30</span><br><span class="line">   router_id LVS_DEVEL<span class="comment"># è·¯ç”±ï¼Œæ‚¨çš„æœåŠ¡å™¨ä¸­é…ç½®çš„dnsæ˜ å°„ï¼Œåœ¨etc/hostæ–‡ä»¶ä¸­æŸ¥çœ‹</span></span><br><span class="line">   vrrp_skip_check_adv_addr</span><br><span class="line">   vrrp_strict</span><br><span class="line">   vrrp_garp_interval 0</span><br><span class="line">   vrrp_gna_interval 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state MASTER<span class="comment">#ä¸»æœåŠ¡å™¨MASTER,å¤‡ä»½æœåŠ¡å™¨BACKUP</span></span><br><span class="line">    interface eth0<span class="comment">#ç½‘å¡</span></span><br><span class="line">    virtual_router_id 51<span class="comment">#ä¸»å¤‡æœºçš„å€¼è¦ä¸€è‡´</span></span><br><span class="line">    priority 100<span class="comment">#ä¼˜å…ˆçº§ï¼Œä¸€èˆ¬ä¸»æœåŠ¡å™¨è®¾ç½®100 ï¼Œ å¤‡ä»½æœåŠ¡å™¨è¦&lt;100</span></span><br><span class="line">    advert_int 1</span><br><span class="line">    authentication &#123;<span class="comment"># è®¤è¯æ ¡éªŒ</span></span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.200.16<span class="comment">#è™šæ‹ŸIPåœ°å€</span></span><br><span class="line">        192.168.200.17</span><br><span class="line">        192.168.200.18</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="nginx-åŸç†"><a href="#nginx-åŸç†" class="headerlink" title="nginx åŸç†"></a>nginx åŸç†</h1><p>master å’Œ work </p><p>ä¸€ä¸ªmaster ï¼›å¤šä¸ªworker</p>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot ä½¿ç”¨è®°å½•</title>
      <link href="/2022/02/28/SpringBoot-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/02/28/SpringBoot-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBootä¸­æç¤ºCould-not-autowire-No-beans-of-â€˜xxxâ€™-type-foundå’ŒUnable-to-find-a-SpringBootC-çš„è§£å†³åŠæ³•"><a href="#SpringBootä¸­æç¤ºCould-not-autowire-No-beans-of-â€˜xxxâ€™-type-foundå’ŒUnable-to-find-a-SpringBootC-çš„è§£å†³åŠæ³•" class="headerlink" title="SpringBootä¸­æç¤ºCould not autowire. No beans of â€˜xxxâ€™ type foundå’ŒUnable to find a @SpringBootC..çš„è§£å†³åŠæ³•"></a>SpringBootä¸­æç¤ºCould not autowire. No beans of â€˜xxxâ€™ type foundå’ŒUnable to find a @SpringBootC..çš„è§£å†³åŠæ³•</h1><blockquote><p>é—®é¢˜æè¿°</p></blockquote><p>@autowired  çˆ†çº¢çš„ä¸€ç§æƒ…å†µ</p><p>æ²¡æœ‰å°†springbootçš„å¯åŠ¨ç±»æ”¾åœ¨åŒ…çš„æ ¹ç›®å½•ä¸­</p><blockquote><p>è§£å†³æ–¹æ³•</p></blockquote><p>å°†SpringBootçš„å¯åŠ¨ç±»æ”¾åˆ°é¡¹ç›®åŒ…çš„æ ¹ç›®å½•ä¸‹</p><p> <img src="/.io//image-20220228103017651.png" alt="image-20220228103017651"></p><p><a href="https://blog.csdn.net/u013347451/article/details/94415181">åŸæ–‡é“¾æ¥</a></p><h1 id="springbootæ•´åˆoracleé—®é¢˜"><a href="#springbootæ•´åˆoracleé—®é¢˜" class="headerlink" title="springbootæ•´åˆoracleé—®é¢˜"></a>springbootæ•´åˆoracleé—®é¢˜</h1><h2 id="java-sql-SQLException-ä¸æ”¯æŒçš„å­—ç¬¦é›†-åœ¨ç±»è·¯å¾„ä¸­æ·»åŠ -orai18n-jar-ZHS16GBK"><a href="#java-sql-SQLException-ä¸æ”¯æŒçš„å­—ç¬¦é›†-åœ¨ç±»è·¯å¾„ä¸­æ·»åŠ -orai18n-jar-ZHS16GBK" class="headerlink" title="java.sql.SQLException: ä¸æ”¯æŒçš„å­—ç¬¦é›† (åœ¨ç±»è·¯å¾„ä¸­æ·»åŠ  orai18n.jar): ZHS16GBK"></a>java.sql.SQLException: ä¸æ”¯æŒçš„å­—ç¬¦é›† (åœ¨ç±»è·¯å¾„ä¸­æ·»åŠ  orai18n.jar): ZHS16GBK</h2><blockquote><p>é—®é¢˜æè¿°</p></blockquote><p>ä½¿ç”¨mybatis ä»£ç ç”Ÿæˆå™¨æ—¶é‡åˆ°è¿™ä¸ªé—®é¢˜</p><blockquote><p>è§£å†³æ–¹æ³•</p></blockquote><p>å¯¼å…¥ orai18n.jar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.easyproject<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>orai18n<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;orai18n.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> question </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLä½¿ç”¨è®°å½•</title>
      <link href="/2022/02/28/MySQL%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/02/28/MySQL%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="æŠ¥é”™1140-In-aggregated-query-without-GROUP-BY-expression-1-of-SELECT-list-contains-nonaggreg"><a href="#æŠ¥é”™1140-In-aggregated-query-without-GROUP-BY-expression-1-of-SELECT-list-contains-nonaggreg" class="headerlink" title="æŠ¥é”™1140 - In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggreg"></a>æŠ¥é”™1140 - In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggreg</h1><blockquote><p>è§£å†³æ–¹æ³•</p></blockquote><p><a href="https://blog.csdn.net/weixin_43849590/article/details/109032710">åŸæ–‡é“¾æ¥</a></p>]]></content>
      
      
      <categories>
          
          <category> question </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥½ç”¨çš„å·¥å…·</title>
      <link href="/2022/02/21/%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7/"/>
      <url>/2022/02/21/%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<h1 id="å›¾ç‰‡å‹ç¼©å·¥å…·"><a href="#å›¾ç‰‡å‹ç¼©å·¥å…·" class="headerlink" title="å›¾ç‰‡å‹ç¼©å·¥å…·"></a>å›¾ç‰‡å‹ç¼©å·¥å…·</h1><ul><li><p><a href="https://saerasoft.com/caesium/">caesium</a></p><p><img src="/.io//image-20220221145835788.png" alt="image-20220221145835788"></p></li></ul><h1 id="jsonå·¥å…·ã€åŠ å¯†è§£å¯†ã€ç½‘ç»œç­‰ç­‰å·¥å…·ç½‘ç«™"><a href="#jsonå·¥å…·ã€åŠ å¯†è§£å¯†ã€ç½‘ç»œç­‰ç­‰å·¥å…·ç½‘ç«™" class="headerlink" title="jsonå·¥å…·ã€åŠ å¯†è§£å¯†ã€ç½‘ç»œç­‰ç­‰å·¥å…·ç½‘ç«™"></a>jsonå·¥å…·ã€åŠ å¯†è§£å¯†ã€ç½‘ç»œç­‰ç­‰å·¥å…·ç½‘ç«™</h1><ul><li><p><a href="https://www.bejson.com/enc/md5dsc/">BEJSON</a></p><img src="/.io//image-20220228095232243.png" alt="image-20220228095232243" style="zoom:80%;"></li><li><p><a href="https://www.fly63.com/tool/home.html">FLY63</a></p><img src="/.io//image-20220228095341058.png" alt="image-20220228095341058" style="zoom:80%;"></li><li><p><a href="https://tool.lu/">Tool.lu</a></p><p><img src="/.io//image-20220304151112548.png" alt="image-20220304151112548"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typoraä½¿ç”¨è®°å½•</title>
      <link href="/2022/02/21/typora%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/02/21/typora%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="typora-è®¾ç½®é«˜äº®ï¼Œæ‰©å±•è¯­æ³•"><a href="#typora-è®¾ç½®é«˜äº®ï¼Œæ‰©å±•è¯­æ³•" class="headerlink" title="typora è®¾ç½®é«˜äº®ï¼Œæ‰©å±•è¯­æ³•"></a>typora è®¾ç½®é«˜äº®ï¼Œæ‰©å±•è¯­æ³•</h1><p><img src="/.io//image-20220221143206302.png" alt="image-20220221143206302"></p><h1 id="è®¾ç½®typoraçš„ä¸»é¢˜"><a href="#è®¾ç½®typoraçš„ä¸»é¢˜" class="headerlink" title="è®¾ç½®typoraçš„ä¸»é¢˜"></a>è®¾ç½®typoraçš„ä¸»é¢˜</h1><p>åœ¨æ–‡ä»¶-ã€‹åå¥½è®¾ç½®-ã€‹å¤–è§‚-ã€‹ æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œ<code>.css</code>æ–‡ä»¶æ˜¯ä¸»é¢˜æ–‡ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹</p><p><a href="http://theme.typora.io/">ä¸»é¢˜market</a></p><p> <img src="/.io//image-20220221143351901.png" alt="image-20220221143351901"></p><h1 id="ä¿®æ”¹å¼•ç”¨å—é¢œè‰²"><a href="#ä¿®æ”¹å¼•ç”¨å—é¢œè‰²" class="headerlink" title="ä¿®æ”¹å¼•ç”¨å—é¢œè‰²"></a>ä¿®æ”¹å¼•ç”¨å—é¢œè‰²</h1><blockquote><p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">4px</span> solid <span class="number">#53e873</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#777777</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> question </category>
          
          <category> typora </category>
          
      </categories>
      
      
        <tags>
            
            <tag> question </tag>
            
            <tag> typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥½çœ‹çš„æ¸å˜è‰²æ­é…</title>
      <link href="/2022/02/21/%E5%A5%BD%E7%9C%8B%E7%9A%84%E6%B8%90%E5%8F%98%E8%89%B2%E6%90%AD%E9%85%8D/"/>
      <url>/2022/02/21/%E5%A5%BD%E7%9C%8B%E7%9A%84%E6%B8%90%E5%8F%98%E8%89%B2%E6%90%AD%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<blockquote><p>top_img: â€˜linear-gradient(45deg,#ccfbff,#ef96c5)â€™</p></blockquote><p> <img src="/.io//image-20220221134907313.png" alt="image-20220221134907313"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#EAD6EE,#A0F1EA)â€™</p></blockquote><p><img src="/.io//image-20220221135037734.png" alt="image-20220221135037734"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#eebd89,#d13abd)â€™</p></blockquote><p><img src="/.io//image-20220221135514949.png" alt="image-20220221135514949"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#f9957f,#f2f5d0)â€™</p></blockquote><p><img src="/.io//image-20220221135539575.png" alt="image-20220221135539575"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#eae5c9,#6cc6cb)â€™</p></blockquote><p><img src="/.io//image-20220221135616895.png" alt="image-20220221135616895"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#ef33b1,#f6e6bc)â€™</p></blockquote><p><img src="/.io//image-20220221135638175.png" alt="image-20220221135638175"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#9fa5d5,#e8f5c8)â€™</p></blockquote><p><img src="/.io//image-20220221135658589.png" alt="image-20220221135658589"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#c973ff,#aebaf8)â€™</p></blockquote><p><img src="/.io//image-20220221135721020.png" alt="image-20220221135721020"></p><blockquote><p>top_img: â€˜linear-gradient(45deg,#0c7bb3,#f2bae8)â€™</p></blockquote><p><img src="/.io//image-20220221135745835.png" alt="image-20220221135745835"></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
          <category> æ¸å˜è‰² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸å˜è‰² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå‘½ä»¤</title>
      <link href="/2022/02/21/git%E5%91%BD%E4%BB%A4/"/>
      <url>/2022/02/21/git%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add ***</span><br></pre></td></tr></table></figure><blockquote><p>æäº¤æ–‡ä»¶</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;commment&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä½¿ç”¨è®°å½•</title>
      <link href="/2022/02/21/git%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/02/21/git%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="gitkeep-æ–‡ä»¶"><a href="#gitkeep-æ–‡ä»¶" class="headerlink" title=".gitkeep æ–‡ä»¶"></a>.gitkeep æ–‡ä»¶</h1><blockquote><p>.gitkeep æ–‡ä»¶æè¿°</p></blockquote><p>gité»˜è®¤ä¸è¿½è¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå¦‚æœæƒ³è¦ä¸Šä¼ ç©ºæ–‡ä»¶å¤¹ï¼Œéœ€è¦æ·»åŠ .gitkeepæ–‡ä»¶</p><p><strong>gitä¼šå¿½ç•¥libä¸‹çš„æ–‡ä»¶å¹¶ä¿ç•™libæ–‡ä»¶å¤¹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lib/*</span><br><span class="line">!.gitkeep</span><br></pre></td></tr></table></figure><h1 id="git-add-xxxåä»ç„¶çˆ†çº¢-æ˜¯æœªè·Ÿè¸ªçŠ¶æ€"><a href="#git-add-xxxåä»ç„¶çˆ†çº¢-æ˜¯æœªè·Ÿè¸ªçŠ¶æ€" class="headerlink" title="git add xxxåä»ç„¶çˆ†çº¢ æ˜¯æœªè·Ÿè¸ªçŠ¶æ€"></a>git add xxxåä»ç„¶çˆ†çº¢ æ˜¯æœªè·Ÿè¸ªçŠ¶æ€</h1><blockquote><p>è§£å†³æ–¹æ³•</p></blockquote><p>ç›®æ ‡æ–‡ä»¶å¤¹ä¸‹ æœ‰ä¸€ä¸ª.git æ–‡ä»¶å¤¹ï¼Œåˆ é™¤å°±å¯ä»¥è§£å†³</p>]]></content>
      
      
      <categories>
          
          <category> question </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> question </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PLSQLä½¿ç”¨è®°å½•</title>
      <link href="/2022/02/21/PLSQL%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/02/21/PLSQL%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="ORA-12505-TNS-listener-does-not-currently-know-of-SID-given-in-connect-descriptor"><a href="#ORA-12505-TNS-listener-does-not-currently-know-of-SID-given-in-connect-descriptor" class="headerlink" title="ORA-12505,TNS:listener does not currently know of SID given in connect descriptor"></a>ORA-12505,TNS:listener does not currently know of SID given in connect descriptor</h1><blockquote><p>é—®é¢˜æè¿°</p></blockquote><p>ç›‘å¬æœåŠ¡é…ç½®æ–‡ä»¶æ²¡æœ‰ç”Ÿæ•ˆ</p><blockquote><p>è§£å†³æ–¹æ³•</p></blockquote><p>å³å‡»-ä»»åŠ¡ç®¡ç†å™¨-æœåŠ¡-OracleServiceORCL è¿è¡Œé‡å¯Oracle</p><p> <img src="/.io//image-20220221103908931.png" alt="image-20220221103908931"></p><p><a href="https://blog.csdn.net/wl_ldy/article/details/8012992">åŸæ–‡é“¾æ¥</a></p><h1 id="é…ç½®-ç›‘å¬ç¨‹åºå’ŒæœåŠ¡"><a href="#é…ç½®-ç›‘å¬ç¨‹åºå’ŒæœåŠ¡" class="headerlink" title="é…ç½® ç›‘å¬ç¨‹åºå’ŒæœåŠ¡"></a>é…ç½® ç›‘å¬ç¨‹åºå’ŒæœåŠ¡</h1><blockquote><p>ä½¿ç”¨ Net Configuration Assistant æ¥é…ç½®ç›‘å¬ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>Net Manager</strong></p></blockquote><p> <img src="/.io//image-20220221104418223-16454132129321.png" alt="image-20220221104418223"></p><p> <img src="/.io//image-20220221104635922.png" alt="image-20220221104635922"></p><blockquote><p>ä½¿ç”¨ Net Manager æ¥ç®¡ç†æœåŠ¡ç¨‹åºï¼Œä¹Ÿå¯ä»¥ç®¡ç†ç›‘å¬ç¨‹åº</p></blockquote><p> <img src="/.io//image-20220221104535764.png" alt="image-20220221104535764"></p><p> <img src="/.io//image-20220221104958859.png" alt="image-20220221104958859"></p><blockquote><p>è¯¥ç¨‹åºä¿®æ”¹çš„é…ç½®æ–‡ä»¶ æ˜¯ä½ ç¯å¢ƒå˜é‡ä¸­<code>TNS_ADMIN</code>é…ç½®çš„ </p><p>é»˜è®¤æ˜¯ <strong>C:\app\THINKPAD\product\11.2.0\dbhome_1\NETWORK\ADMIN</strong></p></blockquote><p> <img src="/.io//image-20220221105429689.png" alt="image-20220221105429689"></p><p><strong>ç›‘å¬å’ŒæœåŠ¡çš„é…ç½®æ–‡ä»¶</strong></p><p><img src="/.io//image-20220221105413361.png" alt="image-20220221105413361"></p><p><b style="color:red;font-size:25px;">æ³¨æ„ï¼š</b></p><blockquote><p>åœ¨ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ</p></blockquote><p>å³å‡»-ä»»åŠ¡ç®¡ç†å™¨-æœåŠ¡-OracleServiceORCL è¿è¡Œé‡å¯Oracle</p>]]></content>
      
      
      <categories>
          
          <category> question </category>
          
          <category> PLSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PLSQL </tag>
            
            <tag> question </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracleç‰¹æ€§</title>
      <link href="/2022/02/20/Oracle%E7%89%B9%E6%80%A7/"/>
      <url>/2022/02/20/Oracle%E7%89%B9%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h1><p>å­˜å‚¨è¿‡ç¨‹çš„ä¸€äº›çŸ¥è¯†ï¼Œæµ‹è¯•ã€å…¥å‚</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p> <img src="/.io//image-20220221092538826.png" alt="image-20220221092538826"></p><blockquote><p>å…¥å‚clobç±»å‹</p></blockquote><p>å°†clobç±»å‹æ”¹ä¸ºStringç±»å‹</p><p> <img src="/.io//image-20220221092704423.png" alt="image-20220221092704423"></p><p> ç›´æ¥ä½¿ç”¨Stringå­—ç¬¦ä¸²æµ‹è¯•</p><p> <img src="/.io//image-20220221092740869.png" alt="image-20220221092740869"></p><h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><blockquote><p>è·å–uuid</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--å‡½æ•°è¿”å›çš„æ˜¯32ä½ </span></span><br><span class="line"><span class="comment">--å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²åˆ†éš”è·å–è‡ªå·±æƒ³è¦çš„ä½æ•°</span></span><br><span class="line">sys_guid()</span><br></pre></td></tr></table></figure><h1 id="åºåˆ—-Sequence"><a href="#åºåˆ—-Sequence" class="headerlink" title="åºåˆ—(Sequence)"></a>åºåˆ—(Sequence)</h1><blockquote><p>åˆ›å»ºåºåˆ—</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE SEQUENCE SEQ_DEMO INCREMENT BY 1 START WITH 1 NOMAXvalue NOCYCLE NOCACHE;</span><br></pre></td></tr></table></figure><ol><li><p>è¯­æ³•</p><blockquote><p>CREATE SEQUENCE åºåˆ—å [ç›¸å…³å‚æ•°]</p></blockquote></li><li><p>å‚æ•°è¯´æ˜</p><blockquote><p>INCREMENT BY :åºåˆ—å˜åŒ–çš„æ­¥è¿›ï¼Œè´Ÿå€¼è¡¨ç¤ºé€’å‡ã€‚(é»˜è®¤1)<br>START WITH:åºåˆ—çš„åˆå§‹å€¼ ã€‚(é»˜è®¤1)<br>MAXvalue:åºåˆ—å¯ç”Ÿæˆçš„æœ€å¤§å€¼ã€‚(é»˜è®¤ä¸é™åˆ¶æœ€å¤§å€¼ï¼ŒNOMAXVALUE)<br>MINVALUE:åºåˆ—å¯ç”Ÿæˆçš„æœ€å°å€¼ã€‚(é»˜è®¤ä¸é™åˆ¶æœ€å°å€¼ï¼ŒNOMINVALUE)<br>CYCLE:ç”¨äºå®šä¹‰å½“åºåˆ—äº§ç”Ÿçš„å€¼è¾¾åˆ°é™åˆ¶å€¼åæ˜¯å¦å¾ªç¯(NOCYCLE:ä¸å¾ªç¯ï¼ŒCYCLE:å¾ªç¯)ã€‚<br>CACHE:è¡¨ç¤ºç¼“å­˜åºåˆ—çš„ä¸ªæ•°ï¼Œæ•°æ®åº“å¼‚å¸¸ç»ˆæ­¢å¯èƒ½ä¼šå¯¼è‡´åºåˆ—ä¸­æ–­ä¸è¿ç»­çš„æƒ…å†µï¼Œé»˜è®¤å€¼ä¸º20ï¼Œå¦‚æœä¸ä½¿ç”¨ç¼“å­˜å¯è®¾ç½®NOCACHE</p></blockquote></li><li><p>ä¿®æ”¹ã€åˆ é™¤åºåˆ—</p><blockquote><p>ä½¿ç”¨ <code>alter</code> å‘½ä»¤è¿›è¡Œä¿®æ”¹</p><p>ä½¿ç”¨ <code>drop</code> å‘½ä»¤åˆ é™¤</p></blockquote></li></ol><blockquote><p>ä½¿ç”¨åºåˆ—</p></blockquote><ul><li><p>currval</p><ul><li><code>currval</code> è¡¨ç¤ºåºåˆ—çš„å½“å‰å€¼ï¼Œæ–°åºåˆ—å¿…é¡»ä½¿ç”¨ä¸€æ¬¡<code>nextval</code> æ‰èƒ½è·å–åˆ°å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li></ul></li><li><p>nextval</p><ul><li><code>nextval</code> è¡¨ç¤ºåºåˆ—çš„ä¸‹ä¸€ä¸ªå€¼ã€‚æ–°åºåˆ—é¦–æ¬¡ä½¿ç”¨æ—¶è·å–çš„æ˜¯è¯¥åºåˆ—çš„åˆå§‹å€¼ï¼Œä»ç¬¬äºŒæ¬¡ä½¿ç”¨æ—¶å¼€å§‹æŒ‰ç…§è®¾ç½®çš„æ­¥è¿›é€’å¢</li></ul></li></ul><blockquote><p>æŸ¥è¯¢åºåˆ—çš„å€¼ï¼šselect seq_name.[currval,nextval] from dual;<br>æŸ¥çœ‹æ‰€æœ‰å·²åˆ›å»ºçš„åºåˆ—ï¼šselect * from user_sequences<br>SQLè¯­å¥ä¸­ä½¿ç”¨ï¼šinsert into table (id) values (seq_name.nextval)</p></blockquote><h2 id="PLSQLå›¾åƒåŒ–æ“ä½œ"><a href="#PLSQLå›¾åƒåŒ–æ“ä½œ" class="headerlink" title="PLSQLå›¾åƒåŒ–æ“ä½œ"></a>PLSQLå›¾åƒåŒ–æ“ä½œ</h2><p> <img src="/.io//image-20220221095508801.png" alt="image-20220221095508801"></p><h1 id="åŒ…æ¦‚å¿µ"><a href="#åŒ…æ¦‚å¿µ" class="headerlink" title="åŒ…æ¦‚å¿µ"></a>åŒ…æ¦‚å¿µ</h1><p> <img src="/.io//image-20220221095735510.png" alt="image-20220221095735510"></p><p>åŒ…ä¸‹æœ‰å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ã€ç±»å‹ã€å˜é‡ç­‰ç­‰ã€‚è°ƒç”¨æ—¶ä½¿ç”¨<strong>åŒ…å.å˜é‡å</strong></p><h2 id="PLSQLä¸‹ç¼–è¾‘åŒ…ä¸‹å­˜å‚¨è¿‡ç¨‹"><a href="#PLSQLä¸‹ç¼–è¾‘åŒ…ä¸‹å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="PLSQLä¸‹ç¼–è¾‘åŒ…ä¸‹å­˜å‚¨è¿‡ç¨‹"></a>PLSQLä¸‹ç¼–è¾‘åŒ…ä¸‹å­˜å‚¨è¿‡ç¨‹</h2><p> <img src="/.io//image-20220221100021421.png" alt="image-20220221100021421"></p><p>å·¦è¾¹æ˜¯å£°æ˜è¯­å¥ï¼Œå³è¾¹æ˜¯bodyï¼Œä¿®æ”¹å®Œè¦é‡æ–°ç¼–è¯‘</p><p> <img src="/.io//image-20220221100147575.png" alt="image-20220221100147575"></p><h1 id="Database-link"><a href="#Database-link" class="headerlink" title="Database link"></a>Database link</h1><p>oracleåœ¨è¿›è¡Œè·¨åº“è®¿é—®æ—¶ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºdblinkå®ç°,åˆ›å»ºdblinkï¼Œä»¥åŠé€šè¿‡dblinkå®Œæˆæ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤ç­‰æ“ä½œã€‚</p><blockquote><p>åˆ›å»ºdblink</p></blockquote><ul><li><p>ä½¿ç”¨sqlåˆ›å»º</p><blockquote><p>è¯­æ³•</p><p><strong>create public database link linekName connect to username identified by â€œpasswordâ€ USING â€˜dbnameâ€™</strong></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- ç¤ºä¾‹</span><br><span class="line">create public database link TESTLINK2 connect to test identified by &quot;123456&quot; USING &#x27;ORCL2&#x27;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨plsqlå›¾å½¢åˆ›å»º</p><p> <img src="/.io//image-20220221102129811.png" alt="image-20220221102129811"></p></li></ul><blockquote><p>ä½¿ç”¨dblink</p></blockquote><p><strong>è¡¨å@linkå</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># VARCHAR2æ˜¯å­—èŠ‚è¿˜æ˜¯å­—ç¬¦</span><br><span class="line"></span><br><span class="line">varchar2(20) ä¸­çš„20 è¡¨ç¤º20ä¸ªå­—èŠ‚</span><br><span class="line"></span><br><span class="line">&gt; oracleä¸­varchar2(20) æ±‰å­— å ä½ è·Ÿå­—ç¬¦é›†è®¾ç½®æœ‰å…³</span><br><span class="line">&gt;</span><br><span class="line">&gt; * å­—ç¬¦é›†è®¾ç½®æˆZHS16GBKï¼šæ±‰å­—å 2ä¸ªå­—èŠ‚ã€‚</span><br><span class="line">&gt;</span><br><span class="line">&gt; * å­—ç¬¦é›†è®¾ç½®æˆAL32UTF8ï¼šæ±‰å­—å 3ä¸ªå­—èŠ‚ã€‚</span><br><span class="line"></span><br><span class="line">```plsql</span><br><span class="line">-- æŸ¥è¯¢å­—ç¬¦é›†</span><br><span class="line">select * from v$nls_parameters t where t.PARAMETER=&#x27;NLS_CHARACTERSET&#x27;;</span><br></pre></td></tr></table></figure><p> <img src="/.io//image-20220228100421049.png" alt="image-20220228100421049"></p><h1 id="decodeå‡½æ•°æ˜¾ç¤ºä¸å…¨é—®é¢˜"><a href="#decodeå‡½æ•°æ˜¾ç¤ºä¸å…¨é—®é¢˜" class="headerlink" title="decodeå‡½æ•°æ˜¾ç¤ºä¸å…¨é—®é¢˜"></a>decodeå‡½æ•°æ˜¾ç¤ºä¸å…¨é—®é¢˜</h1><blockquote><p>æè¿°</p></blockquote><p>decodeçš„åˆ¤æ–­ç»“æœæ²¡æœ‰å…¨éƒ¨æ˜¾ç¤º</p><p> <img src="/.io//image-20220228101002250.png" alt="image-20220228101002250"></p><blockquote><p>è§£å†³æ–¹æ³•</p></blockquote><ol><li>åœ¨decodeåé¢çš„ç¬¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ç»“æœè¡¨è¾¾å¼ å¤šåŠ å‡ ä½å­—ç¬¦</li></ol><h1 id="æ¡ä»¶åˆ¤æ–­å‡½æ•°-case-when-then-else"><a href="#æ¡ä»¶åˆ¤æ–­å‡½æ•°-case-when-then-else" class="headerlink" title="æ¡ä»¶åˆ¤æ–­å‡½æ•° case-when-then-else"></a>æ¡ä»¶åˆ¤æ–­å‡½æ•° case-when-then-else</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> --ç¬¬ä¸€ç§æ ¼å¼</span><br><span class="line"> select case aae100</span><br><span class="line">          when &#x27;1&#x27; then</span><br><span class="line">           &#x27;æœ‰æ•ˆæœ‰&#x27;</span><br><span class="line">          when &#x27;0&#x27; then</span><br><span class="line">           &#x27;æ— æ•ˆ&#x27;</span><br><span class="line">          else</span><br><span class="line">           &#x27;å¯¼å…¥&#x27;</span><br><span class="line">        end</span><br><span class="line">   from rc11;</span><br><span class="line">--ç¬¬äºŒç§æ ¼å¼</span><br><span class="line">select case</span><br><span class="line">         when aae100 = &#x27;1&#x27; then</span><br><span class="line">          &#x27;æœ‰æ•ˆaa&#x27;</span><br><span class="line">         when aae100 = &#x27;0&#x27; then</span><br><span class="line">          &#x27;æ— æ•ˆ&#x27;</span><br><span class="line">         else</span><br><span class="line">          &#x27;å¯¼å…¥&#x27;</span><br><span class="line">       end</span><br><span class="line">  from rc11;</span><br></pre></td></tr></table></figure><blockquote><p>é—®é¢˜ï¼š</p><ul><li>ä½¿ç”¨åˆ¤æ–­å‡½æ•°å è¡¨è¾¾å¼ç»“æœæ˜¾ç¤ºä¸å…¨</li></ul><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li>åœ¨ç¬¬ä¸€åˆ¤æ–­æ¡ä»¶åå¤šåŠ 1ä½ä¸­æ–‡å­—ç¬¦ï¼Œç›¸å½“äºä¸¤å­—èŠ‚å­—ç¬¦</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> DBSM </category>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DBSM </tag>
            
            <tag> Oracle </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€ç§é’¥ã€å…¬é’¥</title>
      <link href="/2022/02/20/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E7%A7%81%E9%92%A5%E3%80%81%E5%85%AC%E9%92%A5/"/>
      <url>/2022/02/20/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E7%A7%81%E9%92%A5%E3%80%81%E5%85%AC%E9%92%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ å¯†æŠ€æœ¯æè¿°"><a href="#åŠ å¯†æŠ€æœ¯æè¿°" class="headerlink" title="åŠ å¯†æŠ€æœ¯æè¿°"></a>åŠ å¯†æŠ€æœ¯æè¿°</h1><p>åŠ å¯†æŠ€æœ¯æœ‰å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ï¼Œå¯¹ç§°åŠ å¯†åªæœ‰ä¸€ä¸ªå¯†é’¥ï¼Œé—®é¢˜æ˜¯å¦‚ä½•å®‰å…¨çš„ä¼ é€å¯†é’¥ï¼Œå¸¸è§çš„å¯¹ç§°åŠ å¯†æŠ€æœ¯æœ‰AESã€DESï¼›éå¯¹ç§°åŠ å¯†æŠ€æœ¯æœ‰ä¸¤ä¸ªå¯†é’¥ï¼šç§é’¥å’Œå…¬é’¥ï¼Œé—®é¢˜æ˜¯ä¸­é—´äººçš„æ”»å‡»é—®é¢˜ï¼Œå¸¸è§çš„éå¯¹ç§°åŠ å¯†æŠ€æœ¯æœ‰RSAã€DSA;åŠ å¯†æŠ€æœ¯åœ¨ä¹‹åçš„åšæ–‡ä¸­è®¨è®ºã€‚</p><h1 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h1><p>å¯¹ç§°åŠ å¯†åªæœ‰ä¸€ä¸ªå¯†é’¥ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸€ä¸ªå¯†é’¥ï¼Œé—®é¢˜æ˜¯å¦‚ä½•å®‰å…¨çš„ä¼ é€å¯†é’¥ã€‚</p><h1 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h1><p>éå¯¹ç§°åŠ å¯†ä¼šæœ‰ä¸¤ä¸ªå¯†é’¥ï¼Œå…¬é’¥å’Œç§é’¥ï¼Œä¸€èˆ¬å¯†é’¥çš„åˆ›å»ºè€…æŒæœ‰ç§é’¥ï¼Œä¿¡æ¯çš„æ¥å—è€…æŒæœ‰å…¬é’¥ï¼›ç§é’¥åªæœ‰ä¸€ä»½ï¼Œå…¬é’¥å¯ä»¥åˆ†å‘ç»™å¾ˆå¤šäººã€‚</p><blockquote><p>ç§é’¥æŒæœ‰è€…å‘é€ç»™å…¬é’¥æ¶ˆæ¯ ï¼Œè¦æ±‚æ¶ˆæ¯ä¸èƒ½è¢«ç¯¡æ”¹ï¼Œå¯ä»¥è¢«ç›—å–ï¼Œå…¬é’¥å¾ˆå¤šäººæ‹¥æœ‰ï¼Œå¯ä»¥è¢«å¾ˆå¤šä¸ªäººçŸ¥é“ï¼Œæ¶ˆæ¯ä¸éœ€è¦ä¿å¯†ã€‚</p></blockquote><p>ç§é’¥æŒæœ‰è€… -&gt; ä½¿ç”¨ç§é’¥åŠ ç­¾å¹¶å‘é€ä¸€ä»½æºæ¶ˆæ¯ -&gt;å…¬é’¥æŒæœ‰è€… ä½¿ç”¨å…¬é’¥éªŒç­¾å¹¶ä¸é™„å¸¦çš„å…ƒæ¶ˆæ¯æ¯”å¯¹ã€‚</p><blockquote><p>å…¬é’¥æŒæœ‰è€… å‘é€ç»™ ç§é’¥æ¶ˆæ¯ï¼Œè¦æ±‚æ¶ˆæ¯å¿…é¡»ä¿å¯†ï¼Œç§é’¥åªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥åªæœ‰ç§é’¥æŒæœ‰è€…å¯è§ã€‚</p></blockquote><p>å…¬é’¥æŒæœ‰è€…-&gt; ä½¿ç”¨å…¬é’¥åŠ å¯†å‘é€æ¶ˆæ¯ -&gt; ç§é’¥æŒæœ‰è€… ä½¿ç”¨ç§é’¥è§£å¯†</p><h1 id="å¯¹ç§°åŠ å¯†-ä¸-éå¯¹ç§°åŠ å¯†æ¯”è¾ƒ"><a href="#å¯¹ç§°åŠ å¯†-ä¸-éå¯¹ç§°åŠ å¯†æ¯”è¾ƒ" class="headerlink" title="å¯¹ç§°åŠ å¯† ä¸ éå¯¹ç§°åŠ å¯†æ¯”è¾ƒ"></a>å¯¹ç§°åŠ å¯† ä¸ éå¯¹ç§°åŠ å¯†æ¯”è¾ƒ</h1><table><thead><tr><th align="center">åŠ å¯†ç±»å‹</th><th align="center">å¸¸è§ç®—æ³•</th><th align="center">åŠ å¯†é€Ÿåº¦</th><th align="center">é‡åˆ°çš„é—®é¢˜</th><th align="center">è§£å†³æ–¹æ³•</th></tr></thead><tbody><tr><td align="center">å¯¹ç§°åŠ å¯†</td><td align="center">AESã€DES</td><td align="center">å¿«</td><td align="center">å¯†é’¥é…é€é—®é¢˜</td><td align="center">é¢å¯¹é¢äº¤æ¢æˆ–è€…ä½¿ç”¨éå¯¹ç§°åŠ å¯†é…é€</td></tr><tr><td align="center">éå¯¹ç§°åŠ å¯†</td><td align="center">RSAã€DSA</td><td align="center">æ…¢</td><td align="center">ä¸­é—´äººæ”»å‡»é—®é¢˜</td><td align="center">é€šè¿‡è¯ä¹¦ä¸­å¿ƒæ¥è§£å†³ä¸­é—´äººæ”»å‡»é—®é¢˜</td></tr></tbody></table><h1 id="åŠ å¯†-ç½‘ç«™"><a href="#åŠ å¯†-ç½‘ç«™" class="headerlink" title="åŠ å¯† ç½‘ç«™"></a>åŠ å¯† ç½‘ç«™</h1><p><a href="https://www.bejson.com/">åŠ å¯†å·¥å…·ç½‘ç«™</a></p>]]></content>
      
      
      <categories>
          
          <category> åŠ å¯†æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éå¯¹ç§°åŠ å¯† </tag>
            
            <tag> å¯¹ç§°åŠ å¯† </tag>
            
            <tag> å…¬é’¥ </tag>
            
            <tag> ç§é’¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SecureFXä¸­æ–‡ä¹±ç </title>
      <link href="/2022/02/20/SecureFX%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/"/>
      <url>/2022/02/20/SecureFX%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é—®é¢˜æè¿°</p></blockquote><p>secureFX æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤ºä¹±ç </p><p> <img src="/.io//watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NDA0MjU4,size_16,color_FFFFFF,t_70.png" alt="img"></p><blockquote><p>è§£å†³æ–¹æ³•</p></blockquote><p>ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶ä¸­ <strong>â€œFilenames Always Use UTF8â€=00000001</strong></p><ol><li><p>å…¨å±€é…ç½®æ–‡ä»¶è·¯å¾„</p><p> <img src="/.io//image-20220220181420806.png" alt="image-20220220181420806"></p></li><li><p>è¿›å…¥sessionç›®å½•ï¼Œæ‰¾åˆ°å¯¹åº”çš„iniæ–‡ä»¶</p><p> <img src="/.io//image-20220220181524504.png" alt="image-20220220181524504"></p></li><li><p>ä¿®æ”¹ <strong>Filenames Always Use UTF8</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:<span class="attr">&quot;Filenames Always Use UTF8&quot;</span>=<span class="number">00000001</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> question </category>
          
          <category> SecureFX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> question </tag>
            
            <tag> SecureFX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7å¼€å¯ç«¯å£</title>
      <link href="/2022/02/20/centos7%E5%BC%80%E5%90%AF%E7%AB%AF%E5%8F%A3/"/>
      <url>/2022/02/20/centos7%E5%BC%80%E5%90%AF%E7%AB%AF%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¼€å¯ç«¯å£ 15672</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=15672/tcp --permanent</span><br></pre></td></tr></table></figure><blockquote><p>é‡å¯é˜²ç«å¢™</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service</span><br><span class="line">æˆ–è€…</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹ç«¯å£çš„çŠ¶æ€</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --query-port=15672/tcp</span><br></pre></td></tr></table></figure><blockquote><p>å…³é—­é˜²ç«å¢™</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service </span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹ç«¯å£å ç”¨çŠ¶æ€</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -lnp|grep 15672</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹å¼€æ”¾ç«¯å£åˆ—è¡¨</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> centos7 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rabbitmqå­¦ä¹ </title>
      <link href="/2022/02/16/rabbitmq%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/02/16/rabbitmq%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¶ˆæ¯æ¨¡å‹"><a href="#æ¶ˆæ¯æ¨¡å‹" class="headerlink" title="æ¶ˆæ¯æ¨¡å‹"></a>æ¶ˆæ¯æ¨¡å‹</h1><h2 id="åŸºæœ¬æ¶ˆæ¯æ¨¡å‹"><a href="#åŸºæœ¬æ¶ˆæ¯æ¨¡å‹" class="headerlink" title="åŸºæœ¬æ¶ˆæ¯æ¨¡å‹"></a>åŸºæœ¬æ¶ˆæ¯æ¨¡å‹</h2><p>ä¸€ä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…</p><h2 id="workæ¶ˆæ¯æ¨¡å‹"><a href="#workæ¶ˆæ¯æ¨¡å‹" class="headerlink" title="workæ¶ˆæ¯æ¨¡å‹"></a>workæ¶ˆæ¯æ¨¡å‹</h2><p>èƒ½è€…å¤šåŠ³ï¼Œé»˜è®¤æ˜¯å¹³å‡åˆ†é…</p><p>è¿™é‡Œæ˜¯è®¾ç½®çš„æ¶ˆè´¹è€…çš„æ¶ˆè´¹ç­–ç•¥ï¼Œå¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€ä¸ªé˜Ÿåˆ—</p><blockquote><p>é€šè¿‡ BasicQos æ–¹æ³•è®¾ç½®prefetchCount = 1ã€‚è¿™æ ·RabbitMQå°±ä¼šä½¿å¾—æ¯ä¸ªConsumeråœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹æœ€å¤šå¤„ç†1ä¸ªMessageã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æ¥æ”¶åˆ°è¯¥Consumerçš„ackå‰ï¼Œä»–å®ƒä¸ä¼šå°†æ–°çš„Messageåˆ†å‘ç»™å®ƒã€‚ç›¸åï¼Œå®ƒä¼šå°†å…¶åˆ†æ´¾ç»™ä¸æ˜¯ä»ç„¶å¿™ç¢Œçš„ä¸‹ä¸€ä¸ªConsumerã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šprefetchCountåœ¨æ‰‹åŠ¨ackçš„æƒ…å†µä¸‹æ‰ç”Ÿæ•ˆï¼Œè‡ªåŠ¨ackä¸ç”Ÿæ•ˆã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œkavitoã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/kavito/article/details/91403659">https://blog.csdn.net/kavito/article/details/91403659</a></p></blockquote><h2 id="Publish-subscribeï¼ˆäº¤æ¢æœºç±»å‹ï¼šFanoutï¼Œä¹Ÿç§°ä¸ºå¹¿æ’­-ï¼‰"><a href="#Publish-subscribeï¼ˆäº¤æ¢æœºç±»å‹ï¼šFanoutï¼Œä¹Ÿç§°ä¸ºå¹¿æ’­-ï¼‰" class="headerlink" title="Publish/subscribeï¼ˆäº¤æ¢æœºç±»å‹ï¼šFanoutï¼Œä¹Ÿç§°ä¸ºå¹¿æ’­ ï¼‰"></a><strong>Publish/subscribeï¼ˆäº¤æ¢æœºç±»å‹ï¼š</strong>Fanoutï¼Œä¹Ÿç§°ä¸ºå¹¿æ’­ <strong>ï¼‰</strong></h2><h2 id="Routing-è·¯ç”±æ¨¡å‹ï¼ˆäº¤æ¢æœºç±»å‹ï¼šdirectï¼‰"><a href="#Routing-è·¯ç”±æ¨¡å‹ï¼ˆäº¤æ¢æœºç±»å‹ï¼šdirectï¼‰" class="headerlink" title="Routing è·¯ç”±æ¨¡å‹ï¼ˆäº¤æ¢æœºç±»å‹ï¼šdirectï¼‰"></a>Routing è·¯ç”±æ¨¡å‹ï¼ˆäº¤æ¢æœºç±»å‹ï¼šdirectï¼‰</h2><h1 id="Topics-é€šé…ç¬¦æ¨¡å¼ï¼ˆäº¤æ¢æœºç±»å‹ï¼štopicsï¼‰"><a href="#Topics-é€šé…ç¬¦æ¨¡å¼ï¼ˆäº¤æ¢æœºç±»å‹ï¼štopicsï¼‰" class="headerlink" title="Topics é€šé…ç¬¦æ¨¡å¼ï¼ˆäº¤æ¢æœºç±»å‹ï¼štopicsï¼‰"></a>Topics é€šé…ç¬¦æ¨¡å¼ï¼ˆäº¤æ¢æœºç±»å‹ï¼štopicsï¼‰</h1><h1 id="äº¤æ¢æœºç±»å‹"><a href="#äº¤æ¢æœºç±»å‹" class="headerlink" title="äº¤æ¢æœºç±»å‹"></a>äº¤æ¢æœºç±»å‹</h1><blockquote><p>Fanoutï¼šå¹¿æ’­ï¼Œå°†æ¶ˆæ¯äº¤ç»™æ‰€æœ‰ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—</p><p>Directï¼šå®šå‘ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆæŒ‡å®šrouting key çš„é˜Ÿåˆ—</p><p>Topicï¼šé€šé…ç¬¦ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆrouting patternï¼ˆè·¯ç”±æ¨¡å¼ï¼‰ çš„é˜Ÿåˆ—</p><p>Headerï¼šheaderæ¨¡å¼ä¸routingä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œheaderæ¨¡å¼å–æ¶ˆroutingkeyï¼Œä½¿ç”¨headerä¸­çš„ key/valueï¼ˆé”®å€¼å¯¹ï¼‰åŒ¹é…é˜Ÿåˆ—ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œkavitoã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/kavito/article/details/91403659">https://blog.csdn.net/kavito/article/details/91403659</a></p></blockquote><p><strong>Exchangeï¼ˆäº¤æ¢æœºï¼‰åªè´Ÿè´£è½¬å‘æ¶ˆæ¯ï¼Œä¸å…·å¤‡å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›</strong>ï¼Œå› æ­¤å¦‚æœæ²¡æœ‰ä»»ä½•é˜Ÿåˆ—ä¸Exchangeç»‘å®šï¼Œæˆ–è€…æ²¡æœ‰ç¬¦åˆè·¯ç”±è§„åˆ™çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸¢å¤±ï¼</p><h2 id="Fanout"><a href="#Fanout" class="headerlink" title="Fanout"></a>Fanout</h2><h2 id="Direct"><a href="#Direct" class="headerlink" title="Direct"></a>Direct</h2><h2 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h2><h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><h1 id="æ‰‹åŠ¨ACK"><a href="#æ‰‹åŠ¨ACK" class="headerlink" title="æ‰‹åŠ¨ACK"></a>æ‰‹åŠ¨ACK</h1>]]></content>
      
      
      <categories>
          
          <category> Message Queue </category>
          
          <category> rabbitmq </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rabbitmq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rabbitmq å‘½ä»¤</title>
      <link href="/2022/02/16/rabbitmq-%E5%91%BD%E4%BB%A4/"/>
      <url>/2022/02/16/rabbitmq-%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é‡å¯æœåŠ¡</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é‡å¯æœåŠ¡</span></span><br></pre></td></tr></table></figure><blockquote><p>å¯åŠ¨æœåŠ¡</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq-server -detached</span><br></pre></td></tr></table></figure><blockquote><p>å…³é—­æœåŠ¡</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl stop</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl status</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Message Queue </category>
          
          <category> rabbitmq </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rabbitmq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterflyä¸»é¢˜ä½¿ç”¨</title>
      <link href="/2022/01/30/Butterfly%E4%B8%BB%E9%A2%98%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/01/30/Butterfly%E4%B8%BB%E9%A2%98%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»ºmenu"><a href="#åˆ›å»ºmenu" class="headerlink" title="åˆ›å»ºmenu"></a>åˆ›å»ºmenu</h1><blockquote><p>åˆ›å»ºåˆ†ç±»</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hexo new page archives <span class="comment">#æ—¶é—´è½´</span></span><br><span class="line">hexo new page tags <span class="comment">#æ ‡ç­¾</span></span><br><span class="line">hexo new page categories <span class="comment">#åˆ†ç±»</span></span><br><span class="line">hexo new page music <span class="comment">#éŸ³ä¹</span></span><br><span class="line">hexo new page Gallery <span class="comment">#ç…§ç‰‡</span></span><br><span class="line">hexo new page movies <span class="comment">#ç”µå½±</span></span><br><span class="line">hexo new page link <span class="comment">#å‹é“¾</span></span><br><span class="line">hexo new page about <span class="comment">#å…³äº</span></span><br></pre></td></tr></table></figure><blockquote><p>_config.butterfly.yml</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">é¦–é¡µ:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">æ—¶é—´è½´:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">æ ‡ç­¾:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">åˆ†ç±»:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">æ¸…å•||fa</span> <span class="attr">fa-heartbeat:</span></span><br><span class="line">    <span class="string">éŸ³ä¹:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">    <span class="string">ç…§ç‰‡:</span> <span class="string">/Gallery/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-images</span></span><br><span class="line">    <span class="string">ç”µå½±:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line">  <span class="string">å‹é“¾:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">å…³äº:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><h1 id="ä»£ç é«˜äº®æ˜¾ç¤º"><a href="#ä»£ç é«˜äº®æ˜¾ç¤º" class="headerlink" title="ä»£ç é«˜äº®æ˜¾ç¤º"></a>ä»£ç é«˜äº®æ˜¾ç¤º</h1><blockquote><p>_config.butterfly.yml</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="string">light</span></span><br></pre></td></tr></table></figure><h1 id="ä¸»é¡µæ–‡ç« èŠ‚é€‰"><a href="#ä¸»é¡µæ–‡ç« èŠ‚é€‰" class="headerlink" title="ä¸»é¡µæ–‡ç« èŠ‚é€‰"></a>ä¸»é¡µæ–‡ç« èŠ‚é€‰</h1><blockquote><p>é€‰é¡¹</p></blockquote><ol><li>descriptionï¼š åªæ˜¾ç¤ºdescription</li><li>bothï¼š ä¼˜å…ˆé€‰æ‹©descriptionï¼Œå¦‚æœæ²¡æœ‰é…ç½®descriptionï¼Œåˆ™æ˜¾ç¤ºè‡ªåŠ¨èŠ‚é€‰çš„å†…å®¹</li><li>auto_excerptï¼šåªæ˜¾ç¤ºè‡ªåŠ¨èŠ‚é€‰</li><li>falseï¼š ä¸æ˜¾ç¤ºæ–‡ç« å†…å®¹</li></ol><blockquote><p>_config.butterfly.yml</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure><p>description åœ¨ front-matterä¸­æ·»åŠ </p><h1 id="æ–‡ç« é¡¶éƒ¨å›¾"><a href="#æ–‡ç« é¡¶éƒ¨å›¾" class="headerlink" title="æ–‡ç« é¡¶éƒ¨å›¾"></a>æ–‡ç« é¡¶éƒ¨å›¾</h1><blockquote><p>å¦‚æœä¸æ˜¾ç¤ºé¡¶éƒ¨å›¾ï¼Œ_config.butterfly.yml ä¸­  disable_top_imgï¼štrue</p></blockquote><p><a href="https://butterfly.js.org/posts/4aa8abbe/#%E4%B8%BB%E9%A0%81%E6%96%87%E7%AB%A0%E7%AF%80%E9%81%B8-%E8%87%AA%E5%8B%95%E7%AF%80%E9%81%B8%E5%92%8C%E6%96%87%E7%AB%A0%E9%A0%81description">é…ç½®ä¸­çš„å…¶ä»–å€¼</a></p><blockquote><p>æ–‡ç«  front-matter ä¸­ é…ç½®top_img</p></blockquote><p><a href="https://butterfly.js.org/posts/4aa8abbe/#%E9%A0%82%E9%83%A8%E5%9C%96">é…ç½®ä¸­çš„å€¼</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">top_img:</span> <span class="literal">false</span> <span class="comment"># ä¸æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class="line"><span class="attr">top_img:</span> <span class="string">orange</span> <span class="comment"># æ˜¾ç¤ºé¢œè‰²</span></span><br><span class="line"><span class="attr">top_img:</span> <span class="string">&#x27;linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)&#x27;</span> <span class="comment"># æ˜¾ç¤ºæ¸å˜è‰²</span></span><br><span class="line"><span class="attr">top_img:</span> <span class="string">imgé“¾æ¥</span> <span class="comment"># æ˜¾ç¤ºå›¾ç‰‡ï¼Œè¿™ä¸ªå›¾ç‰‡çš„è·¯å¾„æ˜¯ä»æ ¹ç›®å½•æ‹¼æ¥çš„ï¼Œå¦‚æœè¦æ”¾åœ¨æœ¬åœ°ï¼Œå°±è¦æ”¾åœ¨ä¸»é¢˜çš„é…ç½®é™æ€èµ„æºä¸­ï¼Œä½¿ç”¨å›¾åºŠè§£å†³</span></span><br></pre></td></tr></table></figure><h1 id="æ–‡ç« ç½®é¡¶"><a href="#æ–‡ç« ç½®é¡¶" class="headerlink" title="æ–‡ç« ç½®é¡¶"></a>æ–‡ç« ç½®é¡¶</h1><blockquote><p>ç›´æ¥åœ¨æ–‡ç« çš„front-matteråŒºåŸŸé‡Œæ·»åŠ sticky: 1å±æ€§æ¥æŠŠè¿™ç¯‡æ–‡ç« ç½®é¡¶ã€‚æ•°å€¼è¶Šå¤§ï¼Œç½®é¡¶çš„ä¼˜å…ˆçº§è¶Šå¤§ã€‚</p></blockquote><h1 id="æ–‡ç« å°é¢"><a href="#æ–‡ç« å°é¢" class="headerlink" title="æ–‡ç« å°é¢"></a>æ–‡ç« å°é¢</h1><blockquote><p>æ–‡ç« çš„markdownæ–‡æ¡£ä¸Š,åœ¨Front-matteræ·»åŠ cover,å¹¶å¡«ä¸Šè¦æ˜¾ç¤ºçš„å›¾ç‰‡åœ°å€</p></blockquote><blockquote><p>é…ç½®é»˜è®¤çš„cover</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦æ˜¾ç¤ºæ–‡ç« å°é¢</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># å°é¢æ˜¾ç¤ºçš„ä½ç½®</span></span><br><span class="line">  <span class="comment"># ä¸‰ä¸ªå€¼å¯é…ç½® left , right , both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># å½“æ²¡æœ‰è®¾ç½®coveræ—¶ï¼Œé»˜è®¤çš„å°é¢æ˜¾ç¤º</span></span><br><span class="line">  <span class="attr">default_cover:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png</span></span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨æœ¬åœ°å›¾ç‰‡</p></blockquote><p>åœ¨source åˆ›å»ºä¸€ä¸ªresources å­˜æ”¾é™æ€èµ„æºï¼Œåº”ç”¨è·¯å¾„/resources/imgâ€™name.jsp</p><h1 id="æ–‡ç« æ¨é€"><a href="#æ–‡ç« æ¨é€" class="headerlink" title="æ–‡ç« æ¨é€"></a>æ–‡ç« æ¨é€</h1><blockquote><p>ä¸»é¢˜é…ç½®æ–‡ä»¶</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># æ˜¾ç¤ºæ¨èæ–‡ç« æ•°ç›®</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated æ–‡ç« æ—¥æœŸæ˜¾ç¤ºåˆ›å»ºæ—¥æˆ–è€…æ›´æ–°æ—¥</span></span><br></pre></td></tr></table></figure><h1 id="æ–‡ç« åˆ†é¡µæŒ‰é’®"><a href="#æ–‡ç« åˆ†é¡µæŒ‰é’®" class="headerlink" title="æ–‡ç« åˆ†é¡µæŒ‰é’®"></a>æ–‡ç« åˆ†é¡µæŒ‰é’®</h1><p>false ä¸æ˜¾ç¤º</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># post_pagination (åˆ†é¡µ)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="comment"># 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å¤´åƒè®¾ç½®"><a href="#å¤´åƒè®¾ç½®" class="headerlink" title="å¤´åƒè®¾ç½®"></a>å¤´åƒè®¾ç½®</h1><p>å¤´åƒä¿å­˜åœ¨source/resourcesç›®å½•ä¸‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/resources/avatar.jpg</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦æ—‹è½¬</span></span><br></pre></td></tr></table></figure><h1 id="å¤åˆ¶ç›¸å…³é…ç½®"><a href="#å¤åˆ¶ç›¸å…³é…ç½®" class="headerlink" title="å¤åˆ¶ç›¸å…³é…ç½®"></a>å¤åˆ¶ç›¸å…³é…ç½®</h1><blockquote><p>å…³é—­ å¤åˆ¶æœ‰ç‰ˆæƒä¿¡æ¯</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span></span><br></pre></td></tr></table></figure><h1 id="Footer-é…ç½®"><a href="#Footer-é…ç½®" class="headerlink" title="Footer é…ç½®"></a>Footer é…ç½®</h1><h2 id="åšå®¢å¹´ä»½"><a href="#åšå®¢å¹´ä»½" class="headerlink" title="åšå®¢å¹´ä»½"></a>åšå®¢å¹´ä»½</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2022</span></span><br></pre></td></tr></table></figure><h2 id="é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬"><a href="#é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬" class="headerlink" title="é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬"></a>é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2022</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">æˆ‘æ¥åˆ°ã€æˆ‘çœ‹è§ã€æˆ‘è®°å½•ï¼</span></span><br></pre></td></tr></table></figure><h1 id="ä¾§è¾¹æ é…ç½®"><a href="#ä¾§è¾¹æ é…ç½®" class="headerlink" title="ä¾§è¾¹æ é…ç½®"></a>ä¾§è¾¹æ é…ç½®</h1><h2 id="è®¿é—®äººæ•°-busanzi"><a href="#è®¿é—®äººæ•°-busanzi" class="headerlink" title="è®¿é—®äººæ•° busanzi"></a>è®¿é—®äººæ•° busanzi</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œæ—¶é—´"><a href="#è¿è¡Œæ—¶é—´" class="headerlink" title="è¿è¡Œæ—¶é—´"></a>è¿è¡Œæ—¶é—´</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">2</span><span class="string">/5/2022</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br><span class="line">  <span class="comment">##ç½‘é¡µå¼€é€šæ—¶é—´</span></span><br><span class="line">  <span class="comment">#æ ¼å¼: æœˆ/æ—¥/å¹´ æ—¶é—´</span></span><br><span class="line">  <span class="comment">#ä¹Ÿå¯ä»¥å†™æˆ å¹´/æœˆ/æ—¥ æ—¶é—´</span></span><br></pre></td></tr></table></figure><h2 id="æ˜¾ç¤ºæœ€æ–°è¯„è®º"><a href="#æ˜¾ç¤ºæœ€æ–°è¯„è®º" class="headerlink" title="æ˜¾ç¤ºæœ€æ–°è¯„è®º"></a>æ˜¾ç¤ºæœ€æ–°è¯„è®º</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">newest_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span><span class="comment"># æ˜¾ç¤ºæ¡æ•°</span></span><br><span class="line">  <span class="attr">storage:</span> <span class="number">10</span> <span class="comment"># ç¼“å­˜åˆ·æ–°æ—¶é—´/min</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦æ˜¾ç¤ºå¤´åƒ</span></span><br></pre></td></tr></table></figure><h1 id="è¯„è®ºé…ç½®"><a href="#è¯„è®ºé…ç½®" class="headerlink" title="è¯„è®ºé…ç½®"></a>è¯„è®ºé…ç½®</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Up to two comments system, the first will be shown as default</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Valine,Disqus</span> <span class="comment"># ä½¿ç”¨çš„è¯„è®ºç³»ç»Ÿ</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># Display the comment name next to the button</span></span><br><span class="line">  <span class="comment"># lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line">  <span class="comment"># If you set it to true, the comment count will be invalid</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">true</span> <span class="comment"># è¯„è®ºæ‡’åŠ è½½</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Display comment count in top_img</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in Home Page</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ç½‘ç«™ç¾åŒ–"><a href="#ç½‘ç«™ç¾åŒ–" class="headerlink" title="ç½‘ç«™ç¾åŒ–"></a>ç½‘ç«™ç¾åŒ–</h1><h2 id="ç½‘ç«™èƒŒæ™¯"><a href="#ç½‘ç«™èƒŒæ™¯" class="headerlink" title="ç½‘ç«™èƒŒæ™¯"></a>ç½‘ç«™èƒŒæ™¯</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">background:</span> <span class="string">url(/resources/sys/bg_img.jpg)</span></span><br></pre></td></tr></table></figure><h2 id="é¡µè„šèƒŒæ™¯"><a href="#é¡µè„šèƒŒæ™¯" class="headerlink" title="é¡µè„šèƒŒæ™¯"></a>é¡µè„šèƒŒæ™¯</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer_bg:</span> <span class="string">/resources/sys/footer.jpg</span></span><br></pre></td></tr></table></figure><h2 id="æ‰“å­—æ•ˆæœ"><a href="#æ‰“å­—æ•ˆæœ" class="headerlink" title="æ‰“å­—æ•ˆæœ"></a>æ‰“å­—æ•ˆæœ</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (å†’å…‰ç‰¹æ•ˆ)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment">#  open shake (æŠ–å‹•ç‰¹æ•ˆ)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="èƒŒæ™¯å½©å¸¦ç‰¹æ•ˆ"><a href="#èƒŒæ™¯å½©å¸¦ç‰¹æ•ˆ" class="headerlink" title="èƒŒæ™¯å½©å¸¦ç‰¹æ•ˆ"></a>èƒŒæ™¯å½©å¸¦ç‰¹æ•ˆ</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">150</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">click_to_change:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="é¼ æ ‡ç‚¹å‡»çƒŸèŠ±ç‰¹æ•ˆ"><a href="#é¼ æ ‡ç‚¹å‡»çƒŸèŠ±ç‰¹æ•ˆ" class="headerlink" title="é¼ æ ‡ç‚¹å‡»çƒŸèŠ±ç‰¹æ•ˆ"></a>é¼ æ ‡ç‚¹å‡»çƒŸèŠ±ç‰¹æ•ˆ</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span> <span class="comment"># -1 or 9999</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="å­—æ•°ç»Ÿè®¡"><a href="#å­—æ•°ç»Ÿè®¡" class="headerlink" title="å­—æ•°ç»Ÿè®¡"></a>å­—æ•°ç»Ÿè®¡</h2><blockquote><p>å®‰è£…hexo-wordcount</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-wordcount --save</span><br></pre></td></tr></table></figure><blockquote><p>é…ç½®ä¸»é¢˜æ–‡ä»¶</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="æœ¬åœ°æœç´¢"><a href="#æœ¬åœ°æœç´¢" class="headerlink" title="æœ¬åœ°æœç´¢"></a>æœ¬åœ°æœç´¢</h2><blockquote><p>å®‰è£… hexo-generator-search</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><blockquote><p>_config.yaml ä¸­é…ç½®</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸»é¢˜é…ç½®æ–‡ä»¶</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> butterfly </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> theme </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„ç¬¬ä¸€ç¯‡hexoåšå®¢</title>
      <link href="/2022/01/30/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87hexo%E5%8D%9A%E5%AE%A2/"/>
      <url>/2022/01/30/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87hexo%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo-å‘½ä»¤"><a href="#hexo-å‘½ä»¤" class="headerlink" title="hexo å‘½ä»¤"></a>hexo å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="comment">#æ¸…é™¤é™æ€æ–‡ä»¶</span></span><br><span class="line">hexo generate <span class="comment">#ç”Ÿæˆé™æ€æ–‡ä»¶</span></span><br><span class="line">hexo server <span class="comment">#å¯åŠ¨æœåŠ¡å™¨</span></span><br><span class="line">hexo deploy <span class="comment">#éƒ¨ç½²åˆ°git</span></span><br><span class="line"></span><br><span class="line">hexo new <span class="string">&quot;blog&#x27;s name&quot;</span> <span class="comment">#åˆ›å»ºä¸€ç‰‡åšå®¢</span></span><br></pre></td></tr></table></figure><p><a href="https://hexo.io/zh-cn/docs/">æ–‡æ¡£ | Hexo</a></p><h1 id="hexo-é™æ€èµ„æº"><a href="#hexo-é™æ€èµ„æº" class="headerlink" title="hexo é™æ€èµ„æº"></a>hexo é™æ€èµ„æº</h1><blockquote><p>ä½¿ç”¨hexo-asset-image</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><blockquote><p>é…ç½®</p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">_config.yml</span></span><br><span class="line"><span class="comment"># ä¸èƒ½å¤šåŠ å…¶ä»–é…ç½®</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¿®æ”¹ /node_modules/hexo-asset-image/index.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="built_in">String</span>(hexo.version).split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">        <span class="keyword">var</span> link = data.permalink;</span><br><span class="line">    <span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">       <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class="line">    <span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">&#x27;excerpt&#x27;</span>, <span class="string">&#x27;more&#x27;</span>, <span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        <span class="attr">ignoreWhitespace</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">xmlMode</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">lowerCaseTags</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">decodeEntities</span>: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>))&#123;</span><br><span class="line">            <span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">            <span class="keyword">var</span> src = $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>).replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;</span><br><span class="line">               !<span class="regexp">/^\s*\//</span>.test(src)) &#123;</span><br><span class="line">              <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">              <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">              <span class="keyword">var</span> linkArray = link.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">var</span> srcArray = src.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">                srcArray.shift();</span><br><span class="line">              src = srcArray.join(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">              $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>, config.root + link + src);</span><br><span class="line">              <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;no src attr, skipped...&quot;</span>);</span><br><span class="line">            <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info($(<span class="built_in">this</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="é™æ€èµ„æºæµ‹è¯•"><a href="#é™æ€èµ„æºæµ‹è¯•" class="headerlink" title="é™æ€èµ„æºæµ‹è¯•"></a>é™æ€èµ„æºæµ‹è¯•</h1><p><img src="/.io//95710723_p0.jpg" alt="95710723_p0"></p><h1 id="é™æ€èµ„æºæœ¬åœ°åŒ–å¤„ç†"><a href="#é™æ€èµ„æºæœ¬åœ°åŒ–å¤„ç†" class="headerlink" title="é™æ€èµ„æºæœ¬åœ°åŒ–å¤„ç†"></a>é™æ€èµ„æºæœ¬åœ°åŒ–å¤„ç†</h1><blockquote><p>åœ¨sourceä¸‹åˆ›å»ºresourcesæ–‡ä»¶å¤¹</p></blockquote><p>é‡Œé¢å­˜å‚¨çš„æ˜¯é™æ€èµ„æºï¼Œè·¯å¾„æ˜¯/resources</p><blockquote><p>post æ–‡ç« çš„é™æ€èµ„æºæ˜¯åœ¨åŒåçš„æ–‡ä»¶å¤¹ä¸‹</p></blockquote><p>é…ç½® hexo-asset-image</p><h1 id="è®¾ç½®hexoé•¿æœŸåå°è¿è¡Œ"><a href="#è®¾ç½®hexoé•¿æœŸåå°è¿è¡Œ" class="headerlink" title="è®¾ç½®hexoé•¿æœŸåå°è¿è¡Œ"></a>è®¾ç½®hexoé•¿æœŸåå°è¿è¡Œ</h1><p><a href="https://blog.csdn.net/weixin_43979133/article/details/104787865">æ•™ç¨‹é“¾æ¥</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> butterfly </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/01/29/hello-world/"/>
      <url>/2022/01/29/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><h3 id="Download-butterfly-theme"><a href="#Download-butterfly-theme" class="headerlink" title="Download butterfly theme"></a>Download butterfly theme</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b master https://gitee.com/immyw/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><p>More info: <a href="https://butterfly.js.org/posts/21cfbf15/">butterfly </a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
